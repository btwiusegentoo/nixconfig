<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-03-04 Thu 20:28 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My NixOS configuration</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">My NixOS configuration</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org716293d">1. <code>[1/8]</code>TODOs</a>
<ul>
<li><a href="#org08b5209">1.1. <span class="todo TODO">TODO</span> Document xmobar</a></li>
<li><a href="#org55e4440">1.2. <span class="todo TODO">TODO</span> Document custom packages</a></li>
<li><a href="#orgabe74a0">1.3. <span class="todo TODO">TODO</span> Document configuration.nix/home.nix</a></li>
<li><a href="#org29a325d">1.4. <span class="todo TODO">TODO</span> Document emacs-anywhere</a></li>
<li><a href="#org7a52414">1.5. <span class="todo TODO">TODO</span> Document neovim and coc-settings.json</a></li>
<li><a href="#orgb127122">1.6. <span class="todo TODO">TODO</span> Document flashfocus</a></li>
<li><a href="#orgd31258c">1.7. <span class="todo TODO">TODO</span> Document vifm</a></li>
<li><a href="#org8001a85">1.8. <span class="done DONE">DONE</span> Nigthly neovim doesn&rsquo;t build. Maybe just switch to available overlay</a></li>
</ul>
</li>
<li><a href="#orgc1d9498">2. Flake</a>
<ul>
<li><a href="#org3da75a6">2.1. Flake inputs</a></li>
<li><a href="#org0612aaf">2.2. default imports</a></li>
<li><a href="#orgcc62ac9">2.3. X11 imports</a></li>
<li><a href="#orgde6497f">2.4. home-manager imports</a></li>
<li><a href="#orga4d94c2">2.5. home-manager X11 imports</a></li>
<li><a href="#orgbc6847b">2.6. nixpkgs config</a></li>
<li><a href="#org5f489af">2.7. import overlays</a></li>
<li><a href="#org20b18f9">2.8. Machines</a>
<ul>
<li><a href="#org05ffe21">2.8.1. Desktop</a></li>
<li><a href="#org0fbcc77">2.8.2. Laptop</a></li>
<li><a href="#orgd63de59">2.8.3. Server</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org3701508">3. Nix</a>
<ul>
<li><a href="#org9883a84">3.1. Enable flakes</a></li>
<li><a href="#org7aaf99c">3.2. Allowed users</a></li>
<li><a href="#orgeab8994">3.3. Trusted users</a></li>
<li><a href="#org04c8dfe">3.4. Enable lorri</a></li>
<li><a href="#orgb6b1ffe">3.5. Integrate lorri direnv with fish shell</a></li>
</ul>
</li>
<li><a href="#org1587b53">4. Overlays</a>
<ul>
<li><a href="#org90767c0">4.1. Overrides</a></li>
<li><a href="#org33950ef">4.2. Custom packages</a></li>
<li><a href="#orgd428421">4.3. Attribute overrides</a>
<ul>
<li><a href="#org4f67064">4.3.1. neofetch</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org09da106">5. Input</a>
<ul>
<li><a href="#orgb4292ec">5.1. Keyboard</a>
<ul>
<li><a href="#org6b2008f">5.1.1. Xorg repeat rate</a></li>
<li><a href="#orgb17045f">5.1.2. Dvorak</a></li>
<li><a href="#orge84225b">5.1.3. IME</a></li>
<li><a href="#orge90665b">5.1.4. Thinkpad</a></li>
</ul>
</li>
<li><a href="#orgffdd5e3">5.2. Trackpad</a></li>
<li><a href="#org0c2c10d">5.3. keynav</a></li>
</ul>
</li>
<li><a href="#orgd229410">6. Output</a>
<ul>
<li><a href="#orgcd97d42">6.1. Monitor</a>
<ul>
<li><a href="#orgc6e3e03">6.1.1. Brightness</a></li>
<li><a href="#org43a2653">6.1.2. Resolution</a></li>
</ul>
</li>
<li><a href="#orge7f9a0a">6.2. Sound</a>
<ul>
<li><a href="#org39fe2fd">6.2.1. Enable sound</a></li>
<li><a href="#orgda81238">6.2.2. PulseAudio</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgec33a08">7. Other Hardwares</a>
<ul>
<li><a href="#org2c9de5a">7.1. Bluetooth</a>
<ul>
<li><a href="#orgc7d02cb">7.1.1. Enable Bluetooth</a></li>
<li><a href="#org36f2d22">7.1.2. Bluetooth package</a></li>
<li><a href="#orgc04a559">7.1.3. Bluetooth config</a></li>
<li><a href="#org86f3256">7.1.4. Enable blueman</a></li>
</ul>
</li>
<li><a href="#orga380c3c">7.2. TLP</a>
<ul>
<li><a href="#org6074e1c">7.2.1. Enable TLP</a></li>
<li><a href="#orgbb9e515">7.2.2. TLP settings</a></li>
</ul>
</li>
<li><a href="#org2c754b6">7.3. Thinkfan</a>
<ul>
<li><a href="#org75caa57">7.3.1. Enable Thinkfan</a></li>
<li><a href="#org4b8757f">7.3.2. Select Fan</a></li>
<li><a href="#org55d3b76">7.3.3. Select sensors</a></li>
<li><a href="#org9d9f3ab">7.3.4. Levels</a></li>
</ul>
</li>
<li><a href="#org352c2bc">7.4. ZRAM</a>
<ul>
<li><a href="#orgcacb3a4">7.4.1. Enable ZRAM</a></li>
<li><a href="#org291a919">7.4.2. ZRAM algorithm</a></li>
<li><a href="#org66b32d4">7.4.3. ZRAM memory percent</a></li>
</ul>
</li>
<li><a href="#org36983f2">7.5. SSD</a></li>
<li><a href="#org2f73df1">7.6. Early oom</a></li>
</ul>
</li>
<li><a href="#orga6438e4">8. Look And Feel</a>
<ul>
<li><a href="#orgb6d116c">8.1. Color Scheme/Themes</a>
<ul>
<li><a href="#org76abce2">8.1.1. Color palette preview</a></li>
<li><a href="#org68e85e0">8.1.2. TTY Colors</a></li>
<li><a href="#org804a45b">8.1.3. Emacs theme</a></li>
<li><a href="#orgfdfbb92">8.1.4. Alacritty Colors</a></li>
<li><a href="#org8cd5162">8.1.5. xmonad prompt color</a></li>
<li><a href="#org61dd032">8.1.6. LightDM Colors</a></li>
<li><a href="#org5edb37e">8.1.7. Notification Colors</a></li>
<li><a href="#org35794ad">8.1.8. qutebrowser Colors</a></li>
<li><a href="#org5bd3822">8.1.9. mpv background color</a></li>
<li><a href="#orgd9f3b83">8.1.10. zathura colors</a></li>
<li><a href="#org853c84b">8.1.11. bat theme</a></li>
<li><a href="#org5eae7b8">8.1.12. fzf colors</a></li>
<li><a href="#orgbc602a2">8.1.13. fish shell colors</a></li>
<li><a href="#orgb5a6fdd">8.1.14. tmux colors</a></li>
</ul>
</li>
<li><a href="#orgf48572d">8.2. Fonts</a>
<ul>
<li><a href="#orgb26d539">8.2.1. Enable fontconfig</a></li>
<li><a href="#org86faac2">8.2.2. Default fonts</a></li>
<li><a href="#org8a9017f">8.2.3. Allow bitmaps</a></li>
<li><a href="#orgfd9cc1e">8.2.4. Use embedded bitmaps</a></li>
<li><a href="#org07fb024">8.2.5. Enable Font Dir</a></li>
<li><a href="#orgce1fde6">8.2.6. Enable ghost script fonts</a></li>
<li><a href="#org5978fcd">8.2.7. TTY Font</a></li>
<li><a href="#org73371bf">8.2.8. Emacs fonts</a></li>
<li><a href="#orgd677be6">8.2.9. xmonad prompt fonts</a></li>
<li><a href="#org8eaadc4">8.2.10. Alacritty Fonts</a></li>
<li><a href="#org595ff46">8.2.11. qutebrowser Fonts</a></li>
<li><a href="#org5097966">8.2.12. fontconfig</a></li>
<li><a href="#orga5004b2">8.2.13. Dunst(Notifications) font</a></li>
</ul>
</li>
<li><a href="#orgd73cd56">8.3. Wallpapers</a>
<ul>
<li><a href="#orgefdcd0d">8.3.1. Wallpaper files</a></li>
<li><a href="#org1296596">8.3.2. Lock screen</a></li>
<li><a href="#org9d89019">8.3.3. Set wallpaper</a></li>
</ul>
</li>
<li><a href="#orgb2f06fd">8.4. Icons</a></li>
<li><a href="#org7a0c6ea">8.5. Cursors</a>
<ul>
<li><a href="#org564a61e">8.5.1. Alacritty cursor</a></li>
<li><a href="#orgce5c8da">8.5.2. Set x11 cursor</a></li>
</ul>
</li>
<li><a href="#org556574d">8.6. Opacity</a>
<ul>
<li><a href="#orgf3fbeb0">8.6.1. Blur</a></li>
<li><a href="#orged69ad6">8.6.2. Blur exclude</a></li>
<li><a href="#org9cff0f7">8.6.3. Alacritty opacity</a></li>
<li><a href="#org4dcb122">8.6.4. Emacs opacity</a></li>
</ul>
</li>
<li><a href="#orga04f209">8.7. Border</a>
<ul>
<li><a href="#orgdf8c107">8.7.1. Border width</a></li>
<li><a href="#org0733f58">8.7.2. Window border color</a></li>
<li><a href="#orge08f207">8.7.3. Enable rounded borders</a></li>
<li><a href="#org123e47e">8.7.4. Corner radius</a></li>
<li><a href="#orgd144ef9">8.7.5. Rounded corner exclude</a></li>
<li><a href="#org916c4dd">8.7.6. Rounded borders exclude</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org4418cff">9. Terminal/Shell</a>
<ul>
<li><a href="#orgf7aabbb">9.1. Alacritty</a>
<ul>
<li><a href="#orgb25959a">9.1.1. Install Alacritty</a></li>
<li><a href="#orgafe3626">9.1.2. Enable true color</a></li>
<li><a href="#org830d3ce">9.1.3. Alacritty padding</a></li>
<li><a href="#orgc53addb">9.1.4. Window decorations</a></li>
<li><a href="#org1f6037a">9.1.5. Window startup mode</a></li>
<li><a href="#org92c1936">9.1.6. Scrolling</a></li>
<li><a href="#orgcfa711b">9.1.7. Draw bold text with bright colors</a></li>
<li><a href="#orgdf40e69">9.1.8. Key bindings</a></li>
</ul>
</li>
<li><a href="#org3dec8bc">9.2. TTY</a>
<ul>
<li><a href="#org9bcb32d">9.2.1. Early Setup</a></li>
</ul>
</li>
<li><a href="#org162361b">9.3. vterm</a>
<ul>
<li><a href="#org0a2c308">9.3.1. Install vterm</a></li>
<li><a href="#orgbd13c31">9.3.2. fish shell configuration</a></li>
</ul>
</li>
<li><a href="#org28b2a43">9.4. fish shell</a>
<ul>
<li><a href="#orge03bec1">9.4.1. Enable fish</a></li>
<li><a href="#org48d7073">9.4.2. Abbreviations</a></li>
<li><a href="#org800015f">9.4.3. Plugins</a></li>
<li><a href="#orge27855d">9.4.4. Enable vi key bindings</a></li>
<li><a href="#orga1d0c69">9.4.5. Startup message</a></li>
<li><a href="#orgeb183a3">9.4.6. Esc key delay</a></li>
</ul>
</li>
<li><a href="#orgc635694">9.5. starship</a>
<ul>
<li><a href="#orgfe57547">9.5.1. Enable starship</a></li>
<li><a href="#orgcac2afe">9.5.2. Enable fish shell integration</a></li>
<li><a href="#orgf2aea83">9.5.3. starship package</a></li>
<li><a href="#org98dc157">9.5.4. Add newline at the start of the prompt</a></li>
<li><a href="#orgabd1bf3">9.5.5. Prompt Character</a></li>
<li><a href="#orge611709">9.5.6. Directory</a></li>
<li><a href="#orgd3cbafb">9.5.7. Nix shell</a></li>
</ul>
</li>
<li><a href="#org17f8de6">9.6. Shell utilities</a>
<ul>
<li><a href="#org4cb5617">9.6.1. Git</a></li>
<li><a href="#org2f2abed">9.6.2. bat</a></li>
<li><a href="#org813ccb3">9.6.3. fzf</a></li>
<li><a href="#org293d983">9.6.4. lsd</a></li>
<li><a href="#org9d88b47">9.6.5. tmux</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgc4dea09">10. xmonad</a>
<ul>
<li><a href="#org5de84d8">10.1. Install xmonad/ Set config file path</a></li>
<li><a href="#org3ee31d0">10.2. imports</a></li>
<li><a href="#org0963d45">10.3. Workspaces</a></li>
<li><a href="#org4e9ad5d">10.4. xmonad prompt</a>
<ul>
<li><a href="#orgc7d6ddf">10.4.1. Set prompt height</a></li>
<li><a href="#org720c02b">10.4.2. keymap</a></li>
<li><a href="#org659462f">10.4.3. Config</a></li>
</ul>
</li>
<li><a href="#org24919b1">10.5. Set default terminal</a></li>
<li><a href="#org0f7d21f">10.6. Set gaps</a></li>
<li><a href="#orgad6fd14">10.7. Keybindings</a></li>
<li><a href="#orgcb52ee7">10.8. Layouts</a></li>
<li><a href="#orgca90ece">10.9. Startups(autostart)</a></li>
<li><a href="#orgb2863ca">10.10. Scratchpads</a></li>
<li><a href="#org42109b4">10.11. ManageHook</a></li>
<li><a href="#org611615b">10.12. Mouse</a></li>
<li><a href="#org46facfd">10.13. Function to get active layout description</a></li>
<li><a href="#orgc00cdd5">10.14. xmonad.hs base code</a></li>
</ul>
</li>
<li><a href="#orgde1a3bc">11. xmobar</a>
<ul>
<li><a href="#org3d029a3">11.1. Desktop config</a></li>
<li><a href="#orga58dfb9">11.2. Laptop config</a></li>
</ul>
</li>
<li><a href="#org2aa8bd9">12. Emacs</a>
<ul>
<li><a href="#org55d1621">12.1. Install Emacs nativecomp pgtk</a></li>
<li><a href="#org811c289">12.2. Enable Emacs daemon</a></li>
<li><a href="#orgecea5ad">12.3. Select doom-emacs modules</a>
<ul>
<li><a href="#orgf9c5642">12.3.1. base code</a></li>
<li><a href="#orgb515f94">12.3.2. input modules</a></li>
<li><a href="#orgf29d1d4">12.3.3. completion modules</a></li>
<li><a href="#org1600c11">12.3.4. UI modules</a></li>
<li><a href="#orga67107a">12.3.5. editor modules</a></li>
<li><a href="#orgac8bcff">12.3.6. emacs modules</a></li>
<li><a href="#orgf8c9bb6">12.3.7. term modules</a></li>
<li><a href="#orgf8a5a02">12.3.8. checkers modules</a></li>
<li><a href="#org318959e">12.3.9. tools modules</a></li>
<li><a href="#org99f4de8">12.3.10. OS modules</a></li>
<li><a href="#orgec5549c">12.3.11. lang modules</a></li>
<li><a href="#org5ca6f19">12.3.12. email modules</a></li>
<li><a href="#org629a46b">12.3.13. app modules</a></li>
<li><a href="#org39790b8">12.3.14. config modules</a></li>
</ul>
</li>
<li><a href="#orgfbd0689">12.4. Install custom packages</a>
<ul>
<li><a href="#org966ff02">12.4.1. Commentary</a></li>
</ul>
</li>
<li><a href="#org532bfaf">12.5. Disable line number</a></li>
<li><a href="#org746e0d3">12.6. Indent</a></li>
<li><a href="#org36261cc">12.7. History length</a></li>
<li><a href="#org4af32b7">12.8. Enable auto saving</a></li>
<li><a href="#orgce1173b">12.9. Delete files to trash</a></li>
<li><a href="#orgc4f85f4">12.10. Stretch cursor</a></li>
<li><a href="#org31f48fd">12.11. Centaur Tabs</a>
<ul>
<li><a href="#org3f46ba7">12.11.1. Style</a></li>
</ul>
</li>
<li><a href="#org3db9d2b">12.12. Modeline</a></li>
<li><a href="#org01d9ba6">12.13. Treemacs</a>
<ul>
<li><a href="#orgd7506b2">12.13.1. Set title for Treemacs workspace</a></li>
<li><a href="#org3e64c65">12.13.2. Start treemacs on emacs startup</a></li>
</ul>
</li>
<li><a href="#org43f3b49">12.14. Dashboard</a>
<ul>
<li><a href="#org29973a3">12.14.1. Set dashboard logo</a></li>
</ul>
</li>
<li><a href="#orgbdc0cbd">12.15. Company auto completion/LSP</a></li>
<li><a href="#orgfaee48e">12.16. Projectile</a></li>
<li><a href="#org157cc30">12.17. Magit</a></li>
<li><a href="#orgaf3cb75">12.18. Dired</a></li>
<li><a href="#orgf2a76db">12.19. org-mode</a>
<ul>
<li><a href="#org73f4d83">12.19.1. Set org-mode directory</a></li>
<li><a href="#org34d06ec">12.19.2. Start every org-mode files folded.</a></li>
<li><a href="#org964186b">12.19.3. Start every org-mode files with inline images</a></li>
<li><a href="#org8dc21eb">12.19.4. Enable variable pitch font in org-mode using mixed-pitch-mode</a></li>
<li><a href="#orgf679dab">12.19.5. Set org-mode headline bullets characters.</a></li>
<li><a href="#orge29772a">12.19.6. Hide markup elements(<b>bold</b>, <i>italic</i>)</a></li>
<li><a href="#orgcacf07c">12.19.7. Increase headline font sizes according to level</a></li>
<li><a href="#org59c2267">12.19.8. Set org-mode folding symbol(ellipsis) to triangle</a></li>
<li><a href="#org718bca2">12.19.9. Set margins for org-mode</a></li>
</ul>
</li>
<li><a href="#org59fd000">12.20. Evil-mode</a></li>
<li><a href="#org6fd816e">12.21. Avy</a></li>
<li><a href="#org204804f">12.22. Rainbow mode</a></li>
<li><a href="#orge2095af">12.23. Haskell mode</a></li>
<li><a href="#org5937387">12.24. Twittering mode</a></li>
<li><a href="#org9c0d309">12.25. Performance (optimize, remove the clutter)</a></li>
<li><a href="#org8f99b00">12.26. emacs.nix base code</a></li>
<li><a href="#orge3cc69d">12.27. doom-emacs config.el base code</a></li>
</ul>
</li>
<li><a href="#org8cd5df6">13. neovim</a>
<ul>
<li><a href="#org7376d86">13.1. Open lazygit commit window inside neovim</a></li>
</ul>
</li>
<li><a href="#org9ccfa66">14. Dev environment</a>
<ul>
<li><a href="#org57af4e6">14.1. Haskell</a></li>
</ul>
</li>
<li><a href="#org0bf504b">15. Web Browser</a>
<ul>
<li><a href="#orgeeb020c">15.1. qutebrowser</a>
<ul>
<li><a href="#orge5a8329">15.1.1. Install qutebrowser</a></li>
<li><a href="#org59bed22">15.1.2. Search engine</a></li>
<li><a href="#org6980c75">15.1.3. GPU acceleration</a></li>
<li><a href="#org06ecfa5">15.1.4. Youtube playback with mpv</a></li>
<li><a href="#org23b052e">15.1.5. Qutebrowser start page</a></li>
<li><a href="#org6bfbe35">15.1.6. Max completion history items</a></li>
<li><a href="#org7dc2354">15.1.7. Default zoom</a></li>
<li><a href="#orgd795940">15.1.8. Edit text on qutebrowser using emacs</a></li>
<li><a href="#orga963441">15.1.9. Dvorak friendly Hinting</a></li>
</ul>
</li>
<li><a href="#orgb04bd72">15.2. Firefox</a>
<ul>
<li><a href="#org6307cd9">15.2.1. Install Firefox</a></li>
<li><a href="#org6c33bb9">15.2.2. Firefox package</a></li>
<li><a href="#orga536abf">15.2.3. Extensions</a></li>
<li><a href="#org2c726f0">15.2.4. Tridactyl</a></li>
<li><a href="#orga72911a">15.2.5. Start page</a></li>
<li><a href="#org223d2e0">15.2.6. Use US google search engine</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org87b596f">16. Multimedia</a>
<ul>
<li><a href="#org8725316">16.1. mpv</a>
<ul>
<li><a href="#orgec935bb">16.1.1. Install mpv</a></li>
<li><a href="#orgc0fa354">16.1.2. Enable hardware decoding</a></li>
<li><a href="#orgd529642">16.1.3. mpv default volume</a></li>
<li><a href="#org271260c">16.1.4. mpv key bindings</a></li>
</ul>
</li>
<li><a href="#orgf970f77">16.2. zathura</a>
<ul>
<li><a href="#orga5583bf">16.2.1. Enable zathura</a></li>
<li><a href="#orgd29b6a9">16.2.2. Recolor</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgb5b246c">17. Games</a>
<ul>
<li><a href="#org35e0d2f">17.1. RetroArch</a></li>
<li><a href="#org0ed96e7">17.2. Dolphin (GC/Wii emu)</a></li>
</ul>
</li>
<li><a href="#org3c47700">18. Security</a>
<ul>
<li><a href="#org44e6eaf">18.1. doas</a></li>
<li><a href="#org6468e09">18.2. ClamAV</a>
<ul>
<li><a href="#org92bc1a9">18.2.1. Enable ClamAV daemon</a></li>
<li><a href="#org5a75d27">18.2.2. ClamAV daemon configs</a></li>
<li><a href="#org1fba1df">18.2.3. Enable ClamAV updater</a></li>
<li><a href="#orgb0d04d3">18.2.4. ClamAV update frequency</a></li>
<li><a href="#org13a3f9e">18.2.5. ClamAV updater interval</a></li>
<li><a href="#orgbbbc077">18.2.6. ClamAV updater configs</a></li>
</ul>
</li>
<li><a href="#orgdd416b4">18.3. GnuPG</a>
<ul>
<li><a href="#orgf6257dd">18.3.1. Enable GPG</a></li>
<li><a href="#org6421bd1">18.3.2. GPG settings</a></li>
<li><a href="#orgb155e58">18.3.3. Enable GPG agent</a></li>
<li><a href="#org617ca4d">18.3.4. Enable SSH support</a></li>
<li><a href="#orgffd525f">18.3.5. Grab the keyboard and mouse</a></li>
<li><a href="#org63d8e9c">18.3.6. Select pinentry interface</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org5aac44e">19. Common configs</a>
<ul>
<li><a href="#org106a6dc">19.1. X server</a></li>
<li><a href="#org2c8c966">19.2. LightDM</a></li>
<li><a href="#orgc7eff00">19.3. Locale</a></li>
<li><a href="#org51a1124">19.4. XDG</a>
<ul>
<li><a href="#org56ac6ab">19.4.1. Enable XDG module</a></li>
<li><a href="#org1be3c2f">19.4.2. Enable XDG user dirs</a></li>
<li><a href="#orga9d3117">19.4.3. Enable XDG mime</a></li>
<li><a href="#orgd2eddd1">19.4.4. XDG mimeapps</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgfc6a0a1">20. Services</a>
<ul>
<li><a href="#org3530763">20.1. OpenSSH</a>
<ul>
<li><a href="#org67ec7fc">20.1.1. Enable SSH</a></li>
<li><a href="#orgf7f95ef">20.1.2. Challenge Response Authentication</a></li>
<li><a href="#org0211ba5">20.1.3. X11 forwarding</a></li>
<li><a href="#orgec1df12">20.1.4. Open firewall</a></li>
<li><a href="#org8dede4a">20.1.5. Password authentication</a></li>
<li><a href="#orgf66c5d4">20.1.6. Root login</a></li>
</ul>
</li>
<li><a href="#org35e2357">20.2. Dunst</a>
<ul>
<li><a href="#orgc9bc174">20.2.1. Enable dunst</a></li>
<li><a href="#orgac8cdf6">20.2.2. Dunst Settings</a></li>
</ul>
</li>
<li><a href="#orgfa9708d">20.3. Picom</a>
<ul>
<li><a href="#orge4d5f0b">20.3.1. Enable picom</a></li>
<li><a href="#org6f75b44">20.3.2. Picom package</a></li>
<li><a href="#org7ce4016">20.3.3. Picom backend</a></li>
<li><a href="#orgcc3d0b6">20.3.4. Experimental backends</a></li>
<li><a href="#org9323597">20.3.5. Detect Client Opacity</a></li>
<li><a href="#org7a4cabc">20.3.6. Detect rounded corners</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org8a505cb">21. Machines</a>
<ul>
<li><a href="#org67c24a1">21.1. Common Defaults</a></li>
<li><a href="#org5ad10e1">21.2. Boot/kernel/initrd</a>
<ul>
<li><a href="#org5d7b26f">21.2.1. Grub</a></li>
<li><a href="#org01efb24">21.2.2. systemd-boot</a></li>
<li><a href="#org243dcd5">21.2.3. filesystem path/luks</a></li>
</ul>
</li>
<li><a href="#org16143f0">21.3. Hardware</a>
<ul>
<li><a href="#orga2f826e">21.3.1. xserver AMDGPU driver</a></li>
<li><a href="#org15c0a8d">21.3.2. xserver intel gpu driver</a></li>
</ul>
</li>
<li><a href="#org0cde8ad">21.4. Desktop</a>
<ul>
<li><a href="#org61c7cf4">21.4.1. Set desktop hostname</a></li>
<li><a href="#org93e5936">21.4.2. configuration.nix</a></li>
<li><a href="#orgbc00aa0">21.4.3. Packages to install on desktop home environment</a></li>
<li><a href="#org0c78a7f">21.4.4. home.nix</a></li>
</ul>
</li>
<li><a href="#orgf51b685">21.5. Laptop</a>
<ul>
<li><a href="#org08c8789">21.5.1. Set laptop hostname</a></li>
<li><a href="#org7c44c2a">21.5.2. configuration.nix</a></li>
<li><a href="#org84760e7">21.5.3. Packages to install on laptop home environment</a></li>
<li><a href="#orgf0b7195">21.5.4. home.nix</a></li>
</ul>
</li>
<li><a href="#org64342ea">21.6. Server</a>
<ul>
<li><a href="#org28cc7dd">21.6.1. Set server hostname</a></li>
<li><a href="#orgfcdc8df">21.6.2. configuration.nix</a></li>
<li><a href="#org914d710">21.6.3. Packages to install on server home environment</a></li>
<li><a href="#orgb779552">21.6.4. home.nix</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgc30713e">22. Symlinks</a>
<ul>
<li><a href="#orgbc6c7cf">22.1. /etc files</a></li>
<li><a href="#orgb20971a">22.2. ~/.config files</a></li>
</ul>
</li>
<li><a href="#orgf566488">23. Misc</a>
<ul>
<li><a href="#org3d0aa73">23.1. Makefile</a></li>
</ul>
</li>
<li><a href="#org1cd8baa">24. Credits</a></li>
</ul>
</div>
</div>
<p>
<img src="pictures/screenshot1.png" alt="screenshot1.png" /> <img src="pictures/wallpaper2.png" alt="wallpaper2.png" />
</p>

<p>
This is my repo that contains my configuration files for my machines (aka dotfiles)
This repository contains configuration for three hosts currently
</p>
<ul class="org-ul">
<li>Ryzen desktop</li>
<li>My portable laptop</li>
<li>My server</li>
</ul>
<p>
All hosts runs NixOS and it&rsquo;s managed by <a href="https://nixos.wiki/wiki/Flakes">Nix Flakes</a>.
<a href="https://github.com/nix-community/home-manager">home-manager</a> is used to manage user environment. I try to install programs/services in user level as much as possible.
I use <a href="https://xmonad.org/">xmonad</a> as window manager for Desktop and Laptop, while server is headless.
</p>

<p>
Prequisites
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">NixOS</td>
<td class="org-left">Requires a NixOS environment to install <a href="https://nixos.org/download.html">Download live environment here</a></td>
</tr>

<tr>
<td class="org-left">Nix flakes</td>
<td class="org-left">Requires nix flakes to install this config <a href="#org9883a84">Enable flakes</a></td>
</tr>

<tr>
<td class="org-left">Emacs</td>
<td class="org-left"><a href="#org2aa8bd9">Emacs</a> is optional, required to generate files from this document</td>
</tr>
</tbody>
</table>

<p>
To generate actual files, open this file in emacs and execute <code>M-x org-babel-tangle</code>, binded to <code>C-c C-v t</code>
You can install this config in NixOS running  <code>nixos-rebuild switch --flake</code> at repository root.
</p>

<p>
You can also use <code>cmake</code> to make things easier
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">make</td>
<td class="org-left">Executes the same command as <code>make build</code></td>
</tr>

<tr>
<td class="org-left">make build</td>
<td class="org-left">Generate files from this document using emacs</td>
</tr>

<tr>
<td class="org-left">make install</td>
<td class="org-left">Install this config based on hostname</td>
</tr>

<tr>
<td class="org-left">make desktop1</td>
<td class="org-left">Install Desktop configs</td>
</tr>

<tr>
<td class="org-left">make laptop1</td>
<td class="org-left">Install laptop configs</td>
</tr>

<tr>
<td class="org-left">make server1</td>
<td class="org-left">Install server configs</td>
</tr>
</tbody>
</table>

<p>
You can use <code>SPC m .</code> in doom-emacs to navigate headlines faster.
If you just want to navigate my config,
Please don&rsquo;t use GitHub preview. Open this file in emacs, or just go <a href="https://btwiusegentoo.github.io/nixconfig/">here</a> from browser (generated HTML file).
I keep in sync a HTML file based on this document, thanks to <a href="https://github.com/fniessen/org-html-themes">https://github.com/fniessen/org-html-themes</a>
</p>

<p>
It&rsquo;s much easier to read than GitHub preview.
</p>

<p>
All files generated from README.org except configuration.nix(s) are read-only.
Made an exception for configuration.nix(s) because NixOS reinstall requires to edit Partition UUID.
</p>

<div id="outline-container-org716293d" class="outline-2">
<h2 id="org716293d"><span class="section-number-2">1</span> <code>[1/8]</code>TODOs</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org08b5209" class="outline-3">
<h3 id="org08b5209"><span class="section-number-3">1.1</span> <span class="todo TODO">TODO</span> Document xmobar</h3>
</div>
<div id="outline-container-org55e4440" class="outline-3">
<h3 id="org55e4440"><span class="section-number-3">1.2</span> <span class="todo TODO">TODO</span> Document custom packages</h3>
</div>
<div id="outline-container-orgabe74a0" class="outline-3">
<h3 id="orgabe74a0"><span class="section-number-3">1.3</span> <span class="todo TODO">TODO</span> Document configuration.nix/home.nix</h3>
</div>
<div id="outline-container-org29a325d" class="outline-3">
<h3 id="org29a325d"><span class="section-number-3">1.4</span> <span class="todo TODO">TODO</span> Document emacs-anywhere</h3>
</div>
<div id="outline-container-org7a52414" class="outline-3">
<h3 id="org7a52414"><span class="section-number-3">1.5</span> <span class="todo TODO">TODO</span> Document neovim and coc-settings.json</h3>
</div>
<div id="outline-container-orgb127122" class="outline-3">
<h3 id="orgb127122"><span class="section-number-3">1.6</span> <span class="todo TODO">TODO</span> Document flashfocus</h3>
</div>
<div id="outline-container-orgd31258c" class="outline-3">
<h3 id="orgd31258c"><span class="section-number-3">1.7</span> <span class="todo TODO">TODO</span> Document vifm</h3>
</div>
<div id="outline-container-org8001a85" class="outline-3">
<h3 id="org8001a85"><span class="section-number-3">1.8</span> <span class="done DONE">DONE</span> Nigthly neovim doesn&rsquo;t build. Maybe just switch to available overlay</h3>
</div>
</div>
<div id="outline-container-orgc1d9498" class="outline-2">
<h2 id="orgc1d9498"><span class="section-number-2">2</span> Flake</h2>
<div class="outline-text-2" id="text-2">
<p>
A flake is (usually) a Git repository that contains a file named <code>flake.nix</code> at root.
This repository is compatible with nix flakes.
The following code is the base code of  <code>flake.nix</code> file.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  <span style="color: #ffcb6b;">description</span> = <span style="color: #c3e88d;">"NixOS configuration for all machines"</span>;

  &lt;<span style="color: #f78c6c;">&lt;flake-inputs&gt;</span>&gt;

  <span style="color: #ffcb6b;">outputs</span> = inputs@{ self, home-manager, nur, nixpkgs, ... }:
    <span style="color: #89DDFF;">let</span>
      <span style="color: #89DDFF;">inherit</span> (<span style="color: #82aaff;">builtins</span>) listToAttrs attrValues attrNames readDir;
      <span style="color: #89DDFF;">inherit</span> (nixpkgs) lib;
      <span style="color: #89DDFF;">inherit</span> (lib) removeSuffix;

      &lt;<span style="color: #f78c6c;">&lt;nixpkgs-config&gt;</span>&gt;

      &lt;<span style="color: #f78c6c;">&lt;flake-defaults&gt;</span>&gt;
    <span style="color: #89DDFF;">in</span>
    {
      &lt;<span style="color: #f78c6c;">&lt;flake-overlays&gt;</span>&gt;

      <span style="color: #ffcb6b;">nixosConfigurations</span> = {
        &lt;<span style="color: #f78c6c;">&lt;desktop1&gt;</span>&gt;
        &lt;<span style="color: #f78c6c;">&lt;laptop1&gt;</span>&gt;
        &lt;<span style="color: #f78c6c;">&lt;server1&gt;</span>&gt;
      };
    };
}
</pre>
</div>
</div>
<div id="outline-container-org3da75a6" class="outline-3">
<h3 id="org3da75a6"><span class="section-number-3">2.1</span> Flake inputs</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Flakes provides a better approach than channel to manage nixpkgs and overlays. 
It&rsquo;s called <code>inputs</code>.
Channels aren&rsquo;t pinned in the config. When updating nixpkgs, you have to run this command <code>nix-channel --update</code> <b>locally</b> everytime.
Therefore, nixpkgs revision differs from machine to machine, making not fully reproducible.
Using nix flakes, All inputs are automatically pinned at specific revision in <code>flake.lock</code> file at repository root to guarantee reproducibility.
This can also be achieved by manually pinning nixpkgs at specific revision using overlays.
But flakes does it automatically, without having to update rev and sha256 manually everytime.
You can update inputs easily like this: <code>nix flake --update-input nixpkgs</code>
</p>

<div class="org-src-container">
<pre class="src src-nix" id="org8f60614"><span style="color: #ffcb6b;">inputs</span> = {
  <span style="color: #ffcb6b;">home-manager</span> = {
    <span style="color: #ffcb6b;">url</span> = <span style="color: #c3e88d;">"github:rycee/home-manager/release-20.09"</span>;
    <span style="color: #ffcb6b;">inputs</span> = {
      <span style="color: #ffcb6b;">nixpkgs.follows</span> = <span style="color: #c3e88d;">"nixpkgs"</span>;
    };
  };
  <span style="color: #ffcb6b;">nur.url</span> = <span style="color: #c3e88d;">"github:nix-community/NUR"</span>;
  <span style="color: #ffcb6b;">emacs-overlay.url</span> = <span style="color: #c3e88d;">"github:nix-community/emacs-overlay"</span>;
  <span style="color: #ffcb6b;">neovim-overlay.url</span> = <span style="color: #c3e88d;">"github:nix-community/neovim-nightly-overlay"</span>;

  <span style="color: #ffcb6b;">nixpkgs.url</span> = <span style="color: #c3e88d;">"github:nixos/nixpkgs/nixos-20.09"</span>;
  <span style="color: #ffcb6b;">unstable.url</span> = <span style="color: #c3e88d;">"github:nixos/nixpkgs/nixos-unstable"</span>;
  <span style="color: #ffcb6b;">master.url</span> = <span style="color: #c3e88d;">"github:nixos/nixpkgs/master"</span>;
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org0612aaf" class="outline-3">
<h3 id="org0612aaf"><span class="section-number-3">2.2</span> default imports</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Import default modules
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgf47d3da"><span style="color: #ffcb6b;">defaults</span> = { pkgs, ... }: {
  <span style="color: #ffcb6b;">imports</span> = [
    <span style="color: #f78c6c;">./cachix.nix</span>
    <span style="color: #f78c6c;">./modules/common/nix.nix</span>
    <span style="color: #f78c6c;">./modules/common/doas.nix</span>
    <span style="color: #f78c6c;">./modules/common/console.nix</span>
    <span style="color: #f78c6c;">./modules/hardware/bluetooth.nix</span>
    <span style="color: #f78c6c;">./modules/hardware/zram.nix</span>
    <span style="color: #f78c6c;">./modules/hardware/earlyoom.nix</span>
    <span style="color: #f78c6c;">./modules/common/etcfiles.nix</span>
    <span style="color: #f78c6c;">./modules/common/systempackages.nix</span>
    <span style="color: #f78c6c;">./modules/common/globallocale.nix</span>
    <span style="color: #f78c6c;">./modules/services/pulseaudio.nix</span>
    <span style="color: #f78c6c;">./modules/services/clamav.nix</span>
    <span style="color: #f78c6c;">./modules/services/openssh.nix</span>
  ];
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcc62ac9" class="outline-3">
<h3 id="orgcc62ac9"><span class="section-number-3">2.3</span> X11 imports</h3>
<div class="outline-text-3" id="text-2-3">
<p>
List default modules that <b>requires X11</b> here
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgeb30945"><span style="color: #f78c6c;">./modules/common/fonts.nix</span>
<span style="color: #f78c6c;">./modules/gui/blueman.nix</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgde6497f" class="outline-3">
<h3 id="orgde6497f"><span class="section-number-3">2.4</span> home-manager imports</h3>
<div class="outline-text-3" id="text-2-4">
<p>
List default modules for home-manager that <b>doesn&rsquo;t require X11</b> here
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgbc28e35"><span style="color: #f78c6c;">./modules/terminal/fish.nix</span>
<span style="color: #f78c6c;">./modules/terminal/git.nix</span>
<span style="color: #f78c6c;">./modules/terminal/bat.nix</span>
<span style="color: #f78c6c;">./modules/terminal/fzf.nix</span>
<span style="color: #f78c6c;">./modules/terminal/lsd.nix</span>
<span style="color: #f78c6c;">./modules/terminal/starship.nix</span>
<span style="color: #f78c6c;">./modules/terminal/tmux.nix</span>
<span style="color: #f78c6c;">./modules/services/gpg.nix</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orga4d94c2" class="outline-3">
<h3 id="orga4d94c2"><span class="section-number-3">2.5</span> home-manager X11 imports</h3>
<div class="outline-text-3" id="text-2-5">
<p>
List default modules for home-manager that <b>requires X11</b> here
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org8548f5e"><span style="color: #f78c6c;">./modules/common/xdg.nix</span>
<span style="color: #f78c6c;">./modules/common/xmonad.nix</span>
<span style="color: #f78c6c;">./modules/services/dunst.nix</span>
<span style="color: #f78c6c;">./modules/services/picom.nix</span>
<span style="color: #f78c6c;">./modules/terminal/alacritty.nix</span>
<span style="color: #f78c6c;">./modules/gui/qutebrowser.nix</span>
<span style="color: #f78c6c;">./modules/gui/firefox.nix</span>
<span style="color: #f78c6c;">./modules/gui/mpv.nix</span>
<span style="color: #f78c6c;">./modules/gui/zathura.nix</span>
<span style="color: #f78c6c;">./modules/editors/emacs.nix</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbc6847b" class="outline-3">
<h3 id="orgbc6847b"><span class="section-number-3">2.6</span> nixpkgs config</h3>
<div class="outline-text-3" id="text-2-6">
<p>
This configuration is for default nixpkgs.
Set system arch to x86<sub>64</sub>, Allow installation for non-free software(also known as proprietary software), and import overlays from 
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org644bd8c"><span style="color: #ffcb6b;">pkgs</span> = (<span style="color: #82aaff;">import</span> nixpkgs) {
  <span style="color: #ffcb6b;">system</span> = <span style="color: #c3e88d;">"x86_64-linux"</span>;
  <span style="color: #ffcb6b;">config</span> = {
    <span style="color: #ffcb6b;">allowUnfree</span> = <span style="color: #82aaff;">true</span>;
    &lt;<span style="color: #f78c6c;">&lt;retroarch-cores&gt;</span>&gt;
  };
  <span style="color: #ffcb6b;">overlays</span> = attrValues self.overlays;
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org5f489af" class="outline-3">
<h3 id="org5f489af"><span class="section-number-3">2.7</span> import overlays</h3>
<div class="outline-text-3" id="text-2-7">
<p>
This code searchs <code>./overlays</code> directory for nix files and automatically imports the files.
NUR, nixos-unstable, nixpkgs master are imported as package set of pkgs here. Packages from these package sets can be referred like <code>pkgs.unstable.fish</code> <code>pkgs.master.discord</code> <code>pkgs.nur.repos.rycee.firefox-addons</code>
This have a benefit than just importing the same way as pkgs like <code>{pkgs, unstable, master, ... }:</code>. If you import unstable just like pkgs, idk why, but it can&rsquo;t be imported from overlays.
So it can&rsquo;t be used to override packages of home-manager modules.
Importing as package set makes it possible and it&rsquo;s more convenient.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgc1ee120"><span style="color: #ffcb6b;">overlays</span> =
  <span style="color: #89DDFF;">let</span>
    <span style="color: #ffcb6b;">overlayFiles</span> = listToAttrs (<span style="color: #82aaff;">map</span>
      (name: {
        <span style="color: #ffcb6b;">name</span> = removeSuffix <span style="color: #c3e88d;">".nix"</span> name;
        <span style="color: #ffcb6b;">value</span> = <span style="color: #82aaff;">import</span> (<span style="color: #f78c6c;">./overlays</span> + <span style="color: #c3e88d;">"/</span><span style="color: #89DDFF; font-weight: bold;">${</span>name<span style="color: #89DDFF; font-weight: bold;">}</span>");
      })
      (attrNames (readDir <span style="color: #f78c6c;">./overlays</span>)));
  <span style="color: #89DDFF;">in</span>
    overlayFiles // {
      <span style="color: #ffcb6b;">nur</span> = final: prev: {
        <span style="color: #ffcb6b;">nur</span> = <span style="color: #82aaff;">import</span> inputs.nur { <span style="color: #ffcb6b;">nurpkgs</span> = final; <span style="color: #ffcb6b;">pkgs</span> = final; };
      };
      <span style="color: #ffcb6b;">emacs-overlay</span> = inputs.emacs-overlay.overlay;
      <span style="color: #ffcb6b;">neovim-overlay</span> = inputs.neovim-overlay.overlay;
      <span style="color: #ffcb6b;">unstable</span> = final: prev: {
        <span style="color: #ffcb6b;">unstable</span> = <span style="color: #82aaff;">import</span> inputs.unstable {
          <span style="color: #ffcb6b;">system</span> = final.system;
          <span style="color: #ffcb6b;">config.allowUnfree</span> = <span style="color: #82aaff;">true</span>;
        };
      };
      <span style="color: #ffcb6b;">master</span> = final: prev: {
        <span style="color: #ffcb6b;">master</span> = <span style="color: #82aaff;">import</span> inputs.master {
          <span style="color: #ffcb6b;">system</span> = final.system;
          <span style="color: #ffcb6b;">config.allowUnfree</span> = <span style="color: #82aaff;">true</span>;
        };
      };
    };
</pre>
</div>
</div>
</div>
<div id="outline-container-org20b18f9" class="outline-3">
<h3 id="org20b18f9"><span class="section-number-3">2.8</span> Machines</h3>
<div class="outline-text-3" id="text-2-8">
<p>
These are the codes that evaluates a NixOS configuration for tools like <code>nixos-rebuild</code> for each machines.
It imports modules (that contains configuration for) for each machines.
</p>
</div>
<div id="outline-container-org05ffe21" class="outline-4">
<h4 id="org05ffe21"><span class="section-number-4">2.8.1</span> Desktop</h4>
<div class="outline-text-4" id="text-2-8-1">
<div class="org-src-container">
<pre class="src src-nix" id="org93c7425"><span style="color: #ffcb6b;">desktop1</span> = nixpkgs.lib.nixosSystem {
  <span style="color: #ffcb6b;">system</span> = <span style="color: #c3e88d;">"x86_64-linux"</span>;
  <span style="color: #ffcb6b;">modules</span> =
    [
      defaults
      <span style="color: #f78c6c;">./machines/maindesktop/configuration.nix</span>
      <span style="color: #f78c6c;">./modules/common/xserver.nix</span>
      <span style="color: #f78c6c;">./modules/hardware/ssd.nix</span>
      &lt;<span style="color: #f78c6c;">&lt;x11-defaults&gt;</span>&gt;
      home-manager.nixosModules.home-manager
        ({
          <span style="color: #ffcb6b;">home-manager.useGlobalPkgs</span> = <span style="color: #82aaff;">true</span>;
          <span style="color: #ffcb6b;">home-manager.useUserPackages</span> = <span style="color: #82aaff;">true</span>;
          <span style="color: #ffcb6b;">home-manager.users.btw</span> = { ... }: {
            <span style="color: #ffcb6b;">imports</span> = [
              <span style="color: #f78c6c;">./machines/maindesktop/home.nix</span>
              &lt;<span style="color: #f78c6c;">&lt;home-manager-x11-defaults&gt;</span>&gt;
              &lt;<span style="color: #f78c6c;">&lt;home-manager-defaults&gt;</span>&gt;
            ];
          };
        })
    ];
  <span style="color: #89DDFF;">inherit</span> pkgs;
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org0fbcc77" class="outline-4">
<h4 id="org0fbcc77"><span class="section-number-4">2.8.2</span> Laptop</h4>
<div class="outline-text-4" id="text-2-8-2">
<div class="org-src-container">
<pre class="src src-nix" id="org0418659"><span style="color: #ffcb6b;">laptop1</span> = nixpkgs.lib.nixosSystem {
  <span style="color: #ffcb6b;">system</span> = <span style="color: #c3e88d;">"x86_64-linux"</span>;
  <span style="color: #ffcb6b;">modules</span> =
    [
      defaults
      <span style="color: #f78c6c;">./machines/mainlaptop/configuration.nix</span>
      <span style="color: #f78c6c;">./modules/common/xserverlaptop.nix</span>
      <span style="color: #f78c6c;">./modules/hardware/ssd.nix</span>
      <span style="color: #f78c6c;">./modules/hardware/tlp.nix</span>
      <span style="color: #f78c6c;">./modules/hardware/thinkfan.nix</span>
      <span style="color: #f78c6c;">./modules/hardware/libinput.nix</span>
      &lt;<span style="color: #f78c6c;">&lt;x11-defaults&gt;</span>&gt;
      home-manager.nixosModules.home-manager
        ({
          <span style="color: #ffcb6b;">home-manager.useGlobalPkgs</span> = <span style="color: #82aaff;">true</span>;
          <span style="color: #ffcb6b;">home-manager.useUserPackages</span> = <span style="color: #82aaff;">true</span>;
          <span style="color: #ffcb6b;">home-manager.users.x230</span> = { ... }: {
            <span style="color: #ffcb6b;">imports</span> = [
              <span style="color: #f78c6c;">./machines/mainlaptop/home.nix</span>
              &lt;<span style="color: #f78c6c;">&lt;home-manager-x11-defaults&gt;</span>&gt;
              &lt;<span style="color: #f78c6c;">&lt;home-manager-defaults&gt;</span>&gt;
            ];
          };
        })
    ];
  <span style="color: #89DDFF;">inherit</span> pkgs;
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd63de59" class="outline-4">
<h4 id="orgd63de59"><span class="section-number-4">2.8.3</span> Server</h4>
<div class="outline-text-4" id="text-2-8-3">
<div class="org-src-container">
<pre class="src src-nix" id="org82dda47"><span style="color: #ffcb6b;">server1</span> = nixpkgs.lib.nixosSystem {
  <span style="color: #ffcb6b;">system</span> = <span style="color: #c3e88d;">"x86_64-linux"</span>;
  <span style="color: #ffcb6b;">modules</span> =
    [
      defaults
      <span style="color: #f78c6c;">./machines/mainserver/configuration.nix</span>
      home-manager.nixosModules.home-manager
      ({
        <span style="color: #ffcb6b;">home-manager.useGlobalPkgs</span> = <span style="color: #82aaff;">true</span>;
        <span style="color: #ffcb6b;">home-manager.useUserPackages</span> = <span style="color: #82aaff;">true</span>;
        <span style="color: #ffcb6b;">home-manager.users.hac</span> = { ... }: {
          <span style="color: #ffcb6b;">imports</span> = [
            <span style="color: #f78c6c;">./machines/mainserver/home.nix</span>
            &lt;<span style="color: #f78c6c;">&lt;home-manager-defaults&gt;</span>&gt;
          ];
        };
      })
    ];
  <span style="color: #89DDFF;">inherit</span> pkgs;
};
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org3701508" class="outline-2">
<h2 id="org3701508"><span class="section-number-2">3</span> Nix</h2>
<div class="outline-text-2" id="text-3">
<p>
Configure Nix package manager
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:
{
  &lt;<span style="color: #f78c6c;">&lt;nix-package&gt;</span>&gt;

  <span style="color: #ffcb6b;">nix.extraOptions</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">    &lt;&lt;nix-enable-flakes&gt;&gt;</span>
<span style="color: #c3e88d;">    builders-use-substitutes = true</span>
<span style="color: #c3e88d;">  ''</span>;
  &lt;<span style="color: #f78c6c;">&lt;nix-allowed-users&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;nix-trusted-users&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-org9883a84" class="outline-3">
<h3 id="org9883a84"><span class="section-number-3">3.1</span> Enable flakes</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Select Nix package that contains flakes
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org123c938"><span style="color: #ffcb6b;">nix.package</span> = pkgs.nixFlakes;
</pre>
</div>
<p>
Enable nix flakes(flakes is still a experimental feature.)
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgae1c564"><span style="color: #ffcb6b;">experimental-features</span> = nix-command flakes
</pre>
</div>
</div>
</div>
<div id="outline-container-org7aaf99c" class="outline-3">
<h3 id="org7aaf99c"><span class="section-number-3">3.2</span> Allowed users</h3>
<div class="outline-text-3" id="text-3-2">
<p>
A list of names of users that are allowed to connect to the Nix daemon.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org5769eb6"><span style="color: #ffcb6b;">nix.allowedUsers</span> = [ <span style="color: #c3e88d;">"@wheel"</span> ];
</pre>
</div>
</div>
</div>
<div id="outline-container-orgeab8994" class="outline-3">
<h3 id="orgeab8994"><span class="section-number-3">3.3</span> Trusted users</h3>
<div class="outline-text-3" id="text-3-3">
<p>
A list of names of users that have additional rights when connecting to the Nix daemon.
Add user here to use cachix and run <code>nixos-rebuild</code> from that user.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org65ad5a7"><span style="color: #ffcb6b;">nix.trustedUsers</span> = [ <span style="color: #c3e88d;">"root"</span> <span style="color: #c3e88d;">"@wheel"</span> ];
</pre>
</div>
</div>
</div>
<div id="outline-container-org04c8dfe" class="outline-3">
<h3 id="org04c8dfe"><span class="section-number-3">3.4</span> Enable lorri</h3>
<div class="outline-text-3" id="text-3-4">
<p>
lorri is a nix-shell replacement with fast direnv integration
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orge70f073"><span style="color: #ffcb6b;">services.lorri.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb6b1ffe" class="outline-3">
<h3 id="orgb6b1ffe"><span class="section-number-3">3.5</span> Integrate lorri direnv with fish shell</h3>
<div class="outline-text-3" id="text-3-5">
<p>
For direnv to work properly it needs to be hooked into the shell.
Once the hook is configured, restart your shell for direnv to be activated.
</p>
<div class="org-src-container">
<pre class="src src-fish" id="org71f5134"><span style="color: #89DDFF;">eval</span> (<span style="color: #82aaff;">direnv</span> hook <span style="color: #82aaff;">fish</span>)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org1587b53" class="outline-2">
<h2 id="org1587b53"><span class="section-number-2">4</span> Overlays</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org90767c0" class="outline-3">
<h3 id="org90767c0"><span class="section-number-3">4.1</span> Overrides</h3>
<div class="outline-text-3" id="text-4-1">
<p>
override nixpkgs packages. useful for home-manager modules.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
final: prev:
{
  <span style="color: #89DDFF;">inherit</span> (final.unstable) lua;
  <span style="color: #89DDFF;">inherit</span> (final.unstable) fish;
  <span style="color: #89DDFF;">inherit</span> (final.master) youtube-dl;
  <span style="color: #89DDFF;">inherit</span> (final.master) mpv;
  <span style="color: #89DDFF;">inherit</span> (final.unstable) fzf;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org33950ef" class="outline-3">
<h3 id="org33950ef"><span class="section-number-3">4.2</span> Custom packages</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Import custom packages into nixpkgs, so you can treat just like any other package.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
final: prev: <span style="color: #89DDFF;">rec</span> {
  <span style="color: #ffcb6b;">apple-color-emoji</span> = prev.callPackage <span style="color: #f78c6c;">../packages/apple-color-emoji</span> { };
  <span style="color: #ffcb6b;">tamzen-nerdfont</span> = prev.callPackage <span style="color: #f78c6c;">../packages/tamzen-nerdfont</span> { };
  <span style="color: #ffcb6b;">palenight-gtk-theme</span> = prev.callPackage <span style="color: #f78c6c;">../packages/palenight-gtk-theme</span> { };
  <span style="color: #ffcb6b;">vifmimg</span> = prev.callPackage <span style="color: #f78c6c;">../packages/vifmimg</span> { };
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd428421" class="outline-3">
<h3 id="orgd428421"><span class="section-number-3">4.3</span> Attribute overrides</h3>
<div class="outline-text-3" id="text-4-3">
</div>
<div id="outline-container-org4f67064" class="outline-4">
<h4 id="org4f67064"><span class="section-number-4">4.3.1</span> neofetch</h4>
<div class="outline-text-4" id="text-4-3-1">
<p>
Install latest neofetch with new NixOS logo
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
final: prev:
{
  <span style="color: #ffcb6b;">neofetch</span> = prev.neofetch.overrideAttrs (old: <span style="color: #89DDFF;">rec</span> {
    <span style="color: #ffcb6b;">version</span> = <span style="color: #c3e88d;">"unstable-2020-11-02"</span>;
    <span style="color: #ffcb6b;">src</span> = prev.fetchFromGitHub {
      <span style="color: #ffcb6b;">owner</span> = <span style="color: #c3e88d;">"dylanaraps"</span>;
      <span style="color: #ffcb6b;">repo</span> = <span style="color: #c3e88d;">"neofetch"</span>;
      <span style="color: #ffcb6b;">rev</span> = <span style="color: #c3e88d;">"5dfce0f9c3068d4d8a49d0b7182bdace61b8f4d0"</span>;
      <span style="color: #ffcb6b;">sha256</span> = <span style="color: #c3e88d;">"131r07wllkvrcgw0ndyf5avqpzqkym56ii0qck6qyjfa8ylx6s31"</span>;
    };
  });
}
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org09da106" class="outline-2">
<h2 id="org09da106"><span class="section-number-2">5</span> Input</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgb4292ec" class="outline-3">
<h3 id="orgb4292ec"><span class="section-number-3">5.1</span> Keyboard</h3>
<div class="outline-text-3" id="text-5-1">
</div>
<div id="outline-container-org6b2008f" class="outline-4">
<h4 id="org6b2008f"><span class="section-number-4">5.1.1</span> Xorg repeat rate</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
Default repeat rate is too slow. Change it
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgddb06a5"><span style="color: #ffcb6b;">services.xserver.autoRepeatDelay</span> = <span style="color: #f78c6c; font-weight: bold;">200</span>;
<span style="color: #ffcb6b;">services.xserver.autoRepeatInterval</span> = <span style="color: #f78c6c; font-weight: bold;">25</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb17045f" class="outline-4">
<h4 id="orgb17045f"><span class="section-number-4">5.1.2</span> Dvorak</h4>
<div class="outline-text-4" id="text-5-1-2">
<p>
I use Dvorak layout on HHKB.
Dvorak layout is a ergonomic alternative for qwerty layout that requires less movement.
My keybinds are configured with HHKB Dvorak usage in mind. I didn&rsquo;t remapped vim(or evil-mode) keys(hjkl) because it already feels natural as is.
</p>

<p>
Console config
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org1d4ba0e"><span style="color: #ffcb6b;">console.keyMap</span> = <span style="color: #c3e88d;">"dvorak"</span>;
</pre>
</div>

<p>
Xorg config
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org1587f89"><span style="color: #ffcb6b;">services.xserver.layout</span> = <span style="color: #c3e88d;">"us"</span>;
<span style="color: #ffcb6b;">services.xserver.xkbVariant</span> = <span style="color: #c3e88d;">"dvorak"</span>;
</pre>
</div>

<p>
home-manager config
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org850d4c1"><span style="color: #ffcb6b;">home.keyboard</span> = {
  <span style="color: #ffcb6b;">layout</span> = <span style="color: #c3e88d;">"us"</span>;
  <span style="color: #ffcb6b;">variant</span> = <span style="color: #c3e88d;">"dvorak"</span>;
};
</pre>
</div>
</div>
</div>
<div id="outline-container-orge84225b" class="outline-4">
<h4 id="orge84225b"><span class="section-number-4">5.1.3</span> IME</h4>
<div class="outline-text-4" id="text-5-1-3">
<p>
Install Japanese IME
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org25cf7db"><span style="color: #ffcb6b;">i18n.inputMethod.enabled</span> = <span style="color: #c3e88d;">"fcitx"</span>;
<span style="color: #ffcb6b;">i18n.inputMethod.fcitx.engines</span> = <span style="color: #89DDFF;">with</span> pkgs.fcitx-engines; [ mozc ];
</pre>
</div>
</div>
</div>
<div id="outline-container-orge90665b" class="outline-4">
<h4 id="orge90665b"><span class="section-number-4">5.1.4</span> Thinkpad</h4>
<div class="outline-text-4" id="text-5-1-4">
<p>
I can&rsquo;t live without HHKB-ish layout. I remap my ThinkPad layout:
</p>
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #c792ea;">xkb_keymap</span> {
 <span style="color: #c792ea;">xkb_keycodes</span> {
  include <span style="color: #c3e88d;">"evdev+aliases(qwerty)"</span>
  <span style="color: #ffcb6b;">&lt;ESC&gt;</span> = <span style="color: #f78c6c; font-weight: bold;">49</span>;
  <span style="color: #ffcb6b;">&lt;BKSP&gt;</span> = <span style="color: #f78c6c; font-weight: bold;">51</span>;
  <span style="color: #ffcb6b;">&lt;LCTL&gt;</span> = <span style="color: #f78c6c; font-weight: bold;">37</span>;
  <span style="color: #ffcb6b;">&lt;TLDE&gt;</span> = <span style="color: #f78c6c; font-weight: bold;">9</span>;
  <span style="color: #ffcb6b;">&lt;BKSL&gt;</span> = <span style="color: #f78c6c; font-weight: bold;">22</span>;
 };
 xkb_types { include <span style="color: #c3e88d;">"complete"</span>};
 xkb_compatibility { include <span style="color: #c3e88d;">"complete"</span>};
 xkb_symbols { include <span style="color: #c3e88d;">"pc+us(dvorak)+us(dvorak):2+inet(evdev)+altwin(swap_alt_win)+ctrl(nocaps)"</span> };
 xkb_geometry { include <span style="color: #c3e88d;">"pc(pc104)"</span>};
};
</pre>
</div>

<p>
Symlink it to /etc for convenience
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orga9f44c3">environment.etc.<span style="color: #c3e88d;">"thinkpadlayout.xkb"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/thinkpadlayout.xkb</span>;
</pre>
</div>

<p>
Make a systemd service to execute everytime after waking up from restart/sleep
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orge7195b8"><span style="color: #ffcb6b;">systemd.user.services.xkb-restore</span> = {
  <span style="color: #ffcb6b;">description</span> = <span style="color: #c3e88d;">"Restore keyboard layout after suspend"</span>;
  <span style="color: #ffcb6b;">after</span> = [ <span style="color: #c3e88d;">"suspend.target"</span> <span style="color: #c3e88d;">"graphical-session.target"</span> ];
  <span style="color: #ffcb6b;">serviceConfig</span> = {
    <span style="color: #ffcb6b;">Type</span> = <span style="color: #c3e88d;">"simple"</span>;
    <span style="color: #ffcb6b;">Environment</span> = <span style="color: #c3e88d;">"DISPLAY=:0"</span>;
    <span style="color: #ffcb6b;">ExecStartPre</span> = <span style="color: #c3e88d;">"/usr/bin/env sleep 3"</span>;
    <span style="color: #ffcb6b;">ExecStart</span> = <span style="color: #c3e88d;">"</span><span style="color: #89DDFF; font-weight: bold;">${</span>pkgs.bash<span style="color: #89DDFF; font-weight: bold;">}</span><span style="color: #c3e88d;">/bin/bash -c \"</span><span style="color: #89DDFF; font-weight: bold;">${</span>pkgs.xorg.xkbcomp<span style="color: #89DDFF; font-weight: bold;">}</span><span style="color: #c3e88d;">/bin/xkbcomp -i $(</span><span style="color: #89DDFF; font-weight: bold;">${</span>pkgs.xorg.xinput<span style="color: #89DDFF; font-weight: bold;">}</span><span style="color: #c3e88d;">/bin/xinput list | sed -n 's/.*Translated.*id=\\\([0-9]*\\\).*keyboard.*/\\\1/p') /etc/thinkpadlayout.xkb :0\""</span>;
  };
  <span style="color: #ffcb6b;">wantedBy</span> = [ <span style="color: #c3e88d;">"suspend.target"</span> <span style="color: #c3e88d;">"graphical-session.target"</span> ];
};
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgffdd5e3" class="outline-3">
<h3 id="orgffdd5e3"><span class="section-number-3">5.2</span> Trackpad</h3>
<div class="outline-text-3" id="text-5-2">
<p>
I use libinput because the better palm detection.
It&rsquo;s a minimal config because trackpad is mostly disabled.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  <span style="color: #ffcb6b;">services.xserver.libinput.enable</span> = <span style="color: #82aaff;">true</span>;
  <span style="color: #ffcb6b;">services.xserver.libinput.naturalScrolling</span> = <span style="color: #82aaff;">true</span>;
  <span style="color: #ffcb6b;">services.xserver.libinput.disableWhileTyping</span> = <span style="color: #82aaff;">true</span>;
  <span style="color: #ffcb6b;">services.xserver.libinput.accelSpeed</span> = <span style="color: #c3e88d;">"1.000000"</span>;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org0c2c10d" class="outline-3">
<h3 id="org0c2c10d"><span class="section-number-3">5.3</span> keynav</h3>
<div class="outline-text-3" id="text-5-3">
<p>
keynav is a program that allows you to control the mouse with keyboard in a very efficient way.
One of the big reasons I can live mostly without mouse
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org96e716f"><span style="color: #ffcb6b;">services.keynav.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>

<p>
Generate keynav config.
Super-semicolon to start keynav
s to warp cursor
m,w,v,z to scroll, think like hjkl on QWERTY keyboard. it&rsquo;s positioned on bottom right of Dvorak layout
</p>
<div class="org-src-container">
<pre class="src src-conf" id="orge3b4f01"><span style="color: #c3e88d;">"keynav/keynavrc"</span>.text = <span style="color: #c3e88d;">''</span>
  super+semicolon start
  s warp
  m click <span style="color: #f78c6c; font-weight: bold;">6</span>
  w click <span style="color: #f78c6c; font-weight: bold;">5</span>
  v click <span style="color: #f78c6c; font-weight: bold;">4</span>
  z click <span style="color: #f78c6c; font-weight: bold;">7</span>
<span style="color: #c3e88d;">''</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd229410" class="outline-2">
<h2 id="orgd229410"><span class="section-number-2">6</span> Output</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orgcd97d42" class="outline-3">
<h3 id="orgcd97d42"><span class="section-number-3">6.1</span> Monitor</h3>
<div class="outline-text-3" id="text-6-1">
</div>
<div id="outline-container-orgc6e3e03" class="outline-4">
<h4 id="orgc6e3e03"><span class="section-number-4">6.1.1</span> Brightness</h4>
<div class="outline-text-4" id="text-6-1-1">
<p>
We need these kernel parameters to be able to control display brightness on ThinkPad
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org48ef365"><span style="color: #c3e88d;">"acpi_osi='!Windows 2012'"</span>
<span style="color: #c3e88d;">"acpi_backlight=vendor"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org43a2653" class="outline-4">
<h4 id="org43a2653"><span class="section-number-4">6.1.2</span> Resolution</h4>
<div class="outline-text-4" id="text-6-1-2">
<p>
Scale desktop monitor to 1440p
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org6c9b925"><span style="color: #ffcb6b;">xsession.profileExtra</span> = <span style="color: #c3e88d;">"xrandr --output DVI-D-0 --scale-from 2560x1440 --panning 2560x1440"</span>;
</pre>
</div>
<p>
Scale laptop monitor to 1080p
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org1b07b94"><span style="color: #ffcb6b;">xsession.profileExtra</span> = <span style="color: #c3e88d;">"xrandr --output LVDS1 --scale-from 1920x1080 --panning 1920x1080"</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge7f9a0a" class="outline-3">
<h3 id="orge7f9a0a"><span class="section-number-3">6.2</span> Sound</h3>
<div class="outline-text-3" id="text-6-2">
</div>
<div id="outline-container-org39fe2fd" class="outline-4">
<h4 id="org39fe2fd"><span class="section-number-4">6.2.1</span> Enable sound</h4>
<div class="outline-text-4" id="text-6-2-1">
<p>
Enable ALSA sound in configuration.nix
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org7ba5350"><span style="color: #ffcb6b;">sound.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgda81238" class="outline-4">
<h4 id="orgda81238"><span class="section-number-4">6.2.2</span> PulseAudio</h4>
<div class="outline-text-4" id="text-6-2-2">
<p>
PulseAudio is a general purpose sound server intended to run as a middleware between your applications and your hardware devices, either using ALSA or OSS.
It&rsquo;s required by many programs to play sound nowadays.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:
{
  &lt;<span style="color: #f78c6c;">&lt;pulseaudio-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;pulseaudio-package&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;pulseaudio-support-32bit&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;pulseaudio-extramodules&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;pulseaudio-daemon-config&gt;</span>&gt;
}
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="org60852ff"></a>Enable PulseAudio<br />
<div class="outline-text-5" id="text-6-2-2-1">
<p>
Whether to enable the PulseAudio sound server.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org6305116"><span style="color: #ffcb6b;">hardware.pulseaudio.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</li>
<li><a id="org3e456f0"></a>PulseAudio 32bit support<br />
<div class="outline-text-5" id="text-6-2-2-2">
<p>
Include 32-bit pulseaudio libraries in the system. It&rsquo;s needed by certain programs(like wine 32bit, mainly used for games)
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgd423deb"><span style="color: #ffcb6b;">hardware.pulseaudio.support32Bit</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</li>
<li><a id="org3d829ac"></a>PulseAudio package<br />
<div class="outline-text-5" id="text-6-2-2-3">
<p>
Select the PulseAudio derivation to use. This can be used to enable features (such as JACK support, Bluetooth) via the pulseaudioFull package
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org61dae5e"><span style="color: #ffcb6b;">hardware.pulseaudio.package</span> = pkgs.pulseaudioFull;
</pre>
</div>
</div>
</li>
<li><a id="org2a4a0b7"></a>PulseAudio extra modules<br />
<div class="outline-text-5" id="text-6-2-2-4">
<p>
Extra PulseAudio modules to use. This is intended for out-of-tree pulseaudio modules like extra bluetooth codecs.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orge506189"><span style="color: #ffcb6b;">hardware.pulseaudio.extraModules</span> = [ pkgs.pulseaudio-modules-bt ];
</pre>
</div>
</div>
</li>
<li><a id="org7ad6ded"></a>PulseAudio daemon config<br />
<div class="outline-text-5" id="text-6-2-2-5">
<p>
idk, this config is supposed to improve audio quality
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org5aafd6c"><span style="color: #ffcb6b;">hardware.pulseaudio.daemon.config</span> = {
    <span style="color: #ffcb6b;">default-sample-rate</span> = <span style="color: #c3e88d;">"48000"</span>;
    <span style="color: #ffcb6b;">alternate-sample-rate</span> = <span style="color: #c3e88d;">"44100"</span>;
    <span style="color: #ffcb6b;">default-sample-channels</span> = <span style="color: #c3e88d;">"2"</span>;
    <span style="color: #ffcb6b;">default-channel-map</span> = <span style="color: #c3e88d;">"front-left,front-right"</span>;
    <span style="color: #ffcb6b;">default-fragments</span> = <span style="color: #c3e88d;">"2"</span>;
    <span style="color: #ffcb6b;">default-fragment-size-msec</span> = <span style="color: #c3e88d;">"125"</span>;
    <span style="color: #ffcb6b;">enable-lfe-remixing</span> = <span style="color: #c3e88d;">"no"</span>;
    <span style="color: #ffcb6b;">high-priority</span> = <span style="color: #c3e88d;">"yes"</span>;
    <span style="color: #ffcb6b;">nice-level</span> = <span style="color: #c3e88d;">"-11"</span>;
    <span style="color: #ffcb6b;">realtime-scheduling</span> = <span style="color: #c3e88d;">"yes"</span>;
    <span style="color: #ffcb6b;">realtime-priority</span> = <span style="color: #c3e88d;">"9"</span>;
    <span style="color: #ffcb6b;">rlimit-rtprio</span> = <span style="color: #c3e88d;">"9"</span>;
    <span style="color: #ffcb6b;">resample-method</span> = <span style="color: #c3e88d;">"soxr-vhq"</span>;
    <span style="color: #ffcb6b;">daemonize</span> = <span style="color: #c3e88d;">"no"</span>;
    <span style="color: #ffcb6b;">default-sample-format</span> = <span style="color: #c3e88d;">"float32le"</span>;
};
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgec33a08" class="outline-2">
<h2 id="orgec33a08"><span class="section-number-2">7</span> Other Hardwares</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org2c9de5a" class="outline-3">
<h3 id="org2c9de5a"><span class="section-number-3">7.1</span> Bluetooth</h3>
<div class="outline-text-3" id="text-7-1">
<p>
This module configures bluetooth for all machines.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:
{
  &lt;<span style="color: #f78c6c;">&lt;bluetooth-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;bluetooth-package&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;bluetooth-config&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-orgc7d02cb" class="outline-4">
<h4 id="orgc7d02cb"><span class="section-number-4">7.1.1</span> Enable Bluetooth</h4>
<div class="outline-text-4" id="text-7-1-1">
<div class="org-src-container">
<pre class="src src-nix" id="orga4a7afd"><span style="color: #ffcb6b;">hardware.bluetooth.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org36f2d22" class="outline-4">
<h4 id="org36f2d22"><span class="section-number-4">7.1.2</span> Bluetooth package</h4>
<div class="outline-text-4" id="text-7-1-2">
<p>
bluezFull enables all bluez plugins. It&rsquo;s needed for many devices.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org1bfb97c"><span style="color: #ffcb6b;">hardware.bluetooth.package</span> = pkgs.bluezFull;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc04a559" class="outline-4">
<h4 id="orgc04a559"><span class="section-number-4">7.1.3</span> Bluetooth config</h4>
<div class="outline-text-4" id="text-7-1-3">
<p>
Setting controller mode to <code>"bredr"</code> (disabling Bluetooth LE) is a workaround to fix airpods.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgcb6c150"><span style="color: #ffcb6b;">hardware.bluetooth.config</span> = {
    <span style="color: #ffcb6b;">General</span> = {
        <span style="color: #ffcb6b;">ControllerMode</span> = <span style="color: #c3e88d;">"bredr"</span>;
    };
};
</pre>
</div>
</div>
</div>
<div id="outline-container-org86f3256" class="outline-4">
<h4 id="org86f3256"><span class="section-number-4">7.1.4</span> Enable blueman</h4>
<div class="outline-text-4" id="text-7-1-4">
<p>
Blueman is a bluetooth manager written in GTK
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  <span style="color: #ffcb6b;">services.blueman.enable</span> = <span style="color: #82aaff;">true</span>;
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orga380c3c" class="outline-3">
<h3 id="orga380c3c"><span class="section-number-3">7.2</span> TLP</h3>
<div class="outline-text-3" id="text-7-2">
<p>
TLP is a feature-rich command line utility for Linux, saving laptop battery power without the need to delve deeper into technical details.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
    &lt;<span style="color: #f78c6c;">&lt;tlp-enable&gt;</span>&gt;
    &lt;<span style="color: #f78c6c;">&lt;tlp-settings&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-org6074e1c" class="outline-4">
<h4 id="org6074e1c"><span class="section-number-4">7.2.1</span> Enable TLP</h4>
<div class="outline-text-4" id="text-7-2-1">
<div class="org-src-container">
<pre class="src src-nix" id="orgd0de74f"><span style="color: #ffcb6b;">services.tlp.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbb9e515" class="outline-4">
<h4 id="orgbb9e515"><span class="section-number-4">7.2.2</span> TLP settings</h4>
<div class="outline-text-4" id="text-7-2-2">
<div class="org-src-container">
<pre class="src src-nix" id="org25ca7ab"><span style="color: #ffcb6b;">services.tlp.settings</span> = {
  <span style="color: #c3e88d;">"SOUND_POWER_SAVE_ON_AC"</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
  <span style="color: #c3e88d;">"SOUND_POWER_SAVE_ON_BAT"</span> = <span style="color: #f78c6c; font-weight: bold;">1</span>;
  <span style="color: #c3e88d;">"SOUND_POWER_SAVE_CONTROLLER"</span> = <span style="color: #c3e88d;">"Y"</span>;
  <span style="color: #c3e88d;">"BAY_POWEROFF_ON_AC"</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
  <span style="color: #c3e88d;">"BAY_POWEROFF_ON_BAT"</span> = <span style="color: #f78c6c; font-weight: bold;">1</span>;
  <span style="color: #c3e88d;">"DISK_APM_LEVEL_ON_AC"</span> = <span style="color: #c3e88d;">"254 254"</span>;
  <span style="color: #c3e88d;">"DISK_APM_LEVEL_ON_BAT"</span> = <span style="color: #c3e88d;">"128 128"</span>;
  <span style="color: #c3e88d;">"DISK_IOSCHED"</span> = <span style="color: #c3e88d;">"none none"</span>;
  <span style="color: #c3e88d;">"SATA_LINKPWR_ON_AC"</span> = <span style="color: #c3e88d;">"med_power_with_dipm max_performance"</span>;
  <span style="color: #c3e88d;">"SATA_LINKPWR_ON_BAT"</span> = <span style="color: #c3e88d;">"min_power"</span>;
  <span style="color: #c3e88d;">"MAX_LOST_WORK_SECS_ON_AC"</span> = <span style="color: #f78c6c; font-weight: bold;">15</span>;
  <span style="color: #c3e88d;">"MAX_LOST_WORK_SECS_ON_BAT"</span> = <span style="color: #f78c6c; font-weight: bold;">60</span>;
  <span style="color: #c3e88d;">"NMI_WATCHDOG"</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
  <span style="color: #c3e88d;">"WIFI_PWR_ON_AC"</span> = <span style="color: #c3e88d;">"off"</span>;
  <span style="color: #c3e88d;">"WIFI_PWR_ON_BAT"</span> = <span style="color: #c3e88d;">"on"</span>;
  <span style="color: #c3e88d;">"WOL_DISABLE"</span> = <span style="color: #c3e88d;">"Y"</span>;
  <span style="color: #c3e88d;">"CPU_SCALING_GOVERNOR_ON_AC"</span> = <span style="color: #c3e88d;">"powersave"</span>;
  <span style="color: #c3e88d;">"CPU_SCALING_GOVERNOR_ON_BAT"</span> = <span style="color: #c3e88d;">"powersave"</span>;
  <span style="color: #c3e88d;">"CPU_MIN_PERF_ON_AC"</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
  <span style="color: #c3e88d;">"CPU_MAX_PERF_ON_AC"</span> = <span style="color: #f78c6c; font-weight: bold;">100</span>;
  <span style="color: #c3e88d;">"CPU_MIN_PERF_ON_BAT"</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
  <span style="color: #c3e88d;">"CPU_MAX_PERF_ON_BAT"</span> = <span style="color: #f78c6c; font-weight: bold;">50</span>;
  <span style="color: #c3e88d;">"CPU_BOOST_ON_AC"</span> = <span style="color: #f78c6c; font-weight: bold;">1</span>;
  <span style="color: #c3e88d;">"CPU_BOOST_ON_BAT"</span> = <span style="color: #f78c6c; font-weight: bold;">1</span>;
  <span style="color: #c3e88d;">"SCHED_POWERSAVE_ON_AC"</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
  <span style="color: #c3e88d;">"SCHED_POWERSAVE_ON_BAT"</span> = <span style="color: #f78c6c; font-weight: bold;">1</span>;
  <span style="color: #c3e88d;">"ENERGY_PERF_POLICY_ON_AC"</span> = <span style="color: #c3e88d;">"performance"</span>;
  <span style="color: #c3e88d;">"ENERGY_PERF_POLICY_ON_BAT"</span> = <span style="color: #c3e88d;">"power"</span>;
  <span style="color: #c3e88d;">"RESTORE_DEVICE_STATE_ON_STARTUP"</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
  <span style="color: #c3e88d;">"RUNTIME_PM_ON_AC"</span> = <span style="color: #c3e88d;">"on"</span>;
  <span style="color: #c3e88d;">"RUNTIME_PM_ON_BAT"</span> = <span style="color: #c3e88d;">"auto"</span>;
  <span style="color: #c3e88d;">"PCIE_ASPM_ON_AC"</span> = <span style="color: #c3e88d;">"default"</span>;
  <span style="color: #c3e88d;">"PCIE_ASPM_ON_BAT"</span> = <span style="color: #c3e88d;">"powersupersave"</span>;
  <span style="color: #c3e88d;">"USB_AUTOSUSPEND"</span> = <span style="color: #f78c6c; font-weight: bold;">1</span>;
};
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org2c754b6" class="outline-3">
<h3 id="org2c754b6"><span class="section-number-3">7.3</span> Thinkfan</h3>
<div class="outline-text-3" id="text-7-3">
<p>
Thinkfan is a simple, lightweight fan controler for IBM/Lenovo ThinkPads
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  &lt;<span style="color: #f78c6c;">&lt;thinkfan-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;thinkfan-fan&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;thinkfan-sensors&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;thinkfan-levels&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-org75caa57" class="outline-4">
<h4 id="org75caa57"><span class="section-number-4">7.3.1</span> Enable Thinkfan</h4>
<div class="outline-text-4" id="text-7-3-1">
<div class="org-src-container">
<pre class="src src-nix" id="org119c511"><span style="color: #ffcb6b;">services.thinkfan.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org4b8757f" class="outline-4">
<h4 id="org4b8757f"><span class="section-number-4">7.3.2</span> Select Fan</h4>
<div class="outline-text-4" id="text-7-3-2">
<p>
Specify the fan to use.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgc5aebe5"><span style="color: #ffcb6b;">services.thinkfan.fan</span> = <span style="color: #c3e88d;">"tp_fan /proc/acpi/ibm/fan"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org55d3b76" class="outline-4">
<h4 id="org55d3b76"><span class="section-number-4">7.3.3</span> Select sensors</h4>
<div class="outline-text-4" id="text-7-3-3">
<p>
thinkfan can read temperatures from three possible sources:
<code>/proc/acpi/ibm/thermal</code> which is provided by thinkpad<sub>acpi</sub> kernel module
<code>/sys/class/humon/*/temp*_input</code> which may be provided by any humon drivers
S.M.A.R.T. which reads the temperature directly from the hard drive using libatasmart
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org42311ae"><span style="color: #ffcb6b;">services.thinkfan.sensors</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">    hwmon /sys/class/thermal/thermal_zone0/temp</span>
<span style="color: #c3e88d;">''</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org9d9f3ab" class="outline-4">
<h4 id="org9d9f3ab"><span class="section-number-4">7.3.4</span> Levels</h4>
<div class="outline-text-4" id="text-7-3-4">
<p>
Configure fan speed
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org0ea503a"><span style="color: #ffcb6b;">services.thinkfan.levels</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">(0, 0,  42)</span>
<span style="color: #c3e88d;">(1, 40, 47)</span>
<span style="color: #c3e88d;">(2, 45, 52)</span>
<span style="color: #c3e88d;">(3, 50, 57)</span>
<span style="color: #c3e88d;">(4, 55, 62)</span>
<span style="color: #c3e88d;">(5, 60, 72)</span>
<span style="color: #c3e88d;">(6, 65, 77)</span>
<span style="color: #c3e88d;">(7, 70, 80)</span>
<span style="color: #c3e88d;">(127, 75, 32767)</span>
<span style="color: #c3e88d;">''</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org352c2bc" class="outline-3">
<h3 id="org352c2bc"><span class="section-number-3">7.4</span> ZRAM</h3>
<div class="outline-text-3" id="text-7-4">
<p>
ZRAM is a linux kernel module that creates in-memory compressed devices and swap space. Literally download more RAM
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  &lt;<span style="color: #f78c6c;">&lt;zram-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;zram-algorithm&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;zram-memory-percent&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-orgcacb3a4" class="outline-4">
<h4 id="orgcacb3a4"><span class="section-number-4">7.4.1</span> Enable ZRAM</h4>
<div class="outline-text-4" id="text-7-4-1">
<div class="org-src-container">
<pre class="src src-nix" id="orgd2dd3d6"><span style="color: #ffcb6b;">zramSwap.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org291a919" class="outline-4">
<h4 id="org291a919"><span class="section-number-4">7.4.2</span> ZRAM algorithm</h4>
<div class="outline-text-4" id="text-7-4-2">
<p>
Compression algorithm. lzo has good compression, but is slow. lz4 has bad compression, but is fast.
zstd is both good compression and fast, but requires newer kernel.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org522895c"><span style="color: #ffcb6b;">zramSwap.algorithm</span> = <span style="color: #c3e88d;">"zstd"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org66b32d4" class="outline-4">
<h4 id="org66b32d4"><span class="section-number-4">7.4.3</span> ZRAM memory percent</h4>
<div class="outline-text-4" id="text-7-4-3">
<p>
Maximum amount of memory that can be used by the zram swap devices.
Defaults to 1/2 of total RAM.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgca9342e"><span style="color: #ffcb6b;">zramSwap.memoryPercent</span> = <span style="color: #f78c6c; font-weight: bold;">100</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org36983f2" class="outline-3">
<h3 id="org36983f2"><span class="section-number-3">7.5</span> SSD</h3>
<div class="outline-text-3" id="text-7-5">
<p>
Enable SSD trim and set better filesystem mounting options
Make sure to only import for SSD devices.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  <span style="color: #ffcb6b;">services.fstrim.enable</span> = <span style="color: #82aaff;">true</span>;
  fileSystems.<span style="color: #c3e88d;">"/"</span>.<span style="color: #ffcb6b;">options</span> = [ <span style="color: #c3e88d;">"noatime"</span> <span style="color: #c3e88d;">"nodiratime"</span> <span style="color: #c3e88d;">"discard"</span> ];
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org2f73df1" class="outline-3">
<h3 id="org2f73df1"><span class="section-number-3">7.6</span> Early oom</h3>
<div class="outline-text-3" id="text-7-6">
<p>
Enable early out of memory killing
This is useful to prevent hang for example, when compiling
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  <span style="color: #ffcb6b;">services.earlyoom.enable</span> = <span style="color: #82aaff;">true</span>;
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orga6438e4" class="outline-2">
<h2 id="orga6438e4"><span class="section-number-2">8</span> Look And Feel</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-orgb6d116c" class="outline-3">
<h3 id="orgb6d116c"><span class="section-number-3">8.1</span> Color Scheme/Themes</h3>
<div class="outline-text-3" id="text-8-1">
<p>
I use material-palenight as colorscheme for everything from editor to browser.
</p>
</div>
<div id="outline-container-org76abce2" class="outline-4">
<h4 id="org76abce2"><span class="section-number-4">8.1.1</span> Color palette preview</h4>
<div class="outline-text-4" id="text-8-1-1">
<p width="600">
<img src="pictures/material-palenight-palette.png" alt="material-palenight-palette.png" width="600" />
Color palette picture taken from <a href="https://www.material-theme.com/docs/reference/color-palette/">here</a>
</p>
</div>
</div>
<div id="outline-container-org68e85e0" class="outline-4">
<h4 id="org68e85e0"><span class="section-number-4">8.1.2</span> TTY Colors</h4>
<div class="outline-text-4" id="text-8-1-2">
<p>
The 16 colors palette used by TTY.
Leave empty to use the default colors.
Colors must be in hexademical format and listed in order from color 0 to color 15.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgd9025cc"><span style="color: #ffcb6b;">console.colors</span> = [ <span style="color: #c3e88d;">"434759"</span> <span style="color: #c3e88d;">"f07178"</span> <span style="color: #c3e88d;">"c3e88d"</span> <span style="color: #c3e88d;">"ffcb6b"</span> <span style="color: #c3e88d;">"82aaff"</span> <span style="color: #c3e88d;">"c792ea"</span> <span style="color: #c3e88d;">"89ddff"</span> <span style="color: #c3e88d;">"d0d0d0"</span> <span style="color: #c3e88d;">"434758"</span> <span style="color: #c3e88d;">"ff8b92"</span> <span style="color: #c3e88d;">"ddffa7"</span> <span style="color: #c3e88d;">"ffe585"</span> <span style="color: #c3e88d;">"9cc4ff"</span> <span style="color: #c3e88d;">"e1acff"</span> <span style="color: #c3e88d;">"a3f7ff"</span> <span style="color: #c3e88d;">"fefefe"</span> ];
</pre>
</div>
</div>
</div>

<div id="outline-container-org804a45b" class="outline-4">
<h4 id="org804a45b"><span class="section-number-4">8.1.3</span> Emacs theme</h4>
<div class="outline-text-4" id="text-8-1-3">
<p>
I use doom-palenight theme from <a href="https://github.com/hlissner/emacs-doom-themes">here</a>
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org8134f7a"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">doom-theme</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">doom-palenight</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Choose colored treemacs(side bar file tree) theme
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgc907877"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">doom-themes-treemacs-theme</span> <span style="color: #c3e88d;">"doom-colors"</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfdfbb92" class="outline-4">
<h4 id="orgfdfbb92"><span class="section-number-4">8.1.4</span> Alacritty Colors</h4>
<div class="outline-text-4" id="text-8-1-4">
<p>
Color codes taken from <a href="https://github.com/aaron-williamson/base16-alacritty/blob/master/colors/base16-material-palenight-256.yml">here</a>
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orge1e157b"><span style="color: #ffcb6b;">programs.alacritty.settings.colors</span> = {
  <span style="color: #676E95;"># Default colors</span>
  <span style="color: #ffcb6b;">primary</span> = {
    <span style="color: #ffcb6b;">background</span> = <span style="color: #c3e88d;">"0x292d3e"</span>;
    <span style="color: #ffcb6b;">foreground</span> = <span style="color: #c3e88d;">"0x959dcb"</span>;
  };
  <span style="color: #ffcb6b;">cursor</span> = {
    <span style="color: #ffcb6b;">text</span> = <span style="color: #c3e88d;">"0x202331"</span>;
    <span style="color: #ffcb6b;">cursor</span> = <span style="color: #c3e88d;">"0xc792ea"</span>;
  };
  <span style="color: #676E95;"># Normal colors</span>
  <span style="color: #ffcb6b;">normal</span> = {
    <span style="color: #ffcb6b;">black</span> = <span style="color: #c3e88d;">"0x292d3e"</span>;
    <span style="color: #ffcb6b;">red</span> = <span style="color: #c3e88d;">"0xf07178"</span>;
    <span style="color: #ffcb6b;">green</span> = <span style="color: #c3e88d;">"0xc3e88d"</span>;
    <span style="color: #ffcb6b;">yellow</span> = <span style="color: #c3e88d;">"0xffcb6b"</span>;
    <span style="color: #ffcb6b;">blue</span> = <span style="color: #c3e88d;">"0x82aaff"</span>;
    <span style="color: #ffcb6b;">magenta</span> = <span style="color: #c3e88d;">"0xc792ea"</span>;
    <span style="color: #ffcb6b;">cyan</span> = <span style="color: #c3e88d;">"0x89ddff"</span>;
    <span style="color: #ffcb6b;">white</span> = <span style="color: #c3e88d;">"0x959dcb"</span>;
  };
  <span style="color: #676E95;"># Bright colors</span>
  <span style="color: #ffcb6b;">bright</span> = {
    <span style="color: #ffcb6b;">black</span> = <span style="color: #c3e88d;">"0x676e95"</span>;
    <span style="color: #ffcb6b;">red</span> = <span style="color: #c3e88d;">"0xf07178"</span>;
    <span style="color: #ffcb6b;">green</span> = <span style="color: #c3e88d;">"0xc3e88d"</span>;
    <span style="color: #ffcb6b;">yellow</span> = <span style="color: #c3e88d;">"0xffcb6b"</span>;
    <span style="color: #ffcb6b;">blue</span> = <span style="color: #c3e88d;">"0x82aaff"</span>;
    <span style="color: #ffcb6b;">magenta</span> = <span style="color: #c3e88d;">"0xc792ea"</span>;
    <span style="color: #ffcb6b;">cyan</span> = <span style="color: #c3e88d;">"0x89ddff"</span>;
    <span style="color: #ffcb6b;">white</span> = <span style="color: #c3e88d;">"0xffffff"</span>;
  };
  <span style="color: #ffcb6b;">indexed_colors</span> = [
    {
      <span style="color: #ffcb6b;">index</span> = <span style="color: #f78c6c; font-weight: bold;">16</span>;
      <span style="color: #ffcb6b;">color</span> = <span style="color: #c3e88d;">"0xf78c6c"</span>;
    }
    {
      <span style="color: #ffcb6b;">index</span> = <span style="color: #f78c6c; font-weight: bold;">17</span>;
      <span style="color: #ffcb6b;">color</span> = <span style="color: #c3e88d;">"0xff5370"</span>;
    }
    {
      <span style="color: #ffcb6b;">index</span> = <span style="color: #f78c6c; font-weight: bold;">18</span>;
      <span style="color: #ffcb6b;">color</span> = <span style="color: #c3e88d;">"0x444267"</span>;
    }
    {
      <span style="color: #ffcb6b;">index</span> = <span style="color: #f78c6c; font-weight: bold;">19</span>;
      <span style="color: #ffcb6b;">color</span> = <span style="color: #c3e88d;">"0x32374d"</span>;
    }
    {
      <span style="color: #ffcb6b;">index</span> = <span style="color: #f78c6c; font-weight: bold;">20</span>;
      <span style="color: #ffcb6b;">color</span> = <span style="color: #c3e88d;">"0x8796b0"</span>;
    }
    {
      <span style="color: #ffcb6b;">index</span> = <span style="color: #f78c6c; font-weight: bold;">21</span>;
      <span style="color: #ffcb6b;">color</span> = <span style="color: #c3e88d;">"0x959dcb"</span>;
    }
  ];
};
</pre>
</div>
</div>
</div>
<div id="outline-container-org8cd5162" class="outline-4">
<h4 id="org8cd5162"><span class="section-number-4">8.1.5</span> xmonad prompt color</h4>
<div class="outline-text-4" id="text-8-1-5">
<p>
Set xmonad prompt default bg/fg color, bg/fg when highlighted, and border color
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org72ef049">, bgColor           <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #232635;">#232635</span><span style="color: #c3e88d;">"</span>
, fgColor           <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #A6ACCD;">#A6ACCD</span><span style="color: #c3e88d;">"</span>
, bgHLight          <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #444267;">#444267</span><span style="color: #c3e88d;">"</span>
, fgHLight          <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #A6ACCD;">#A6ACCD</span><span style="color: #c3e88d;">"</span>
, borderColor       <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #2b2a3e;">#2b2a3e</span><span style="color: #c3e88d;">"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org61dd032" class="outline-4">
<h4 id="org61dd032"><span class="section-number-4">8.1.6</span> LightDM Colors</h4>
<div class="outline-text-4" id="text-8-1-6">
<p>
Configure center dialog colors
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org977e1c1"><span style="color: #ffcb6b;">text-color</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #A6ACCD;">#A6ACCD</span><span style="color: #c3e88d;">"</span>
<span style="color: #ffcb6b;">error-color</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #F07178;">#F07178</span><span style="color: #c3e88d;">"</span>
<span style="color: #ffcb6b;">window-color</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #202331;">#202331</span><span style="color: #c3e88d;">"</span>
<span style="color: #ffcb6b;">border-color</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #202331;">#202331</span><span style="color: #c3e88d;">"</span>
<span style="color: #ffcb6b;">password-color</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #A6ACCD;">#A6ACCD</span><span style="color: #c3e88d;">"</span>
<span style="color: #ffcb6b;">password-background-color</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #202331;">#202331</span><span style="color: #c3e88d;">"</span>
<span style="color: #ffcb6b;">password-border-color</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #202331;">#202331</span><span style="color: #c3e88d;">"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org5edb37e" class="outline-4">
<h4 id="org5edb37e"><span class="section-number-4">8.1.7</span> Notification Colors</h4>
<div class="outline-text-4" id="text-8-1-7">
<div class="org-src-container">
<pre class="src src-nix" id="orga2f1c4a"><span style="color: #ffcb6b;">services.dunst.settings.global</span> = {
    <span style="color: #ffcb6b;">frame_color</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">separator_color</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
};
<span style="color: #ffcb6b;">services.dunst.settings.urgency_low</span> = {
    <span style="color: #ffcb6b;">background</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #444267;">#444267</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">foreground</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #676E95;">#676E95</span><span style="color: #c3e88d;">"</span>;
};
<span style="color: #ffcb6b;">services.dunst.settings.urgency_normal</span> = {
    <span style="color: #ffcb6b;">background</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #32374D;">#32374D</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">foreground</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
};
<span style="color: #ffcb6b;">services.dunst.settings.urgency_critical</span> = {
    <span style="color: #ffcb6b;">background</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #F07178;">#F07178</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">foreground</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
};
</pre>
</div>
</div>
</div>
<div id="outline-container-org35794ad" class="outline-4">
<h4 id="org35794ad"><span class="section-number-4">8.1.8</span> qutebrowser Colors</h4>
<div class="outline-text-4" id="text-8-1-8">
<p>
Enable darkmode
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org32cc7cf"><span style="color: #ffcb6b;">programs.qutebrowser.settings.colors.webpage.darkmode.enabled</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>

<p>
Colors from base16-qutebrowser (<a href="https://github.com/theova/base16-qutebrowser">https://github.com/theova/base16-qutebrowser</a>)
Base16 qutebrowser template by theova
Material Palenight scheme by Nate Peterson
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgf8ddd39"><span style="color: #ffcb6b;">programs.qutebrowser.settings.colors</span> = {
  <span style="color: #ffcb6b;">completion</span> = {
    <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">odd.bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">even.bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">category</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #FFCB6B;">#FFCB6B</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">border.top</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">border.bottom</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">item</span> = {
      <span style="color: #ffcb6b;">selected.fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #444267;">#444267</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">selected.bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #FFCB6B;">#FFCB6B</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">selected.border.top</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #FFCB6B;">#FFCB6B</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">selected.border.bottom</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #FFCB6B;">#FFCB6B</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">selected.match.fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #F07178;">#F07178</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">match.fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #C3E88D;">#C3E88D</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">scrollbar</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    };
  };
  <span style="color: #ffcb6b;">contextmenu</span> = {
    <span style="color: #ffcb6b;">menu</span> = {
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">selected</span> = {
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #FFCB6B;">#FFCB6B</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #444267;">#444267</span><span style="color: #c3e88d;">"</span>;
    };
  };
  <span style="color: #ffcb6b;">downloads</span> = {
    <span style="color: #ffcb6b;">bar.bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">start</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #82AAFF;">#82AAFF</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">stop</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #89DDFF;">#89DDFF</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">error.fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #F07178;">#F07178</span><span style="color: #c3e88d;">"</span>;
  };
  <span style="color: #ffcb6b;">hints</span> = {
    <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #FFCB6B;">#FFCB6B</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">match.fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
  };
  <span style="color: #ffcb6b;">keyhint</span> = {
    <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">suffix.fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
  };
  <span style="color: #ffcb6b;">messages</span> = {
    <span style="color: #ffcb6b;">error</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #F07178;">#F07178</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">border</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #F07178;">#F07178</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">warning</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #C792EA;">#C792EA</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">border</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #C792EA;">#C792EA</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">info</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">border</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    };
  };
  <span style="color: #ffcb6b;">prompts</span> = {
    <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">border</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">selected.bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #FFCB6B;">#FFCB6B</span><span style="color: #c3e88d;">"</span>;
  };
  <span style="color: #ffcb6b;">statusbar</span> = {
    <span style="color: #ffcb6b;">normal</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #C3E88D;">#C3E88D</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">insert</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #82AAFF;">#82AAFF</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">passthrough</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #89DDFF;">#89DDFF</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">private</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #676E95;">#676E95</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">command</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">private</span> = {
        <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
        <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      };
    };
    <span style="color: #ffcb6b;">caret</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #C792EA;">#C792EA</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">selection</span> = {
        <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
        <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #82AAFF;">#82AAFF</span><span style="color: #c3e88d;">"</span>;
      };
    };
    <span style="color: #ffcb6b;">progress.bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #82AAFF;">#82AAFF</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">url</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">error.fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #F07178;">#F07178</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">hover.fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">success</span> = {
        <span style="color: #ffcb6b;">http.fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #89DDFF;">#89DDFF</span><span style="color: #c3e88d;">"</span>;
        <span style="color: #ffcb6b;">https.fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #C3E88D;">#C3E88D</span><span style="color: #c3e88d;">"</span>;
      };
      <span style="color: #ffcb6b;">warn.fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #C792EA;">#C792EA</span><span style="color: #c3e88d;">"</span>;
    };
  };
  <span style="color: #ffcb6b;">tabs</span> = {
    <span style="color: #ffcb6b;">bar.bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    <span style="color: #ffcb6b;">indicator</span> = {
      <span style="color: #ffcb6b;">start</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #82AAFF;">#82AAFF</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">stop</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #89DDFF;">#89DDFF</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">error</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #F07178;">#F07178</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">odd</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">even</span> = {
      <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
      <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
    };
    <span style="color: #ffcb6b;">pinned</span> = {
      <span style="color: #ffcb6b;">even</span> = {
        <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
        <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
      };
      <span style="color: #ffcb6b;">odd</span> = {
        <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
        <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
      };
      <span style="color: #ffcb6b;">selected</span> = {
        <span style="color: #ffcb6b;">even</span> = {
          <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
          <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
        };
        <span style="color: #ffcb6b;">odd</span> = {
          <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
          <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
        };
      };
    };
    <span style="color: #ffcb6b;">selected</span> = {
      <span style="color: #ffcb6b;">odd</span> = {
        <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #c3e88d;">"</span>;
        <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
      };
      <span style="color: #ffcb6b;">even</span> = {
        <span style="color: #ffcb6b;">fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #c3e88d;">"</span>;
        <span style="color: #ffcb6b;">bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">"</span>;
      };
    };
  };
}; <span style="color: #676E95;"># }}}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org5bd3822" class="outline-4">
<h4 id="org5bd3822"><span class="section-number-4">8.1.9</span> mpv background color</h4>
<div class="outline-text-4" id="text-8-1-9">
<p>
Set mpv background color, color used to draw parts of the mpv window not covered by video.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org2dac62f"><span style="color: #ffcb6b;">programs.mpv.config.background</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd9f3b83" class="outline-4">
<h4 id="orgd9f3b83"><span class="section-number-4">8.1.10</span> zathura colors</h4>
<div class="outline-text-4" id="text-8-1-10">
<p>
Set zathura interface colors
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org817bcea"><span style="color: #ffcb6b;">programs.zathura.options.default-bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
<span style="color: #ffcb6b;">programs.zathura.options.default-fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #A6ACCD;">#A6ACCD</span><span style="color: #c3e88d;">"</span>;
<span style="color: #ffcb6b;">programs.zathura.options.statusbar-bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #202331;">#202331</span><span style="color: #c3e88d;">"</span>;
<span style="color: #ffcb6b;">programs.zathura.options.statusbar-fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #A6ACCD;">#A6ACCD</span><span style="color: #c3e88d;">"</span>;
<span style="color: #ffcb6b;">programs.zathura.options.inputbar-bg</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #202331;">#202331</span><span style="color: #c3e88d;">"</span>;
<span style="color: #ffcb6b;">programs.zathura.options.inputbar-fg</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #A6ACCD;">#A6ACCD</span><span style="color: #c3e88d;">"</span>;
<span style="color: #ffcb6b;">programs.zathura.options.highlight-color</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #444267;">#444267</span><span style="color: #c3e88d;">"</span>;
<span style="color: #ffcb6b;">programs.zathura.options.highlight-active-color</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #82aaff;">#82aaff</span><span style="color: #c3e88d;">"</span>;
</pre>
</div>
<p>
Set colors to recolor the document
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org0bb9605"><span style="color: #ffcb6b;">programs.zathura.options.recolor-lightcolor</span> = <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">"</span>;
<span style="color: #ffcb6b;">programs.zathura.options.recolor-darkcolor</span> = <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #A6ACCD;">#A6ACCD</span><span style="color: #c3e88d;">"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org853c84b" class="outline-4">
<h4 id="org853c84b"><span class="section-number-4">8.1.11</span> bat theme</h4>
<div class="outline-text-4" id="text-8-1-11">
<p>
Set theme name
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgd222324"><span style="color: #ffcb6b;">programs.bat.config.theme</span> = <span style="color: #c3e88d;">"palenight"</span>;
</pre>
</div>

<p>
<a href="#org2f2abed">9.6.2</a> can use Sublime Text 3 themes.
Download theme:
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org933abc2"><span style="color: #ffcb6b;">programs.bat.themes</span> = {
    <span style="color: #ffcb6b;">palenight</span> = builtins.readFile (
    pkgs.fetchgit
        {
        <span style="color: #ffcb6b;">url</span> = <span style="color: #c3e88d;">"https://github.com/equinusocio/material-theme"</span>;
        <span style="color: #ffcb6b;">rev</span> = <span style="color: #c3e88d;">"614b7e8bc7369c32e852297d42253643ebf90d55"</span>;
        <span style="color: #ffcb6b;">sha256</span> = <span style="color: #c3e88d;">"1gjfisksvqa2d08na0yln7yxny4i16wrmvlfnwllbqrgwh26v94g"</span>;
        } + <span style="color: #c3e88d;">"/schemes/Material-Theme-Palenight.tmTheme"</span>
    );
};
</pre>
</div>
</div>
</div>
<div id="outline-container-org5eae7b8" class="outline-4">
<h4 id="org5eae7b8"><span class="section-number-4">8.1.12</span> fzf colors</h4>
<div class="outline-text-4" id="text-8-1-12">
<p>
material-palenight applied to <a href="#org813ccb3">9.6.3</a>
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org574fe9e"><span style="color: #c3e88d;">"--color=bg+:0,bg:</span><span style="color: #ffffff; background-color: #292D3E;">#292D3E</span><span style="color: #c3e88d;">,spinner:</span><span style="color: #000000; background-color: #89DDFF;">#89DDFF</span><span style="color: #c3e88d;">,hl:</span><span style="color: #000000; background-color: #82AAFF;">#82AAFF</span><span style="color: #c3e88d;">,fg:</span><span style="color: #000000; background-color: #8796B0;">#8796B0</span><span style="color: #c3e88d;">,header:</span><span style="color: #000000; background-color: #82AAFF;">#82AAFF</span><span style="color: #c3e88d;">,info:</span><span style="color: #000000; background-color: #FFCB6B;">#FFCB6B</span><span style="color: #c3e88d;">,pointer:</span><span style="color: #000000; background-color: #89DDFF;">#89DDFF</span><span style="color: #c3e88d;">,marker:</span><span style="color: #000000; background-color: #89DDFF;">#89DDFF</span><span style="color: #c3e88d;">,fg+:</span><span style="color: #000000; background-color: #959DCB;">#959DCB</span><span style="color: #c3e88d;">,prompt:</span><span style="color: #000000; background-color: #c792ea;">#c792ea</span><span style="color: #c3e88d;">,hl+:</span><span style="color: #000000; background-color: #82AAFF;">#82AAFF</span><span style="color: #c3e88d;">"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbc602a2" class="outline-4">
<h4 id="orgbc602a2"><span class="section-number-4">8.1.13</span> fish shell colors</h4>
<div class="outline-text-4" id="text-8-1-13">
<p>
Set colors only if it isn&rsquo;t TTY
</p>
<div class="org-src-container">
<pre class="src src-fish" id="orgcd57717"><span style="color: #89DDFF;">if</span> <span style="color: #89DDFF;">test</span> <span style="color: #c3e88d;">"$TERM"</span> != <span style="color: #c3e88d;">"linux"</span>
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_autosuggestion</span> 676e95
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_cancel</span> -r
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_command</span> green <span style="color: #676E95;">#</span><span style="color: #676E95;">white</span>
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_comment</span> 32374D
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_cwd</span> green
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_cwd_root</span> red
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_end</span> brblack <span style="color: #676E95;">#</span><span style="color: #676E95;">blue</span>
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_error</span> red
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_escape</span> yellow <span style="color: #676E95;">#</span><span style="color: #676E95;">green</span>
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_history_current</span> --bold
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_host</span> normal
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_match</span> --background=brblue
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_normal</span> normal
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_operator</span> blue <span style="color: #676E95;">#</span><span style="color: #676E95;">green</span>
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_param</span> 8796B0
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_quote</span> yellow <span style="color: #676E95;">#</span><span style="color: #676E95;">brblack</span>
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_redirection</span> cyan
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_search_match</span> bryellow --background=32374D
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_selection</span> white --bold --background=32374D
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_status</span> red
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_user</span> brgreen
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_color_valid_path</span> --underline
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_pager_color_completion</span> normal
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_pager_color_description</span> yellow --dim
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_pager_color_prefix</span> white --bold <span style="color: #676E95;">#</span><span style="color: #676E95;">--underline</span>
    <span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_pager_color_progress</span> brwhite --background=cyan
<span style="color: #89DDFF;">end</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb5a6fdd" class="outline-4">
<h4 id="orgb5a6fdd"><span class="section-number-4">8.1.14</span> tmux colors</h4>
<div class="outline-text-4" id="text-8-1-14">
<p>
load colorscheme file
</p>
<div class="org-src-container">
<pre class="src src-conf" id="org59f5a64">source-file ./.palenight-tmux
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf48572d" class="outline-3">
<h3 id="orgf48572d"><span class="section-number-3">8.2</span> Fonts</h3>
<div class="outline-text-3" id="text-8-2">
<p>
I use Cozette font as editor/terminal font.
</p>

<p>
Spleen is my choice for TTY font
</p>

<p>
GohuFont is used only to render nerdfonts.
</p>

<p>
I think Apple&rsquo;s emoji font is the best emoji font.
</p>

<p>
Install fonts:
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:
{
  <span style="color: #ffcb6b;">fonts.fonts</span> = <span style="color: #89DDFF;">with</span> pkgs; [
    (nerdfonts.override { <span style="color: #ffcb6b;">fonts</span> = [ <span style="color: #c3e88d;">"Gohu"</span> ]; })
    unstable.dejavu_fonts
    spleen
    unstable.cozette
    apple-color-emoji
    noto-fonts-cjk
    emacs-all-the-icons-fonts
    etBook
    liberation_ttf_v2
  ];
  &lt;<span style="color: #f78c6c;">&lt;system-font-config&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;fontconfig-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;fontconfig-allowbitmaps&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;use-embedded-bitmaps&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;enable-font-dir&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;enable-ghostscript-fonts&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-orgb26d539" class="outline-4">
<h4 id="orgb26d539"><span class="section-number-4">8.2.1</span> Enable fontconfig</h4>
<div class="outline-text-4" id="text-8-2-1">
<p>
If enabled, a fontconfig file will be built pointing to a set of default fonts.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org0c0d088"><span style="color: #ffcb6b;">fonts.fontconfig.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org86faac2" class="outline-4">
<h4 id="org86faac2"><span class="section-number-4">8.2.2</span> Default fonts</h4>
<div class="outline-text-4" id="text-8-2-2">
<p>
Set system-wide monospace/emoji font below. Note that setting emoji here is not sufficient to show emoji properly.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgb8ade15">    <span style="color: #ffcb6b;">fonts.fontconfig</span> = {
      <span style="color: #ffcb6b;">defaultFonts</span> = {
        <span style="color: #ffcb6b;">emoji</span> = [ <span style="color: #c3e88d;">"Apple Color Emoji"</span> ];
        <span style="color: #ffcb6b;">monospace</span> = [ <span style="color: #c3e88d;">"Spleen"</span> ];
      };
    };
</pre>
</div>
</div>
</div>
<div id="outline-container-org8a9017f" class="outline-4">
<h4 id="org8a9017f"><span class="section-number-4">8.2.3</span> Allow bitmaps</h4>
<div class="outline-text-4" id="text-8-2-3">
<p>
This option is needed to allow usage of bitmap fonts. Like Spleen I use.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgdc43348"><span style="color: #ffcb6b;">fonts.fontconfig.allowBitmaps</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfd9cc1e" class="outline-4">
<h4 id="orgfd9cc1e"><span class="section-number-4">8.2.4</span> Use embedded bitmaps</h4>
<div class="outline-text-4" id="text-8-2-4">
<p>
This option is necessary to make emacs show unicode emojis properly.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org8af5f6a"><span style="color: #ffcb6b;">fonts.fontconfig.useEmbeddedBitmaps</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org07fb024" class="outline-4">
<h4 id="org07fb024"><span class="section-number-4">8.2.5</span> Enable Font Dir</h4>
<div class="outline-text-4" id="text-8-2-5">
<p>
Create a directory with links to all fonts in <code>/run/current-system/sw/share/X11-fonts</code>
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org5ae80c6"><span style="color: #ffcb6b;">fonts.enableFontDir</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgce1fde6" class="outline-4">
<h4 id="orgce1fde6"><span class="section-number-4">8.2.6</span> Enable ghost script fonts</h4>
<div class="outline-text-4" id="text-8-2-6">
<p>
Add the fonts provided by Ghostscript to the list of system fonts.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org6c611b4"><span style="color: #ffcb6b;">fonts.enableGhostscriptFonts</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org5978fcd" class="outline-4">
<h4 id="org5978fcd"><span class="section-number-4">8.2.7</span> TTY Font</h4>
<div class="outline-text-4" id="text-8-2-7">
<p>
Console fonts needs to be installed here via <code>console.packages</code> to be able to set.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgd061fa2"><span style="color: #ffcb6b;">console.packages</span> = <span style="color: #89DDFF;">with</span> pkgs; [ unstable.spleen ];
<span style="color: #ffcb6b;">console.font</span> = <span style="color: #c3e88d;">"spleen-6x12"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org73371bf" class="outline-4">
<h4 id="org73371bf"><span class="section-number-4">8.2.8</span> Emacs fonts</h4>
<div class="outline-text-4" id="text-8-2-8">
<p>
<b>Emacs fonts are set in point(pt) rather than pixel(px)</b>
Set doom fixed-pitch font and doom variable pitch font here:
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgf3c7245"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">doom-font</span> <span style="color: #c3e88d;">"CozetteVector-10.5"</span>
      <span style="color: #ffcb6b;">doom-variable-pitch-font</span> <span style="color: #c3e88d;">"ETBembo-11"</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Enable bold and italic
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgee5c150"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">doom-themes-enable-bold</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>
<div class="org-src-container">
<pre class="src src-elisp" id="org5d28bf8"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">doom-themes-enable-italic</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Set centaur-tabs tabline font
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org51f3105"><span style="color: #c792ea;">(</span><span style="color: #f78c6c;">centaur-tabs-change-fonts</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #f78c6c; font-weight: bold;">110</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Set custom set faces here
<b>modeline</b> font
<b>dashboard</b> font color
<b>avy</b> hinting font.
<b>org-mode title</b> font size
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgc1d679a"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">custom-set-faces!</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>mode-line <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>mode-line-inactive <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>doom-dashboard-menu-title <span style="color: #82aaff;">:foreground</span> <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #c792ea;">#c792ea</span><span style="color: #c3e88d;">"</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>org-document-title <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">225</span><span style="color: #f78c6c;">)</span>
  <span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Set treemacs fonts to Liberation Sans
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgc9f2f89"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">doom-themes-treemacs-enable-variable-pitch</span> nil<span style="color: #c792ea;">)</span>
<span style="color: #c792ea;">(</span><span style="color: #89DDFF;">custom-set-faces!</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>treemacs-root-face <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>treemacs-git-unmodified-face <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>treemacs-git-modified-face <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>treemacs-git-renamed-face <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>treemacs-git-ignored-face <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>treemacs-git-untracked-face <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>treemacs-git-added-face <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>treemacs-git-conflict-face <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>treemacs-directory-face <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>treemacs-directory-collapsed-face <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>treemacs-file-face <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>treemacs-tags-face <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span> <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">105</span><span style="color: #f78c6c;">)</span>
  <span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Set emoji and nerdfont(extrafonts):
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgba1fbe0"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">add-hook!</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">doom-load-theme-hook</span>
           <span style="color: #82aaff;">:append</span>
           <span style="color: #f78c6c;">(</span><span style="color: #89DDFF;">defun</span> <span style="color: #82aaff;">my/init-extra-fonts-h</span><span style="color: #c3e88d;">(</span><span style="color: #c792ea;">&amp;optional</span> frame<span style="color: #c3e88d;">)</span>
             <span style="color: #c3e88d;">(</span><span style="color: #89DDFF;">with-selected-frame</span> <span style="color: #c792ea;">(</span><span style="color: #89DDFF;">or</span> frame <span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">selected-frame</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
               <span style="color: #c792ea;">(</span><span style="color: #f78c6c;">set-fontset-font</span> t <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">symbol</span> <span style="color: #c3e88d;">"CozetteVector"</span> nil<span style="color: #c792ea;">)</span>
               <span style="color: #c792ea;">(</span><span style="color: #f78c6c;">set-fontset-font</span> t <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">symbol</span> <span style="color: #c3e88d;">"Apple Color Emoji"</span> nil <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">append</span><span style="color: #c792ea;">)</span>
               <span style="color: #c792ea;">(</span><span style="color: #f78c6c;">set-fontset-font</span> t <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">symbol</span> <span style="color: #c3e88d;">"GohuFont Nerd Font"</span> nil <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">append</span><span style="color: #c792ea;">)</span><span style="color: #c3e88d;">)</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>


<p>
Add this to config to use unicode emoji inside emacs
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgeae1afc"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">emojify-display-style</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">unicode</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd677be6" class="outline-4">
<h4 id="orgd677be6"><span class="section-number-4">8.2.9</span> xmonad prompt fonts</h4>
<div class="outline-text-4" id="text-8-2-9">
<p>
Set xmonad prompt font to Liberation Sans
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org1b07022"><span style="color: #82aaff;">myFont</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">String</span>
<span style="color: #82aaff;">myFont</span> <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"xft:Liberation Sans:size=14"</span>
</pre>
</div>
<p>
Set xmonad emoji prompt font
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="orgadee6ca"><span style="color: #82aaff;">myEmojiFont</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">String</span>
<span style="color: #82aaff;">myEmojiFont</span> <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"xft:Apple Color Emoji:size=14"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org8eaadc4" class="outline-4">
<h4 id="org8eaadc4"><span class="section-number-4">8.2.10</span> Alacritty Fonts</h4>
<div class="outline-text-4" id="text-8-2-10">
<p>
The size is in point(pt)
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org55c786a"><span style="color: #ffcb6b;">programs.alacritty.settings.font</span> = {
  <span style="color: #ffcb6b;">normal</span> = {
    <span style="color: #ffcb6b;">family</span> = <span style="color: #c3e88d;">"CozetteVector"</span>;
    <span style="color: #ffcb6b;">style</span> = <span style="color: #c3e88d;">"Regular"</span>;
  };
  <span style="color: #ffcb6b;">bold</span> = {
    <span style="color: #ffcb6b;">family</span> = <span style="color: #c3e88d;">"CozetteVector"</span>;
    <span style="color: #ffcb6b;">style</span> = <span style="color: #c3e88d;">"Regular"</span>;
  };
  <span style="color: #ffcb6b;">italic</span> = {
    <span style="color: #ffcb6b;">family</span> = <span style="color: #c3e88d;">"CozetteVector"</span>;
    <span style="color: #ffcb6b;">style</span> = <span style="color: #c3e88d;">"Regular"</span>;
  };
  <span style="color: #ffcb6b;">size</span> = <span style="color: #f78c6c; font-weight: bold;">10.5</span>;
  <span style="color: #ffcb6b;">offset</span> = {
    <span style="color: #ffcb6b;">x</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
    <span style="color: #ffcb6b;">y</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
  };
  <span style="color: #ffcb6b;">glyph_offset</span> = {
    <span style="color: #ffcb6b;">x</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
    <span style="color: #ffcb6b;">y</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
  };
};
</pre>
</div>
</div>
</div>
<div id="outline-container-org595ff46" class="outline-4">
<h4 id="org595ff46"><span class="section-number-4">8.2.11</span> qutebrowser Fonts</h4>
<div class="outline-text-4" id="text-8-2-11">
<p>
The size is in point(pt)
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgc3a11dc"><span style="color: #ffcb6b;">programs.qutebrowser.settings.fonts</span> = {
  <span style="color: #ffcb6b;">default_family</span> = <span style="color: #c3e88d;">"Liberation Sans"</span>;
  <span style="color: #ffcb6b;">web.family.standard</span> = <span style="color: #c3e88d;">"Liberation Sans"</span>;
  <span style="color: #ffcb6b;">web.family.serif</span> = <span style="color: #c3e88d;">"Liberation Sans"</span>;
  <span style="color: #ffcb6b;">web.family.sans_serif</span> = <span style="color: #c3e88d;">"Liberation Sans"</span>;
  <span style="color: #ffcb6b;">web.family.fixed</span> = <span style="color: #c3e88d;">"CozetteVector"</span>;
  <span style="color: #ffcb6b;">completion</span> = {
    <span style="color: #ffcb6b;">category</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
    <span style="color: #ffcb6b;">entry</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
  };
  <span style="color: #ffcb6b;">contextmenu</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
  <span style="color: #ffcb6b;">debug_console</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
  <span style="color: #ffcb6b;">default_size</span> = <span style="color: #c3e88d;">"10.5pt"</span>;
  <span style="color: #ffcb6b;">downloads</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
  <span style="color: #ffcb6b;">hints</span> = <span style="color: #c3e88d;">"11pt Liberation Sans"</span>;
  <span style="color: #ffcb6b;">keyhint</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
  <span style="color: #ffcb6b;">messages</span> = {
    <span style="color: #ffcb6b;">error</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
    <span style="color: #ffcb6b;">info</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
    <span style="color: #ffcb6b;">warning</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
  };
  <span style="color: #ffcb6b;">prompts</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
  <span style="color: #ffcb6b;">statusbar</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
  <span style="color: #ffcb6b;">tabs.selected</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
  <span style="color: #ffcb6b;">tabs.unselected</span> = <span style="color: #c3e88d;">"10.5pt CozetteVector"</span>;
  <span style="color: #676E95;">#tabs = "10.5pt CozetteVector";</span>
};
</pre>
</div>
</div>
</div>
<div id="outline-container-org5097966" class="outline-4">
<h4 id="org5097966"><span class="section-number-4">8.2.12</span> fontconfig</h4>
<div class="outline-text-4" id="text-8-2-12">
<p>
Font configs that can&rsquo;t be configured using nix options belongs here.
</p>
</div>
<ol class="org-ol">
<li><a id="org7f8be0c"></a>10-symbols.conf<br />
<div class="outline-text-5" id="text-8-2-12-1">
<p>
Use nerdfont as fallback font
</p>
<div class="org-src-container">
<pre class="src src-xml">&lt;?<span style="color: #89DDFF;">xml</span> <span style="color: #8d92af;">version="1.0"</span>?&gt;
&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
&lt;<span style="color: #82aaff;">fontconfig</span>&gt;
    &lt;<span style="color: #82aaff;">alias</span>&gt;
        &lt;<span style="color: #82aaff;">family</span>&gt;Cozette&lt;/<span style="color: #82aaff;">family</span>&gt;
        &lt;<span style="color: #82aaff;">prefer</span>&gt;
            &lt;<span style="color: #82aaff;">family</span>&gt;GohuFont Nerd Font&lt;/<span style="color: #82aaff;">family</span>&gt;
        &lt;/<span style="color: #82aaff;">prefer</span>&gt;
    &lt;/<span style="color: #82aaff;">alias</span>&gt;
&lt;/<span style="color: #82aaff;">fontconfig</span>&gt;
</pre>
</div>
</div>
</li>
<li><a id="orga14a241"></a>65-nonlatin.conf<br />
<div class="outline-text-5" id="text-8-2-12-2">
<p>
This configures Japanese font.
This makes programs use <b>Noto Sans CJK JP</b> for Japanese automatically. Therefore no need to configure Japanese font as main font.
</p>
<div class="org-src-container">
<pre class="src src-xml">&lt;?<span style="color: #89DDFF;">xml</span> <span style="color: #8d92af;">version="1.0"</span>?&gt;
&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
&lt;<span style="color: #82aaff;">fontconfig</span>&gt;
    <span style="color: #676E95;">&lt;!-- </span><span style="color: #676E95;">Default font for the ja_JP locale (no fc-match pattern) </span><span style="color: #676E95;">--&gt;</span>
    &lt;<span style="color: #82aaff;">match</span>&gt;
        &lt;<span style="color: #82aaff;">test</span> <span style="color: #ffcb6b;">compare</span>=<span style="color: #c3e88d;">"contains"</span> <span style="color: #ffcb6b;">name</span>=<span style="color: #c3e88d;">"lang"</span>&gt;
            &lt;<span style="color: #82aaff;">string</span>&gt;ja&lt;/<span style="color: #82aaff;">string</span>&gt;
        &lt;/<span style="color: #82aaff;">test</span>&gt;
        &lt;<span style="color: #82aaff;">edit</span> <span style="color: #ffcb6b;">mode</span>=<span style="color: #c3e88d;">"prepend"</span> <span style="color: #ffcb6b;">name</span>=<span style="color: #c3e88d;">"family"</span>&gt;
            &lt;<span style="color: #82aaff;">string</span>&gt;Noto Sans CJK JP&lt;/<span style="color: #82aaff;">string</span>&gt;
        &lt;/<span style="color: #82aaff;">edit</span>&gt;
    &lt;/<span style="color: #82aaff;">match</span>&gt;
    &lt;<span style="color: #82aaff;">alias</span>&gt;
        &lt;<span style="color: #82aaff;">family</span>&gt;serif&lt;/<span style="color: #82aaff;">family</span>&gt;
        &lt;<span style="color: #82aaff;">prefer</span>&gt;
            &lt;<span style="color: #82aaff;">family</span>&gt;Noto Sans CJK JP&lt;/<span style="color: #82aaff;">family</span>&gt;
        &lt;/<span style="color: #82aaff;">prefer</span>&gt;
    &lt;/<span style="color: #82aaff;">alias</span>&gt;
    &lt;<span style="color: #82aaff;">alias</span>&gt;
        &lt;<span style="color: #82aaff;">family</span>&gt;sans-serif&lt;/<span style="color: #82aaff;">family</span>&gt;
        &lt;<span style="color: #82aaff;">prefer</span>&gt;
            &lt;<span style="color: #82aaff;">family</span>&gt;Noto Sans CJK JP&lt;/<span style="color: #82aaff;">family</span>&gt;
        &lt;/<span style="color: #82aaff;">prefer</span>&gt;
    &lt;/<span style="color: #82aaff;">alias</span>&gt;
    &lt;<span style="color: #82aaff;">alias</span>&gt;
        &lt;<span style="color: #82aaff;">family</span>&gt;monospace&lt;/<span style="color: #82aaff;">family</span>&gt;
        &lt;<span style="color: #82aaff;">prefer</span>&gt;
            &lt;<span style="color: #82aaff;">family</span>&gt;Noto Sans CJK JP&lt;/<span style="color: #82aaff;">family</span>&gt;
        &lt;/<span style="color: #82aaff;">prefer</span>&gt;
    &lt;/<span style="color: #82aaff;">alias</span>&gt;
&lt;/<span style="color: #82aaff;">fontconfig</span>&gt;
</pre>
</div>
</div>
</li>

<li><a id="org0838a36"></a>10-prefer-emoji.conf<br />
<div class="outline-text-5" id="text-8-2-12-3">
<p>
Seems like this user-level config is needed to programs use Apple Color Emoji for every emojis.
</p>
<div class="org-src-container">
<pre class="src src-xml">&lt;?<span style="color: #89DDFF;">xml</span> <span style="color: #8d92af;">version="1.0"</span>?&gt;
&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
&lt;<span style="color: #82aaff;">fontconfig</span>&gt;
    &lt;<span style="color: #82aaff;">match</span>&gt;
        &lt;<span style="color: #82aaff;">edit</span> <span style="color: #ffcb6b;">name</span>=<span style="color: #c3e88d;">"family"</span> <span style="color: #ffcb6b;">mode</span>=<span style="color: #c3e88d;">"prepend"</span>&gt;
            &lt;<span style="color: #82aaff;">string</span>&gt;Apple Color Emoji&lt;/<span style="color: #82aaff;">string</span>&gt;
        &lt;/<span style="color: #82aaff;">edit</span>&gt;
    &lt;/<span style="color: #82aaff;">match</span>&gt;
&lt;/<span style="color: #82aaff;">fontconfig</span>&gt;
</pre>
</div>
</div>
</li>
<li><a id="org660df6a"></a>10-hinting.conf<br />
<div class="outline-text-5" id="text-8-2-12-4">
<div class="org-src-container">
<pre class="src src-xml">&lt;?<span style="color: #89DDFF;">xml</span> <span style="color: #8d92af;">version="1.0"</span>?&gt;&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
&lt;<span style="color: #82aaff;">fontconfig</span>&gt;
  &lt;<span style="color: #82aaff;">match</span> <span style="color: #ffcb6b;">target</span>=<span style="color: #c3e88d;">"font"</span>&gt;
    &lt;<span style="color: #82aaff;">test</span> <span style="color: #ffcb6b;">name</span>=<span style="color: #c3e88d;">"family"</span> <span style="color: #ffcb6b;">qual</span>=<span style="color: #c3e88d;">"any"</span>&gt;
      &lt;<span style="color: #82aaff;">string</span>&gt;CozetteVector&lt;/<span style="color: #82aaff;">string</span>&gt;
    &lt;/<span style="color: #82aaff;">test</span>&gt;
    &lt;<span style="color: #82aaff;">edit</span> <span style="color: #ffcb6b;">name</span>=<span style="color: #c3e88d;">"hinting"</span> <span style="color: #ffcb6b;">mode</span>=<span style="color: #c3e88d;">"assign"</span>&gt;
      &lt;<span style="color: #82aaff;">bool</span>&gt;false&lt;/<span style="color: #82aaff;">bool</span>&gt;
    &lt;/<span style="color: #82aaff;">edit</span>&gt;
  &lt;/<span style="color: #82aaff;">match</span>&gt;
&lt;/<span style="color: #82aaff;">fontconfig</span>&gt;
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-orga5004b2" class="outline-4">
<h4 id="orga5004b2"><span class="section-number-4">8.2.13</span> Dunst(Notifications) font</h4>
<div class="outline-text-4" id="text-8-2-13">
<div class="org-src-container">
<pre class="src src-nix" id="org106e9f3"><span style="color: #ffcb6b;">services.dunst.settings.global.font</span> = <span style="color: #c3e88d;">"Liberation Sans 14"</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd73cd56" class="outline-3">
<h3 id="orgd73cd56"><span class="section-number-3">8.3</span> Wallpapers</h3>
<div class="outline-text-3" id="text-8-3">
<p>
Desktop wallpaper <code>pictures/wallpaper1.png</code>
</p>
<p>
<img src="pictures/wallpaper1.png" alt="wallpaper1.png" />
Lock screen wallpaper <code>pictures/wallpaper2.png</code>
<img src="pictures/wallpaper2.png" alt="wallpaper2.png" />
</p>
</div>
<div id="outline-container-orgefdcd0d" class="outline-4">
<h4 id="orgefdcd0d"><span class="section-number-4">8.3.1</span> Wallpaper files</h4>
<div class="outline-text-4" id="text-8-3-1">
<p>
Put (symlink) files into /etc. It makes easy to set wallpapers from any machines.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgf32c89c"><span style="color: #c3e88d;">"wallpapers/wallpaper1.png"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../pictures/wallpaper1.png</span>;
<span style="color: #c3e88d;">"wallpapers/wallpaper2.png"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../pictures/wallpaper2.png</span>;
<span style="color: #c3e88d;">"wallpapers/wallpaper2-1080.png"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../pictures/wallpaper2-1080.png</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org1296596" class="outline-4">
<h4 id="org1296596"><span class="section-number-4">8.3.2</span> Lock screen</h4>
<div class="outline-text-4" id="text-8-3-2">
<p>
Set 1440p lock screen wallpaper
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgedd7609"><span style="color: #ffcb6b;">background-image</span> = <span style="color: #c3e88d;">"/etc/wallpapers/wallpaper2.png"</span>
</pre>
</div>

<p>
Set a 1080p equivalent
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org03eb9c4"><span style="color: #ffcb6b;">background-image</span> = <span style="color: #c3e88d;">"/etc/wallpapers/wallpaper2-1080.png"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org9d89019" class="outline-4">
<h4 id="org9d89019"><span class="section-number-4">8.3.3</span> Set wallpaper</h4>
<div class="outline-text-4" id="text-8-3-3">
<p>
First, set fallback wallpaper in case config isn&rsquo;t set
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org4309eb4"><span style="color: #82aaff;">spawnOnce</span> <span style="color: #c3e88d;">"feh --bg-fill /etc/wallpapers/wallpaper1.png &amp;"</span>
</pre>
</div>
<p>
Then, apply nitrogen config
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org3d4a06d"><span style="color: #82aaff;">spawnOnce</span> <span style="color: #c3e88d;">"nitrogen --restore &amp;"</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb2f06fd" class="outline-3">
<h3 id="orgb2f06fd"><span class="section-number-3">8.4</span> Icons</h3>
</div>
<div id="outline-container-org7a0c6ea" class="outline-3">
<h3 id="org7a0c6ea"><span class="section-number-3">8.5</span> Cursors</h3>
<div class="outline-text-3" id="text-8-5">
</div>
<div id="outline-container-org564a61e" class="outline-4">
<h4 id="org564a61e"><span class="section-number-4">8.5.1</span> Alacritty cursor</h4>
<div class="outline-text-4" id="text-8-5-1">
<p>
Set cursor shape
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgaacd5c7"><span style="color: #ffcb6b;">programs.alacritty.settings.cursor</span> = {
  <span style="color: #ffcb6b;">style</span> = <span style="color: #c3e88d;">"Beam"</span>;
};
</pre>
</div>

<p>
Enable custom cursor colors
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orga5e27d1"><span style="color: #ffcb6b;">programs.alacritty.settings.custom_cursor_colors</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgce5c8da" class="outline-4">
<h4 id="orgce5c8da"><span class="section-number-4">8.5.2</span> Set x11 cursor</h4>
<div class="outline-text-4" id="text-8-5-2">
<p>
First, import this module in <a href="#orgc4dea09">10</a>
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="orgbeeefab"><span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Util.Cursor</span>             ( setDefaultCursor )
</pre>
</div>

<p>
Use that module to set cursor at startuphook
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="orgef6bf84"><span style="color: #82aaff;">setDefaultCursor</span> xC_left_ptr
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org556574d" class="outline-3">
<h3 id="org556574d"><span class="section-number-3">8.6</span> Opacity</h3>
<div class="outline-text-3" id="text-8-6">
<p width="300">
<img src="pictures/screenshot-opacity.png" alt="screenshot-opacity.png" width="300" />
Programs that doesn&rsquo;t have opacity option, or the opacity option doesn&rsquo;t work great(like PGTK emacs) can be set opacity using picom with following code:
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgb1d88a9"><span style="color: #ffcb6b;">services.picom.opacityRule</span> = [
    <span style="color: #c3e88d;">"80:class_g  = 'Zathura'"</span>
    <span style="color: #c3e88d;">"80:class_g  = 'TelegramDesktop'"</span>
    <span style="color: #c3e88d;">"80:class_g  = 'Discord'"</span>
    <span style="color: #c3e88d;">"80:class_g  = 'Emacs'"</span>
    <span style="color: #c3e88d;">"100:class_g = 'keynav'"</span>
];
</pre>
</div>
</div>
<div id="outline-container-orgf3fbeb0" class="outline-4">
<h4 id="orgf3fbeb0"><span class="section-number-4">8.6.1</span> Blur</h4>
<div class="outline-text-4" id="text-8-6-1">
<p>
Configure blur method and strength for translucent programs.
I use dual kawase blur.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgdbe0050">blur:
{
    <span style="color: #ffcb6b;">method</span> = <span style="color: #c3e88d;">"kawase"</span>;
    <span style="color: #ffcb6b;">strength</span> = <span style="color: #f78c6c; font-weight: bold;">8</span>;
    <span style="color: #ffcb6b;">background</span> = <span style="color: #82aaff;">false</span>;
    <span style="color: #ffcb6b;">background-frame</span> = <span style="color: #82aaff;">false</span>;
    <span style="color: #ffcb6b;">background-fixed</span> = <span style="color: #82aaff;">false</span>;
};
</pre>
</div>
</div>
</div>
<div id="outline-container-orged69ad6" class="outline-4">
<h4 id="orged69ad6"><span class="section-number-4">8.6.2</span> Blur exclude</h4>
<div class="outline-text-4" id="text-8-6-2">
<p>
Set programs to exclude from background blur here.
Exclude keynav because it&rsquo;s not intended to be recognized as window and it becomes buggy.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org7fe501f"><span style="color: #ffcb6b;">blur-background-exclude</span> = [
    <span style="color: #c3e88d;">"class_g = 'keynav'"</span>
];
</pre>
</div>
</div>
</div>
<div id="outline-container-org9cff0f7" class="outline-4">
<h4 id="org9cff0f7"><span class="section-number-4">8.6.3</span> Alacritty opacity</h4>
<div class="outline-text-4" id="text-8-6-3">
<p>
Set Alacritty opacity.
Window opacity as a floating point number from <code>0.0</code> to <code>1.0</code>
The value <code>0.0</code> is completely transparent and <code>1.0</code> is opaque.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org802092e"><span style="color: #ffcb6b;">programs.alacritty.settings.background_opacity</span> = <span style="color: #f78c6c; font-weight: bold;">0.8</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org4dcb122" class="outline-4">
<h4 id="org4dcb122"><span class="section-number-4">8.6.4</span> Emacs opacity</h4>
<div class="outline-text-4" id="text-8-6-4">
<p>
Set to nil, let picom manage opacity because pure gtk emacs doesn&rsquo;t work great with opacity option.
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org3c3852b"><span style="color: #c792ea;">(</span><span style="color: #f78c6c;">set-frame-parameter</span> nil <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">alpha</span> nil<span style="color: #c792ea;">)</span> <span style="color: #676E95;">;; </span><span style="color: #676E95;">let picom manage it</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orga04f209" class="outline-3">
<h3 id="orga04f209"><span class="section-number-3">8.7</span> Border</h3>
<div class="outline-text-3" id="text-8-7">

<div id="orgc2c995c" class="figure">
<p><img src="pictures/screenshot-border.png" alt="screenshot-border.png" />
</p>
</div>
</div>
<div id="outline-container-orgdf8c107" class="outline-4">
<h4 id="orgdf8c107"><span class="section-number-4">8.7.1</span> Border width</h4>
<div class="outline-text-4" id="text-8-7-1">
<p>
Set the width of window border in px
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="orge992275"><span style="color: #82aaff;">myBorderWidth</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">Dimension</span>
<span style="color: #82aaff;">myBorderWidth</span> <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">2</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0733f58" class="outline-4">
<h4 id="org0733f58"><span class="section-number-4">8.7.2</span> Window border color</h4>
<div class="outline-text-4" id="text-8-7-2">
<p>
Set border color for windows
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="orgc46e771"><span style="color: #82aaff;">myNormalBorderColor</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">String</span>
<span style="color: #82aaff;">myNormalBorderColor</span> <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #2b2a3e;">#2b2a3e</span><span style="color: #c3e88d;">"</span>
</pre>
</div>
<p>
Set border color for focused window
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="orga972cd0"><span style="color: #82aaff;">myFocusedBorderColor</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">String</span>
<span style="color: #82aaff;">myFocusedBorderColor</span> <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #c792ea;">#c792ea</span><span style="color: #c3e88d;">"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orge08f207" class="outline-4">
<h4 id="orge08f207"><span class="section-number-4">8.7.3</span> Enable rounded borders</h4>
<div class="outline-text-4" id="text-8-7-3">
<p>
Enable rounded borders in picom
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org8ea6fde"><span style="color: #ffcb6b;">round-borders</span> = <span style="color: #f78c6c; font-weight: bold;">1</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org123e47e" class="outline-4">
<h4 id="org123e47e"><span class="section-number-4">8.7.4</span> Corner radius</h4>
<div class="outline-text-4" id="text-8-7-4">
<p>
Set window corner radius
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org67a8c5b"><span style="color: #ffcb6b;">corner-radius</span> = <span style="color: #f78c6c; font-weight: bold;">18</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd144ef9" class="outline-4">
<h4 id="orgd144ef9"><span class="section-number-4">8.7.5</span> Rounded corner exclude</h4>
<div class="outline-text-4" id="text-8-7-5">
<p>
Programs to exclude from rounded corners.
Exclude keynav and dock, full screen programs.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org493a7d7"><span style="color: #ffcb6b;">rounded-corners-exclude</span> = [
    <span style="color: #c3e88d;">"window_type = 'dock'"</span>,
    <span style="color: #c3e88d;">"_NET_WM_STATE@:32a *= '_NET_WM_STATE_FULLSCREEN'"</span>,
    <span style="color: #c3e88d;">"class_g = 'keynav'"</span>,
];
</pre>
</div>
</div>
</div>
<div id="outline-container-org916c4dd" class="outline-4">
<h4 id="org916c4dd"><span class="section-number-4">8.7.6</span> Rounded borders exclude</h4>
<div class="outline-text-4" id="text-8-7-6">
<p>
Exclude programs from rounded borders.
Exclude keynav because it&rsquo;s not intended to be recognized as window and it becomes buggy.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org175340b"><span style="color: #ffcb6b;">round-borders-exclude</span> = [
    <span style="color: #c3e88d;">"class_g = 'keynav'"</span>
];
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org4418cff" class="outline-2">
<h2 id="org4418cff"><span class="section-number-2">9</span> Terminal/Shell</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-orgf7aabbb" class="outline-3">
<h3 id="orgf7aabbb"><span class="section-number-3">9.1</span> Alacritty</h3>
<div class="outline-text-3" id="text-9-1">
<p>
Alacritty is a GPU-accelerated terminal emulator, written in Rust.
I use as default terminal.
</p>
<ul class="org-ul">
<li><a href="#orgfdfbb92">Colors</a></li>
<li><a href="#org8eaadc4">Fonts</a></li>
<li><a href="#org564a61e">Cursor style</a></li>
</ul>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  &lt;<span style="color: #f78c6c;">&lt;alacritty-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-colors&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-fonts&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-enable-true-color&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-window-padding&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-window-dynamicpadding&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-window-decorations&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-window-startup-mode&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-scrolling&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-boldtext-bright-colors&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-opacity&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-keybinds&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-cursor&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;alacritty-custom-cursor-colors&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-orgb25959a" class="outline-4">
<h4 id="orgb25959a"><span class="section-number-4">9.1.1</span> Install Alacritty</h4>
<div class="outline-text-4" id="text-9-1-1">
<p>
Whether to enable Alacritty
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgbae1a1e"><span style="color: #ffcb6b;">programs.alacritty.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgafe3626" class="outline-4">
<h4 id="orgafe3626"><span class="section-number-4">9.1.2</span> Enable true color</h4>
<div class="outline-text-4" id="text-9-1-2">
<p>
xterm-256color describes Xterm with support for 256 colors enabled.
set TERM environment variable.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orga0fcd25"><span style="color: #ffcb6b;">programs.alacritty.settings.env.TERM</span> = <span style="color: #c3e88d;">"xterm-256color"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org830d3ce" class="outline-4">
<h4 id="org830d3ce"><span class="section-number-4">9.1.3</span> Alacritty padding</h4>
<div class="outline-text-4" id="text-9-1-3">
<p>
Blank space added around the window in pixels.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgd36ee9c"><span style="color: #ffcb6b;">programs.alacritty.settings.window.padding</span> = {
    <span style="color: #ffcb6b;">x</span> = <span style="color: #f78c6c; font-weight: bold;">12</span>;
    <span style="color: #ffcb6b;">y</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
};
</pre>
</div>
<p>
Dynamic padding
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orge32e21b"><span style="color: #ffcb6b;">programs.alacritty.settings.window.dynamic_padding</span> = <span style="color: #82aaff;">false</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc53addb" class="outline-4">
<h4 id="orgc53addb"><span class="section-number-4">9.1.4</span> Window decorations</h4>
<div class="outline-text-4" id="text-9-1-4">
<ul class="org-ul">
<li>full : Borders and title bar</li>
<li>none: Neither borders nor title bar</li>
</ul>
<div class="org-src-container">
<pre class="src src-nix" id="org3b7a562"><span style="color: #ffcb6b;">programs.alacritty.settings.window.decorations</span> = <span style="color: #c3e88d;">"none"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org1f6037a" class="outline-4">
<h4 id="org1f6037a"><span class="section-number-4">9.1.5</span> Window startup mode</h4>
<div class="outline-text-4" id="text-9-1-5">
<ul class="org-ul">
<li>Windowed</li>
<li>Maximized</li>
<li>Fullscreen</li>
</ul>
<div class="org-src-container">
<pre class="src src-nix" id="org363b281"><span style="color: #ffcb6b;">programs.alacritty.settings.window.startup_mode</span> = <span style="color: #c3e88d;">"Windowed"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org92c1936" class="outline-4">
<h4 id="org92c1936"><span class="section-number-4">9.1.6</span> Scrolling</h4>
<div class="outline-text-4" id="text-9-1-6">
<p>
History sets maximum number of lines in the scrollback buffer.
Multiplier sets scrolling distance multiplier.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgaf84e48"><span style="color: #ffcb6b;">programs.alacritty.settings.scrolling</span> = {
    <span style="color: #ffcb6b;">history</span> = <span style="color: #f78c6c; font-weight: bold;">10000</span>;
    <span style="color: #ffcb6b;">multiplier</span> = <span style="color: #f78c6c; font-weight: bold;">3</span>;
};
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcfa711b" class="outline-4">
<h4 id="orgcfa711b"><span class="section-number-4">9.1.7</span> Draw bold text with bright colors</h4>
<div class="outline-text-4" id="text-9-1-7">
<p>
If <code>true</code>, bold text is drawn using the bright color variants.
Maybe usable for bitmap fonts?
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org3f4b7d0"><span style="color: #ffcb6b;">programs.alacritty.settings.draw_bold_text_with_bright_colors</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdf40e69" class="outline-4">
<h4 id="orgdf40e69"><span class="section-number-4">9.1.8</span> Key bindings</h4>
<div class="outline-text-4" id="text-9-1-8">
<p>
<code>C-S-c</code> to copy, <code>C-S-v</code> to paste
<code>C-S-Up</code> to scroll upwards.
<code>C-S-Down</code> to scroll downwards.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org63af6c0"><span style="color: #ffcb6b;">programs.alacritty.settings.key_bindings</span> = [
  {
    <span style="color: #ffcb6b;">key</span> = <span style="color: #c3e88d;">"V"</span>;
    <span style="color: #ffcb6b;">mods</span> = <span style="color: #c3e88d;">"Control|Shift"</span>;
    <span style="color: #ffcb6b;">action</span> = <span style="color: #c3e88d;">"Paste"</span>;
  }
  {
    <span style="color: #ffcb6b;">key</span> = <span style="color: #c3e88d;">"C"</span>;
    <span style="color: #ffcb6b;">mods</span> = <span style="color: #c3e88d;">"Control|Shift"</span>;
    <span style="color: #ffcb6b;">action</span> = <span style="color: #c3e88d;">"Copy"</span>;
  }
  {
    <span style="color: #ffcb6b;">key</span> = <span style="color: #c3e88d;">"Up"</span>;
    <span style="color: #ffcb6b;">mods</span> = <span style="color: #c3e88d;">"Control|Shift"</span>;
    <span style="color: #ffcb6b;">action</span> = <span style="color: #c3e88d;">"ScrollPageUp"</span>;
  }
  {
    <span style="color: #ffcb6b;">key</span> = <span style="color: #c3e88d;">"Down"</span>;
    <span style="color: #ffcb6b;">mods</span> = <span style="color: #c3e88d;">"Control|Shift"</span>;
    <span style="color: #ffcb6b;">action</span> = <span style="color: #c3e88d;">"ScrollPageDown"</span>;
  }
];
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org3dec8bc" class="outline-3">
<h3 id="org3dec8bc"><span class="section-number-3">9.2</span> TTY</h3>
<div class="outline-text-3" id="text-9-2">
<p>
Configure TTY console.
</p>
<ul class="org-ul">
<li><a href="#org68e85e0">Colors</a></li>
<li><a href="#org5978fcd">Font</a></li>
<li><a href="#orgb17045f">Layout</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:
{
&lt;<span style="color: #f78c6c;">&lt;consolecolors&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;consoleearlysetup&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;consolefont&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;consolekeymap&gt;</span>&gt;
}
</pre>
</div>
</div>

<div id="outline-container-org9bcb32d" class="outline-4">
<h4 id="org9bcb32d"><span class="section-number-4">9.2.1</span> Early Setup</h4>
<div class="outline-text-4" id="text-9-2-1">
<p>
Load console configurations early at initrd
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org4536714"><span style="color: #ffcb6b;">console.earlySetup</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org162361b" class="outline-3">
<h3 id="org162361b"><span class="section-number-3">9.3</span> vterm</h3>
<div class="outline-text-3" id="text-9-3">
<p>
vterm is fully-fledged terminal emulator inside GNU Emacs based on libvterm, a C library.
As a result of using compiled code (instead of elisp), emacs-libvterm is fully capable, fast, and it can seamlessly handle large outputs.
Just think like running Konsole or Gnome Terminal inside emacs
</p>
</div>
<div id="outline-container-org0a2c308" class="outline-4">
<h4 id="org0a2c308"><span class="section-number-4">9.3.1</span> Install vterm</h4>
<div class="outline-text-4" id="text-9-3-1">
<p>
vterm uses extrenal compiled code, unlike other emacs packages.
So, you need to install vterm package to use.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org41f4678"><span style="color: #ffcb6b;">programs.emacs.extraPackages</span> = (epkgs: [ epkgs.vterm ]);
</pre>
</div>

<p>
Enable doom-emacs module <a href="#org1f1fea9">here</a>
</p>
</div>
</div>
<div id="outline-container-orgbd13c31" class="outline-4">
<h4 id="orgbd13c31"><span class="section-number-4">9.3.2</span> fish shell configuration</h4>
<div class="outline-text-4" id="text-9-3-2">
<div class="org-src-container">
<pre class="src src-fish" id="orgf4ecf11"><span style="color: #676E95;"># </span><span style="color: #676E95;">Some of the most useful features in emacs-libvterm require shell-side</span>
<span style="color: #676E95;"># </span><span style="color: #676E95;">configurations. The main goal of these additional functions is to enable the</span>
<span style="color: #676E95;"># </span><span style="color: #676E95;">shell to send information to `vterm` via properly escaped sequences. A</span>
<span style="color: #676E95;"># </span><span style="color: #676E95;">function that helps in this task, `vterm_printf`, is defined below.</span>

<span style="color: #89DDFF;">function</span> <span style="color: #82aaff;">vterm_printf</span>;
    <span style="color: #89DDFF;">if</span> [ -n <span style="color: #c3e88d;">"$TMUX"</span> ]
        <span style="color: #676E95;"># </span><span style="color: #676E95;">tell tmux to pass the escape sequences through</span>
        <span style="color: #676E95;"># </span><span style="color: #676E95;">(Source: http://permalink.gmane.org/gmane.comp.terminal-emulators.tmux.user/1324)</span>
        <span style="color: #82aaff;">printf</span> <span style="color: #c3e88d;">"\ePtmux;\e\e]%s\007\e\\"</span> <span style="color: #c3e88d;">"$argv"</span>
    <span style="color: #89DDFF;">else</span> <span style="color: #89DDFF;">if</span> <span style="color: #82aaff;">string</span> match -q -- <span style="color: #c3e88d;">"screen*"</span> <span style="color: #c3e88d;">"$TERM"</span>
        <span style="color: #676E95;"># </span><span style="color: #676E95;">GNU screen (screen, screen-256color, screen-256color-bce)</span>
        <span style="color: #82aaff;">printf</span> <span style="color: #c3e88d;">"\eP\e]%s\007\e\\"</span> <span style="color: #c3e88d;">"$argv"</span>
    <span style="color: #89DDFF;">else</span>
        <span style="color: #82aaff;">printf</span> <span style="color: #c3e88d;">"\e]%s\e\\"</span> <span style="color: #c3e88d;">"$argv"</span>
    <span style="color: #89DDFF;">end</span>
<span style="color: #89DDFF;">end</span>

<span style="color: #676E95;"># </span><span style="color: #676E95;">Completely clear the buffer. With this, everything that is not on screen</span>
<span style="color: #676E95;"># </span><span style="color: #676E95;">is erased.</span>
<span style="color: #89DDFF;">if</span> [ <span style="color: #c3e88d;">"$INSIDE_EMACS"</span> = <span style="color: #c3e88d;">'vterm'</span> ]
    <span style="color: #89DDFF;">function</span> <span style="color: #82aaff;">clear</span>
        <span style="color: #82aaff;">vterm_printf</span> <span style="color: #c3e88d;">"51;Evterm-clear-scrollback"</span>;
        <span style="color: #82aaff;">tput</span> clear;
    <span style="color: #89DDFF;">end</span>
<span style="color: #89DDFF;">end</span>

<span style="color: #676E95;"># </span><span style="color: #676E95;">This is to change the title of the buffer based on information provided by the</span>
<span style="color: #676E95;"># </span><span style="color: #676E95;">shell. See, http://tldp.org/HOWTO/Xterm-Title-4.html, for the meaning of the</span>
<span style="color: #676E95;"># </span><span style="color: #676E95;">various symbols.</span>
<span style="color: #89DDFF;">function</span> <span style="color: #82aaff;">fish_title</span>
    <span style="color: #82aaff;">hostname</span>
    <span style="color: #82aaff;">echo</span> <span style="color: #c3e88d;">":"</span>
    <span style="color: #82aaff;">pwd</span>
<span style="color: #89DDFF;">end</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org28b2a43" class="outline-3">
<h3 id="org28b2a43"><span class="section-number-3">9.4</span> fish shell</h3>
<div class="outline-text-3" id="text-9-4">
<p>
fish is a Unix shell that attempts to be more interactive and user-friendly
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:

{
  &lt;<span style="color: #f78c6c;">&lt;fish-enable&gt;</span>&gt;

  <span style="color: #ffcb6b;">programs.fish.shellAbbrs</span> = {
    &lt;<span style="color: #f78c6c;">&lt;fish-common-abbrs&gt;</span>&gt;
    &lt;<span style="color: #f78c6c;">&lt;fish-lazygit&gt;</span>&gt;
    &lt;<span style="color: #f78c6c;">&lt;fish-sshadd-git&gt;</span>&gt;
    &lt;<span style="color: #f78c6c;">&lt;fish-git-abbrs&gt;</span>&gt;
    &lt;<span style="color: #f78c6c;">&lt;fish-screenshots&gt;</span>&gt;
    &lt;<span style="color: #f78c6c;">&lt;fish-programs&gt;</span>&gt;
    &lt;<span style="color: #f78c6c;">&lt;fish-mpv-music&gt;</span>&gt;
    &lt;<span style="color: #f78c6c;">&lt;fish-nixos&gt;</span>&gt;
    &lt;<span style="color: #f78c6c;">&lt;fish-misc-commands&gt;</span>&gt;
  };

  <span style="color: #ffcb6b;">programs.fish.plugins</span> =
    [
      &lt;<span style="color: #f78c6c;">&lt;fish-plugin-z&gt;</span>&gt;
      &lt;<span style="color: #f78c6c;">&lt;fish-plugin-ssh-agent&gt;</span>&gt;
    ];

  <span style="color: #ffcb6b;">programs.fish.interactiveShellInit</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">      &lt;&lt;fish-vi-binds&gt;&gt;</span>
<span style="color: #c3e88d;">      &lt;&lt;fish-greeting&gt;&gt;</span>
<span style="color: #c3e88d;">      &lt;&lt;fish-esc-delay&gt;&gt;</span>
<span style="color: #c3e88d;">      &lt;&lt;fish-colors&gt;&gt;</span>
<span style="color: #c3e88d;">      &lt;&lt;fish-lazygit-neovim&gt;&gt;</span>
<span style="color: #c3e88d;">      &lt;&lt;fish-direnv&gt;&gt;</span>
<span style="color: #c3e88d;">      &lt;&lt;fish-vterm-config&gt;&gt;</span>
<span style="color: #c3e88d;">      # vifm image preview</span>
<span style="color: #c3e88d;">      alias vifm="bash -c 'vifmrun'"</span>

<span style="color: #c3e88d;">    ''</span>;
}
</pre>
</div>
</div>
<div id="outline-container-orge03bec1" class="outline-4">
<h4 id="orge03bec1"><span class="section-number-4">9.4.1</span> Enable fish</h4>
<div class="outline-text-4" id="text-9-4-1">
<p>
Turn on to install fish shell
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orge487801"><span style="color: #ffcb6b;">programs.fish.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org48d7073" class="outline-4">
<h4 id="org48d7073"><span class="section-number-4">9.4.2</span> Abbreviations</h4>
<div class="outline-text-4" id="text-9-4-2">
</div>
<ol class="org-ol">
<li><a id="org062109d"></a>Common commands<br />
<div class="outline-text-5" id="text-9-4-2-1">
<div class="org-src-container">
<pre class="src src-nix" id="orgffbe063">&lt;<span style="color: #f78c6c;">&lt;fish-clear&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;fish-lsd&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;fish-sudoedit&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;fish-bat&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;fish-diff&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;fish-tar&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;fish-uefi&gt;</span>&gt;
</pre>
</div>

<p>
clear the terminal with <b>c</b>
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgf93a3cf"><span style="color: #c3e88d;">"c"</span> = <span style="color: #c3e88d;">"clear"</span>;
</pre>
</div>

<p>
As I use Dvorak, it&rsquo;s really painful to type <b>ls</b> with pinky everytime. I use <b>s</b> and equivalents instead.
I use <a href="#org293d983">9.6.4</a> instead of ls command
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org7d5553e"><span style="color: #c3e88d;">"s"</span> = <span style="color: #c3e88d;">"lsd"</span>;
<span style="color: #c3e88d;">"sa"</span> = <span style="color: #c3e88d;">"lsd -aF"</span>;
<span style="color: #c3e88d;">"ss"</span> = <span style="color: #c3e88d;">"lsd -alF"</span>;
</pre>
</div>

<p>
sudoedit
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org707a992"><span style="color: #c3e88d;">"suv"</span> = <span style="color: #c3e88d;">"sudoedit"</span>;
</pre>
</div>

<p>
Use <a href="#org2f2abed">9.6.2</a> instead of cat command
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgcb949a7"><span style="color: #c3e88d;">"cat"</span> = <span style="color: #c3e88d;">"bat"</span>;
</pre>
</div>

<p>
Use diff-so-fancy instead of diff command
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org8a76539"><span style="color: #c3e88d;">"diff"</span> = <span style="color: #c3e88d;">"diff-so-fancy"</span>;
</pre>
</div>

<p>
Turn colorization on always for tree command
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org2604dfc"><span style="color: #c3e88d;">"tree"</span> = <span style="color: #c3e88d;">"tree -C"</span>;
</pre>
</div>


<p>
Extract tar easier
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgaca4562"><span style="color: #c3e88d;">"untar"</span> = <span style="color: #c3e88d;">"tar -xvzf"</span>;
</pre>
</div>

<p>
Restart to uefi easier
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org24c1dde"><span style="color: #c3e88d;">"uefi"</span> = <span style="color: #c3e88d;">"systemctl reboot --firmware-setup"</span>;
</pre>
</div>
</div>
</li>

<li><a id="org49f0e34"></a>Commands to launch programs<br />
<div class="outline-text-5" id="text-9-4-2-2">
<div class="org-src-container">
<pre class="src src-nix" id="orgb13c07b">&lt;<span style="color: #f78c6c;">&lt;fish-editors&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;fish-devour&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;fish-btm&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;fish-vifm&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;fish-ncpamixer&gt;</span>&gt;
</pre>
</div>

<p>
Launch editors from terminal easier
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgeea25f9"><span style="color: #c3e88d;">"v"</span> = <span style="color: #c3e88d;">"nvim"</span>;
<span style="color: #c3e88d;">"emn"</span> = <span style="color: #c3e88d;">"emacsclient -c -nw"</span>;
</pre>
</div>

<p>
Tangle org-babel src blocks from command line
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #c3e88d;">"org-babel-tangle"</span> = <span style="color: #c3e88d;">"emacs --batch --eval "</span>(require 'org)<span style="color: #c3e88d;">" --eval '(org-babel-tangle-file "</span>README.org<span style="color: #c3e88d;">")'"</span>;
</pre>
</div>

<p>
Use window swallowing on mpv,zathura,sxiv,emacs.
Requires <a href="https://github.com/salman-abedin/devour">devour</a> and xdotool installed
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgbe4ba17"><span style="color: #c3e88d;">"em"</span> = <span style="color: #c3e88d;">"devour emacsclient -c"</span>;
<span style="color: #c3e88d;">"mpv"</span> = <span style="color: #c3e88d;">"devour mpv"</span>;
<span style="color: #c3e88d;">"sxiv"</span> = <span style="color: #c3e88d;">"devour sxiv"</span>;
<span style="color: #c3e88d;">"zathura"</span> = <span style="color: #c3e88d;">"devour zathura"</span>;
</pre>
</div>

<p>
Launch mpv to play music
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org2638439"><span style="color: #c3e88d;">"mpvm"</span> = <span style="color: #c3e88d;">"mpv --no-video"</span>;
</pre>
</div>

<p>
Use bottom instead of top
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org3142099"><span style="color: #c3e88d;">"top"</span> = <span style="color: #c3e88d;">"btm"</span>;
</pre>
</div>

<p>
vifm(filemanager)
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org6c38610"><span style="color: #c3e88d;">"vf"</span> = <span style="color: #c3e88d;">"vifm"</span>;
</pre>
</div>

<p>
ncpamixer(TUI pulseaudio mixer)
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org62c5280"><span style="color: #c3e88d;">"ncpa"</span> = <span style="color: #c3e88d;">"ncpamixer"</span>;
</pre>
</div>
</div>
</li>
<li><a id="org10edaa1"></a>Git commands<br />
<div class="outline-text-5" id="text-9-4-2-3">
<p>
lazygit(terminal Git UI)
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org388284f"><span style="color: #c3e88d;">"lg"</span> = <span style="color: #c3e88d;">"lazygit"</span>;
</pre>
</div>

<p>
Add GitHub SSH key to SSH agent
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org349310c"><span style="color: #c3e88d;">"sshgit"</span> = <span style="color: #c3e88d;">"ssh-add ~/.ssh/githubkey"</span>;
</pre>
</div>

<p>
Typical command line Git abbrs
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orga6b51db"><span style="color: #c3e88d;">"g"</span> = <span style="color: #c3e88d;">"git"</span>;
<span style="color: #c3e88d;">"ga"</span> = <span style="color: #c3e88d;">"git add"</span>;
<span style="color: #c3e88d;">"gall"</span> = <span style="color: #c3e88d;">"git add --all"</span>;
<span style="color: #c3e88d;">"gc"</span> = <span style="color: #c3e88d;">"git clone"</span>;
<span style="color: #c3e88d;">"gmc"</span> = <span style="color: #c3e88d;">"gitmoji -c"</span>;
<span style="color: #c3e88d;">"gco"</span> = <span style="color: #c3e88d;">"git commit"</span>;
<span style="color: #c3e88d;">"gp"</span> = <span style="color: #c3e88d;">"git push"</span>;
<span style="color: #c3e88d;">"gb"</span> = <span style="color: #c3e88d;">"git branch"</span>;
<span style="color: #c3e88d;">"gd"</span> = <span style="color: #c3e88d;">"git diff"</span>;
<span style="color: #c3e88d;">"gdst"</span> = <span style="color: #c3e88d;">"git diff --staged"</span>;
<span style="color: #c3e88d;">"gst"</span> = <span style="color: #c3e88d;">"git status"</span>;
<span style="color: #c3e88d;">"gch"</span> = <span style="color: #c3e88d;">"git checkout"</span>;
<span style="color: #c3e88d;">"gf"</span> = <span style="color: #c3e88d;">"git fetch"</span>;
<span style="color: #c3e88d;">"gmv"</span> = <span style="color: #c3e88d;">"git mv"</span>;
<span style="color: #c3e88d;">"gl"</span> = <span style="color: #c3e88d;">"git log --graph --color=always"</span>;
<span style="color: #c3e88d;">"glo"</span> = <span style="color: #c3e88d;">"git log --graph --color=always --oneline"</span>;
</pre>
</div>
</div>
</li>
<li><a id="org3e9a5ff"></a>Screenshot commands<br />
<div class="outline-text-5" id="text-9-4-2-4">
<p>
Take screenshot and copy to clipboard
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org612f4b6"><span style="color: #c3e88d;">"scrotclipsel"</span> = <span style="color: #c3e88d;">"scrot -s ~/tmp.png &amp;&amp; xclip -selection clipboard -t image/png -i ~/tmp.png &amp;&amp; rm ~/tmp.png"</span>;
<span style="color: #c3e88d;">"scrotclip"</span> = <span style="color: #c3e88d;">"scrot ~/tmp.png &amp;&amp; xclip -selection clipboard -t image/png -i ~/tmp.png &amp;&amp; rm ~/tmp.png"</span>;
</pre>
</div>
</div>
</li>
<li><a id="orgbb1bef6"></a>NixOS commands<br />
<div class="outline-text-5" id="text-9-4-2-5">
<p>
Commands for Nix package manager
</p>

<div class="org-src-container">
<pre class="src src-nix" id="orgc128177"><span style="color: #c3e88d;">"nixre"</span> = <span style="color: #c3e88d;">"doas nixos-rebuild switch --flake"</span>;
<span style="color: #c3e88d;">"nixrt"</span> = <span style="color: #c3e88d;">"doas nixos-rebuild test --flake"</span>;
<span style="color: #c3e88d;">"dnixtrash"</span> = <span style="color: #c3e88d;">"doas nix-collect-garbage -d"</span>;
<span style="color: #c3e88d;">"nixtrash"</span> = <span style="color: #c3e88d;">"nix-collect-garbage -d"</span>;
</pre>
</div>
</div>
</li>
<li><a id="org5b4e749"></a>Misc commands<br />
<div class="outline-text-5" id="text-9-4-2-6">
<div class="org-src-container">
<pre class="src src-nix" id="orgc19e721"><span style="color: #c3e88d;">"tty-clock"</span> = <span style="color: #c3e88d;">"tty-clock -C 1 -c"</span>;
<span style="color: #c3e88d;">"rickroll"</span> = <span style="color: #c3e88d;">"curl -s -L https://raw.githubusercontent.com/keroserene/rickrollrc/master/roll.sh | bash"</span>;
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org800015f" class="outline-4">
<h4 id="org800015f"><span class="section-number-4">9.4.3</span> Plugins</h4>
<div class="outline-text-4" id="text-9-4-3">
<p>
Z is a replacement for cd that learns your habit, tracks the directories you visit to make you jump to the directory you frequently use easier
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orge2e7558">{
  <span style="color: #ffcb6b;">name</span> = <span style="color: #c3e88d;">"z"</span>;
  <span style="color: #ffcb6b;">src</span> = pkgs.fetchFromGitHub {
    <span style="color: #ffcb6b;">owner</span> = <span style="color: #c3e88d;">"jethrokuan"</span>;
    <span style="color: #ffcb6b;">repo</span> = <span style="color: #c3e88d;">"z"</span>;
    <span style="color: #ffcb6b;">rev</span> = <span style="color: #c3e88d;">"ddeb28a7b6a1f0ec6dae40c636e5ca4908ad160a"</span>;
    <span style="color: #ffcb6b;">sha256</span> = <span style="color: #c3e88d;">"0c5i7sdrsp0q3vbziqzdyqn4fmp235ax4mn4zslrswvn8g3fvdyh"</span>;
  };
}
</pre>
</div>

<p>
Integrate SSH agent with fish shell
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org0f3a4f7">{
  <span style="color: #ffcb6b;">name</span> = <span style="color: #c3e88d;">"fish-ssh-agent"</span>;
  <span style="color: #ffcb6b;">src</span> = pkgs.fetchFromGitHub {
    <span style="color: #ffcb6b;">owner</span> = <span style="color: #c3e88d;">"danhper"</span>;
    <span style="color: #ffcb6b;">repo</span> = <span style="color: #c3e88d;">"fish-ssh-agent"</span>;
    <span style="color: #ffcb6b;">rev</span> = <span style="color: #c3e88d;">"ce90d80aa9549c626f9c5fc5a964536de015a192"</span>;
    <span style="color: #ffcb6b;">sha256</span> = <span style="color: #c3e88d;">"03zj5g7dxkhqpp9lijxxlnyx4cc7nqpapj5iqfv7swavyximicyi"</span>;
  };
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orge27855d" class="outline-4">
<h4 id="orge27855d"><span class="section-number-4">9.4.4</span> Enable vi key bindings</h4>
<div class="outline-text-4" id="text-9-4-4">
<div class="org-src-container">
<pre class="src src-fish" id="orge2eee84"><span style="color: #82aaff;">fish_vi_key_bindings</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orga1d0c69" class="outline-4">
<h4 id="orga1d0c69"><span class="section-number-4">9.4.5</span> Startup message</h4>
<div class="outline-text-4" id="text-9-4-5">
<p>
Disable fish shell startup message
</p>
<div class="org-src-container">
<pre class="src src-fish" id="orgd47cb8d"><span style="color: #89DDFF;">set</span> <span style="color: #ffcb6b;">fish_greeting</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgeb183a3" class="outline-4">
<h4 id="orgeb183a3"><span class="section-number-4">9.4.6</span> Esc key delay</h4>
<div class="outline-text-4" id="text-9-4-6">
<p>
Set esc key delay
</p>
<div class="org-src-container">
<pre class="src src-fish" id="orgc60555f"><span style="color: #89DDFF;">set</span> <span style="color: #89DDFF; font-weight: bold;">-U</span> <span style="color: #ffcb6b;">fish_escape_delay_ms</span> <span style="color: #f78c6c; font-weight: bold;">10</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc635694" class="outline-3">
<h3 id="orgc635694"><span class="section-number-3">9.5</span> starship</h3>
<div class="outline-text-3" id="text-9-5">
<p>
starship is a minimal, blazing fast, and infinitely customizable prompt for any shell
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:
{
&lt;<span style="color: #f78c6c;">&lt;starship-enable&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;starship-fish-integration&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;starship-package&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;starship-add-newline&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;starship-prompt-character&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;starship-directory&gt;</span>&gt;
&lt;<span style="color: #f78c6c;">&lt;starship-nix-shell&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-orgfe57547" class="outline-4">
<h4 id="orgfe57547"><span class="section-number-4">9.5.1</span> Enable starship</h4>
<div class="outline-text-4" id="text-9-5-1">
<p>
Turn on to install starship
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgf6f8620"><span style="color: #ffcb6b;">programs.starship.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcac2afe" class="outline-4">
<h4 id="orgcac2afe"><span class="section-number-4">9.5.2</span> Enable fish shell integration</h4>
<div class="outline-text-4" id="text-9-5-2">
<div class="org-src-container">
<pre class="src src-nix" id="orgb4faf9a"><span style="color: #ffcb6b;">programs.starship.enableFishIntegration</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf2aea83" class="outline-4">
<h4 id="orgf2aea83"><span class="section-number-4">9.5.3</span> starship package</h4>
<div class="outline-text-4" id="text-9-5-3">
<div class="org-src-container">
<pre class="src src-nix" id="org28b256e"><span style="color: #ffcb6b;">programs.starship.package</span> = pkgs.unstable.starship;
</pre>
</div>
</div>
</div>
<div id="outline-container-org98dc157" class="outline-4">
<h4 id="org98dc157"><span class="section-number-4">9.5.4</span> Add newline at the start of the prompt</h4>
<div class="outline-text-4" id="text-9-5-4">
<div class="org-src-container">
<pre class="src src-nix" id="org64fa98d"><span style="color: #ffcb6b;">programs.starship.settings.add_newline</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgabd1bf3" class="outline-4">
<h4 id="orgabd1bf3"><span class="section-number-4">9.5.5</span> Prompt Character</h4>
<div class="outline-text-4" id="text-9-5-5">
<p>
Set prompt symbols and colors
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgf6d06be"><span style="color: #ffcb6b;">programs.starship.settings.character</span> = {
  <span style="color: #ffcb6b;">success_symbol</span> = <span style="color: #c3e88d;">"[&#120698;](</span><span style="color: #000000; background-color: #c792ea;">#c792ea</span><span style="color: #c3e88d;">)"</span>;
  <span style="color: #ffcb6b;">vicmd_symbol</span> = <span style="color: #c3e88d;">"[&#63708; ](bold green)"</span>;
  <span style="color: #ffcb6b;">error_symbol</span> = <span style="color: #c3e88d;">"[&#9747; ](bold red)"</span>;
};
</pre>
</div>
</div>
</div>
<div id="outline-container-orge611709" class="outline-4">
<h4 id="orge611709"><span class="section-number-4">9.5.6</span> Directory</h4>
<div class="outline-text-4" id="text-9-5-6">
<p>
The directory module  shows the path to your current directory.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org5b861fe"><span style="color: #ffcb6b;">programs.starship.settings.directory</span> = {
  <span style="color: #ffcb6b;">style</span> = <span style="color: #c3e88d;">"bold cyan"</span>;
};
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd3cbafb" class="outline-4">
<h4 id="orgd3cbafb"><span class="section-number-4">9.5.7</span> Nix shell</h4>
<div class="outline-text-4" id="text-9-5-7">
<p>
The nix<sub>shell</sub> module shows the nix-shell environment.
The module will be shown when inside a nix-shell environment
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org1539795"><span style="color: #ffcb6b;">programs.starship.settings.nix_shell</span> = {
  <span style="color: #ffcb6b;">disabled</span> = <span style="color: #82aaff;">false</span>;
  <span style="color: #ffcb6b;">symbol</span> = <span style="color: #c3e88d;">"&#62227; "</span>;
};
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org17f8de6" class="outline-3">
<h3 id="org17f8de6"><span class="section-number-3">9.6</span> Shell utilities</h3>
<div class="outline-text-3" id="text-9-6">
</div>
<div id="outline-container-org4cb5617" class="outline-4">
<h4 id="org4cb5617"><span class="section-number-4">9.6.1</span> Git</h4>
<div class="outline-text-4" id="text-9-6-1">
<p>
This directory is a git repository, nixpkgs is a git repository, Emacs, Linux is developed in git repository, most free(as in freedom) softwares uses Git nowadays.
Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:
{
  &lt;<span style="color: #f78c6c;">&lt;git-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;git-package&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;git-default-branch&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;git-push-ssh&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;git-name-mail&gt;</span>&gt;
}
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="orgdf69fa2"></a>Enable Git<br />
<div class="outline-text-5" id="text-9-6-1-1">
<p>
Turn on to install Git
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgca5e6d6"><span style="color: #ffcb6b;">programs.git.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</li>
<li><a id="orge96ffd6"></a>Git Package<br />
<div class="outline-text-5" id="text-9-6-1-2">
<p>
I use Git from nixos-unstable
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org255aa41"><span style="color: #ffcb6b;">programs.git.package</span> = pkgs.unstable.git;
</pre>
</div>
</div>
</li>
<li><a id="orgb1bdcc6"></a>Git Default Branch<br />
<div class="outline-text-5" id="text-9-6-1-3">
<p>
Many communities are renaming Default Git Branch from <code>master</code> to <code>main</code> to remove racially-charged language from software.
<a href="https://github.com/github/renaming">github/renaming</a>
<a href="https://www.zdnet.com/article/github-to-replace-master-with-alternative-term-to-avoid-slavery-references/">Github to replace &ldquo;master&rdquo; with alternative term to avoid slavery references</a>
It&rsquo;s very easy to do that on user-level. Why not start using main from today? There aren&rsquo;t any reason to not start using <code>main</code> for new personal projects.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org898d906"><span style="color: #ffcb6b;">programs.git.extraConfig.init.defaultBranch</span> = <span style="color: #c3e88d;">"main"</span>;
</pre>
</div>
</div>
</li>
<li><a id="orgd5e649f"></a>Use SSH only when pushing<br />
<div class="outline-text-5" id="text-9-6-1-4">
<p>
I use SSH to push into Git repository.
This config Git default to SSH to push.
Note that it is <code>pushinsteadOf</code>
If you use just <code>insteadOf</code>, it will ask SSH key even when cloning.
</p>

<div class="org-src-container">
<pre class="src src-nix" id="org3f15667">programs.git.extraConfig.url.<span style="color: #c3e88d;">"git@github.com:"</span> = {
    <span style="color: #ffcb6b;">pushinsteadOf</span> = <span style="color: #c3e88d;">"https://github.com/"</span>;
};
</pre>
</div>
</div>
</li>
<li><a id="org85e46a3"></a>User name,Email<br />
<div class="outline-text-5" id="text-9-6-1-5">
<p>
Git uses email to identify your commits, and associate commits with your accounts e.g. GitHub GitLab
Email and User Name will be visible in any your commits.
If you want to keep your real name private, use any text like GitHub user name.
To GitHub/GitLab be able to associate your commits with your accounts, you have to either:
</p>
<ul class="org-ul">
<li>Use your real mail address register on GitHub/GitLab</li>
<li>Use noreply mail addres</li>
</ul>
<p>
I&rsquo;m still not ready to migrate to GitLab, so I use GitHub noreply mail address
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org5e6c38d"><span style="color: #ffcb6b;">programs.git.userName</span> = <span style="color: #c3e88d;">"btwiusegentoo"</span>;
<span style="color: #ffcb6b;">programs.git.userEmail</span> = <span style="color: #c3e88d;">"66811008+btwiusegentoo@users.noreply.github.com"</span>;
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org2f2abed" class="outline-4">
<h4 id="org2f2abed"><span class="section-number-4">9.6.2</span> bat</h4>
<div class="outline-text-4" id="text-9-6-2">
<p>
A cat Linux command clone with syntax highlighting and Git integration
</p>
<ul class="org-ul">
<li><a href="#org853c84b">Theme</a></li>
</ul>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:

{
  &lt;<span style="color: #f78c6c;">&lt;bat-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;bat-italic-text&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;bat-theme-config&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;bat-theme-fetch&gt;</span>&gt;
}
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="orgb86ae0a"></a>Enable bat<br />
<div class="outline-text-5" id="text-9-6-2-1">
<p>
Turn on to install bat
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org885b60e"><span style="color: #ffcb6b;">programs.bat.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</li>
<li><a id="org3e871cb"></a>Use italic text on the terminal<br />
<div class="outline-text-5" id="text-9-6-2-2">
<p>
(Note, it isn&rsquo;t supported on all terminals)
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org325c509"><span style="color: #ffcb6b;">programs.bat.config.italic-text</span> = <span style="color: #c3e88d;">"always"</span>;
</pre>
</div>
</div>
</li>
<li><a id="org1359066"></a>Customize bat style<br />
<div class="outline-text-5" id="text-9-6-2-3">
<p>
Show line numbers, Git modifications and file header
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org81c75f1"><span style="color: #ffcb6b;">programs.bat.config.style</span> = <span style="color: #c3e88d;">"numbers,changes,header"</span>;
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org813ccb3" class="outline-4">
<h4 id="org813ccb3"><span class="section-number-4">9.6.3</span> fzf</h4>
<div class="outline-text-4" id="text-9-6-3">
<p>
fzf is a general-purpose command line fuzzy finder.
</p>
<ul class="org-ul">
<li><a href="#org5eae7b8">Colors</a></li>
</ul>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  &lt;<span style="color: #f78c6c;">&lt;fzf-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;fzf-fish-integration&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;fzf-use-fd&gt;</span>&gt;

  <span style="color: #ffcb6b;">programs.fzf.defaultOptions</span> = [
    &lt;<span style="color: #f78c6c;">&lt;fzf-colors&gt;</span>&gt;
  ];
}
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="org6de155a"></a>Enable fzf<br />
<div class="outline-text-5" id="text-9-6-3-1">
<p>
Turn on to install fzf
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org9ed67c7"><span style="color: #ffcb6b;">programs.fzf.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</li>
<li><a id="org76cbee5"></a>Fish shell integration<br />
<div class="outline-text-5" id="text-9-6-3-2">
<p>
Turn on to enable fish shell integration.
Most usable one is &lt;C-t&gt; to search current directory.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org6972783"><span style="color: #ffcb6b;">programs.fzf.enableFishIntegration</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</li>
<li><a id="org5ba3dea"></a>Use fd instead of default find<br />
<div class="outline-text-5" id="text-9-6-3-3">
<p>
Requires fd installed.
It is faster than default find
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org9ec4261"><span style="color: #ffcb6b;">programs.fzf.defaultCommand</span> = <span style="color: #c3e88d;">"fd --type f"</span>;
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org293d983" class="outline-4">
<h4 id="org293d983"><span class="section-number-4">9.6.4</span> lsd</h4>
<div class="outline-text-4" id="text-9-6-4">
<p>
Simply put, lsd is a better <code>ls</code> command with colors, nerdfont icons, written in Rust
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  &lt;<span style="color: #f78c6c;">&lt;lsd-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;lsd-aliases&gt;</span>&gt;
}
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="orgc03962a"></a>Enable lsd<br />
<div class="outline-text-5" id="text-9-6-4-1">
<p>
Enable to install lsd
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org381f6a5"><span style="color: #ffcb6b;">programs.lsd.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</li>
<li><a id="org066361e"></a>lsd aliases<br />
<div class="outline-text-5" id="text-9-6-4-2">
<p>
Turn on to enable lsd aliases.
I want to use my own aliases, so I disable it.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org3fd3e03"><span style="color: #ffcb6b;">programs.lsd.enableAliases</span> = <span style="color: #82aaff;">false</span>;
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org9d88b47" class="outline-4">
<h4 id="org9d88b47"><span class="section-number-4">9.6.5</span> tmux</h4>
<div class="outline-text-4" id="text-9-6-5">
<p>
tmux is a terminal multiplexer.
It lets you switch easily between several programs in one terminal,
detach them (they keep running in the background) and reattach them to a different terminal.
</p>
<div class="org-src-container">
<pre class="src src-nix">{ pkgs, ... }:

{
  &lt;<span style="color: #f78c6c;">&lt;tmux-enable&gt;</span>&gt;
  <span style="color: #ffcb6b;">programs.tmux.plugins</span> = <span style="color: #89DDFF;">with</span> pkgs; [
    &lt;<span style="color: #f78c6c;">&lt;vim-tmux-navigator&gt;</span>&gt;
    &lt;<span style="color: #f78c6c;">&lt;tmux-prefix-highlight&gt;</span>&gt;
  ];
  &lt;<span style="color: #f78c6c;">&lt;tmux-vi-keymode&gt;</span>&gt;
  <span style="color: #ffcb6b;">programs.tmux.extraConfig</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">      &lt;&lt;tmux-truecolor&gt;&gt;</span>
<span style="color: #c3e88d;">      &lt;&lt;tmux-colors-source&gt;&gt;</span>
<span style="color: #c3e88d;">      &lt;&lt;tmux-keybinds&gt;&gt;</span>
<span style="color: #c3e88d;">  ''</span>;
}
</pre>
</div>
</div>
<ol class="org-ol">
<li><a id="org550b332"></a>Enable tmux<br />
<div class="outline-text-5" id="text-9-6-5-1">
<div class="org-src-container">
<pre class="src src-nix" id="org1768a50"><span style="color: #ffcb6b;">programs.tmux.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</li>
<li><a id="orgc019142"></a>Vim tmux navigator<br />
<div class="outline-text-5" id="text-9-6-5-2">
<p>
This plugin provides the following mappings which allow you to move between Vim panes and tmux splits seamlessly like this:
</p>
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #ffcb6b;">&lt;ctrl-h&gt;</span> =&gt; Left
<span style="color: #ffcb6b;">&lt;ctrl-j&gt;</span> =&gt; Down
<span style="color: #ffcb6b;">&lt;ctrl-k&gt;</span> =&gt; Up
<span style="color: #ffcb6b;">&lt;ctrl-l&gt;</span> =&gt; Right
<span style="color: #ffcb6b;">&lt;ctrl-\&gt;</span> =&gt; Previous split
</pre>
</div>

<p>
install plugin
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org88d27b6">tmuxPlugins.vim-tmux-navigator
</pre>
</div>
</div>
</li>
<li><a id="orgb6c52ec"></a>prefix highlight<br />
<div class="outline-text-5" id="text-9-6-5-3">
<p>
Plugin that highlights when you press tmux prefix key.
Install:
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org54a27e8">tmuxPlugins.prefix-highlight
</pre>
</div>
</div>
</li>
<li><a id="org5d5e0af"></a>vi key mode<br />
<div class="outline-text-5" id="text-9-6-5-4">
<p>
Enable a set of vi-like bindings for navigating a buffer in a window
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orge604991"><span style="color: #ffcb6b;">programs.tmux.keyMode</span> = <span style="color: #c3e88d;">"vi"</span>;
</pre>
</div>
</div>
</li>
<li><a id="orge7c8c5d"></a>Enable true color<br />
<div class="outline-text-5" id="text-9-6-5-5">
<p>
This is necessary to make neovim true color work inside tmux
</p>
<div class="org-src-container">
<pre class="src src-conf" id="orgdcf5b28">set-option -g default-terminal <span style="color: #c3e88d;">"screen-256color"</span>
set -ga terminal-overrides <span style="color: #c3e88d;">",*256col*:Tc"</span>
</pre>
</div>
</div>
</li>
<li><a id="orgf3ad193"></a>keybinds<br />
<div class="outline-text-5" id="text-9-6-5-6">
<p>
I use Ctrl Space as prefix
</p>
<div class="org-src-container">
<pre class="src src-conf" id="org560dd82">set-option -g prefix C-Space
bind C-Space send-prefix
bind s split-window -h
bind v split-window -v
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgc4dea09" class="outline-2">
<h2 id="orgc4dea09"><span class="section-number-2">10</span> xmonad</h2>
<div class="outline-text-2" id="text-10">
<p>
I use xmonad, the very hackable dynamically tiling window manager written/configured in Haskell
Tiling window manager automates the window organization
</p>
</div>
<div id="outline-container-org5de84d8" class="outline-3">
<h3 id="org5de84d8"><span class="section-number-3">10.1</span> Install xmonad/ Set config file path</h3>
<div class="outline-text-3" id="text-10-1">
<p>
home-manager have a xmonad module. install it:
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  <span style="color: #ffcb6b;">xsession.windowManager.xmonad</span> = {
    <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">enableContribAndExtras</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">config</span> = <span style="color: #f78c6c;">../../haskell/xmonad.hs</span>;
  };
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org3ee31d0" class="outline-3">
<h3 id="org3ee31d0"><span class="section-number-3">10.2</span> imports</h3>
<div class="outline-text-3" id="text-10-2">
<p>
These are the modules that I import so I can use that functionality later
It&rsquo;s always a better practice to use explicit imports for Haskell
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="orgf36144e"><span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">Control.Arrow</span>                  ( first )
<span style="color: #89DDFF;">import</span> <span style="color: #89DDFF;">qualified</span> <span style="color: #c792ea;">Data.Map</span>                      <span style="color: #89DDFF;">as</span> <span style="color: #c792ea;">M</span>
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">System.Exit</span>                    ( exitSuccess )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad</span>                  <span style="color: #89DDFF;">hiding</span> ( (<span style="color: #ffcb6b;">|||</span>) )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Actions.Navigation2D</span>    ( <span style="color: #c792ea;">Direction2D</span>(<span style="color: #c792ea;">L</span>, <span style="color: #c792ea;">R</span>)
                                                , windowGo
                                                , withNavigation2DConfig
                                                )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Hooks.DynamicLog</span>
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Hooks.EwmhDesktops</span>      ( ewmh
                                                , fullscreenEventHook
                                                )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Hooks.ManageDocks</span>       ( avoidStruts
                                                , docks
                                                )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Hooks.ManageHelpers</span>     ( doFullFloat
                                                , isFullscreen
                                                )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Layout.BinarySpacePartition</span>
                                                ( emptyBSP
                                                , <span style="color: #c792ea;">Rotate</span>(<span style="color: #c792ea;">Rotate</span>)
                                                , <span style="color: #c792ea;">Swap</span>(<span style="color: #c792ea;">Swap</span>)
                                                )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Layout.LayoutCombinators</span>
                                                ( (<span style="color: #ffcb6b;">|||</span>)
                                                , <span style="color: #c792ea;">JumpToLayout</span>(<span style="color: #c792ea;">JumpToLayout</span>)
                                                )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Layout.NoBorders</span>        ( smartBorders )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Layout.Spacing</span>          ( spacingRaw
                                                , <span style="color: #c792ea;">Border</span>(<span style="color: #c792ea;">Border</span>)
                                                )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Layout.Spiral</span>           ( spiral )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Prompt</span>
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Prompt.ConfirmPrompt</span>    ( confirmPrompt )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Prompt.FuzzyMatch</span>       ( fuzzyMatch )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Prompt.Man</span>              ( manPrompt )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Prompt.Shell</span>            ( shellPrompt )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Prompt.Unicode</span>          ( mkUnicodePrompt )
<span style="color: #89DDFF;">import</span> <span style="color: #89DDFF;">qualified</span> <span style="color: #c792ea;">XMonad.StackSet</span>               <span style="color: #89DDFF;">as</span> <span style="color: #c792ea;">W</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span><span style="color: #89DDFF;">import</span><span style="color: #ffcb6b;">-</span>cursor<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span><span style="color: #89DDFF;">import</span><span style="color: #ffcb6b;">-</span>scratchpads<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Util.Run</span>                ( hPutStrLn
                                                , spawnPipe
                                                )
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Util.SpawnOnce</span>          ( spawnOnce )
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span><span style="color: #89DDFF;">import</span><span style="color: #ffcb6b;">-</span>ezconfig<span style="color: #ffcb6b;">&gt;&gt;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0963d45" class="outline-3">
<h3 id="org0963d45"><span class="section-number-3">10.3</span> Workspaces</h3>
<div class="outline-text-3" id="text-10-3">
<p>
Set workspace names to zero-width space.
This makes possible to show workspaces as nerd font orb symbol in xmobar
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org7bb0d78"><span style="color: #82aaff;">myWorkspaces</span> <span style="color: #ffcb6b;">::</span> [<span style="color: #c792ea;">String</span>]
<span style="color: #82aaff;">myWorkspaces</span> <span style="color: #ffcb6b;">=</span>
  [ <span style="color: #c3e88d;">"\8203"</span>
  , <span style="color: #c3e88d;">"\8203\8203"</span>
  , <span style="color: #c3e88d;">"\8203\8203\8203"</span>
  , <span style="color: #c3e88d;">"\8203\8203\8203\8203"</span>
  , <span style="color: #c3e88d;">"\8203\8203\8203\8203\8203"</span>
  , <span style="color: #c3e88d;">"\8203\8203\8203\8203\8203\8203"</span>
  , <span style="color: #c3e88d;">"\8203\8203\8203\8203\8203\8203\8203"</span>
  , <span style="color: #c3e88d;">"\8203\8203\8203\8203\8203\8203\8203\8203"</span>
  , <span style="color: #c3e88d;">"\8203\8203\8203\8203\8203\8203\8203\8203\8203"</span>
  ]
</pre>
</div>

<p>
Show workspace names as purple/pink orb in xmobar
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org96c61b7"><span style="color: #82aaff;">myLogHook</span> h <span style="color: #ffcb6b;">=</span> dynamicLogWithPP xmobarPP
  { ppOutput          <span style="color: #ffcb6b;">=</span> hPutStrLn h
  , ppSort            <span style="color: #ffcb6b;">=</span> fmap (namedScratchpadFilterOutWorkspace <span style="color: #ffcb6b;">.</span>) (ppSort def) <span style="color: #676E95;">-- </span><span style="color: #676E95;">hide nsp</span>
  , ppCurrent         <span style="color: #ffcb6b;">=</span> xmobarColor <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #c792ea;">#c792ea</span><span style="color: #c3e88d;">"</span> <span style="color: #c3e88d;">""</span> <span style="color: #ffcb6b;">.</span> wrap <span style="color: #c3e88d;">"\61713"</span> <span style="color: #c3e88d;">" "</span>  <span style="color: #676E95;">-- </span><span style="color: #676E95;">Current workspace</span>
  , ppVisible         <span style="color: #ffcb6b;">=</span> xmobarColor <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #ab47bc;">#ab47bc</span><span style="color: #c3e88d;">"</span> <span style="color: #c3e88d;">""</span> <span style="color: #ffcb6b;">.</span> wrap <span style="color: #c3e88d;">"\61842"</span> <span style="color: #c3e88d;">" "</span>
  , ppHidden          <span style="color: #ffcb6b;">=</span> xmobarColor <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #ab47bc;">#ab47bc</span><span style="color: #c3e88d;">"</span> <span style="color: #c3e88d;">""</span> <span style="color: #ffcb6b;">.</span> wrap <span style="color: #c3e88d;">"\61842"</span> <span style="color: #c3e88d;">" "</span>
  , ppHiddenNoWindows <span style="color: #ffcb6b;">=</span> xmobarColor <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #c3e88d;">"</span> <span style="color: #c3e88d;">""</span> <span style="color: #ffcb6b;">.</span> wrap <span style="color: #c3e88d;">"\61915"</span> <span style="color: #c3e88d;">" "</span>
  , ppLayout          <span style="color: #ffcb6b;">=</span> xmobarColor <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #82aaff;">#82aaff</span><span style="color: #c3e88d;">"</span> <span style="color: #c3e88d;">""</span>
  , ppSep             <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"  |  "</span>
  , ppTitle           <span style="color: #ffcb6b;">=</span> mempty
  }
</pre>
</div>
</div>
</div>
<div id="outline-container-org4e9ad5d" class="outline-3">
<h3 id="org4e9ad5d"><span class="section-number-3">10.4</span> xmonad prompt</h3>
<div class="outline-text-3" id="text-10-4">
<p>
xmonad prompt is a prompt library like dmenu.
Can be used to launch apps, search manpage, select emojis, etc
</p>
<ul class="org-ul">
<li><a href="#orgd677be6">Fonts</a></li>
<li><a href="#org8cd5162">Colors</a></li>
</ul>
</div>
<div id="outline-container-orgc7d6ddf" class="outline-4">
<h4 id="orgc7d6ddf"><span class="section-number-4">10.4.1</span> Set prompt height</h4>
<div class="outline-text-4" id="text-10-4-1">
<div class="org-src-container">
<pre class="src src-haskell" id="org25e5c4a"><span style="color: #82aaff;">myPromptHeight</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">Dimension</span>
<span style="color: #82aaff;">myPromptHeight</span> <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">30</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org720c02b" class="outline-4">
<h4 id="org720c02b"><span class="section-number-4">10.4.2</span> keymap</h4>
<div class="outline-text-4" id="text-10-4-2">
<p>
Very basic keymap
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="orgab0b952"><span style="color: #82aaff;">myXPKeymap</span> <span style="color: #ffcb6b;">=</span>
  M.fromList
    <span style="color: #ffcb6b;">$</span>  map
         (first <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">(,)</span> <span style="color: #f78c6c; font-weight: bold;">0</span>)
         [ (xK_Return   , setSuccess <span style="color: #c792ea;">True</span> <span style="color: #ffcb6b;">&gt;&gt;</span> setDone <span style="color: #c792ea;">True</span>)
         , (xK_KP_Enter , setSuccess <span style="color: #c792ea;">True</span> <span style="color: #ffcb6b;">&gt;&gt;</span> setDone <span style="color: #c792ea;">True</span>)
         , (xK_BackSpace, deleteString <span style="color: #c792ea;">Prev</span>)
         , (xK_Delete   , deleteString <span style="color: #c792ea;">Prev</span>)
         , (xK_Left     , moveCursor <span style="color: #c792ea;">Prev</span>)
         , (xK_Right    , moveCursor <span style="color: #c792ea;">Next</span>)
         , (xK_Down     , moveHistory W.focusUp')
         , (xK_Up       , moveHistory W.focusDown')
         , (xK_Escape   , quit)
         ]
    <span style="color: #ffcb6b;">++</span> map (first <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">(,)</span> controlMask) [(xK_v, pasteString)]
</pre>
</div>
</div>
</div>
<div id="outline-container-org659462f" class="outline-4">
<h4 id="org659462f"><span class="section-number-4">10.4.3</span> Config</h4>
<div class="outline-text-4" id="text-10-4-3">
<p>
Set xmonad prompt attributes
See <a href="https://hackage.haskell.org/package/xmonad-contrib-0.16/docs/XMonad-Prompt.html#t:XPConfig">here</a> for documentation
</p>

<div class="org-src-container">
<pre class="src src-haskell" id="orgdd7e8ae"><span style="color: #82aaff;">myXPConfig</span> <span style="color: #ffcb6b;">=</span> def { font              <span style="color: #ffcb6b;">=</span> myFont
                 <span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>prompt<span style="color: #ffcb6b;">-</span>color<span style="color: #ffcb6b;">&gt;&gt;</span>
                 , promptKeymap      <span style="color: #ffcb6b;">=</span> myXPKeymap
                 , promptBorderWidth <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">0</span>
                 , position          <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">Top</span>
                 , height            <span style="color: #ffcb6b;">=</span> myPromptHeight
                 , autoComplete      <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">Nothing</span>
                 , searchPredicate   <span style="color: #ffcb6b;">=</span> fuzzyMatch
                 , alwaysHighlight   <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">True</span>
                 }
</pre>
</div>

<p>
Same config as above, but with emoji font for unicode prompt
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org4b1d5b9"><span style="color: #82aaff;">myEmojiXPConfig</span> <span style="color: #ffcb6b;">=</span> def { font              <span style="color: #ffcb6b;">=</span> myEmojiFont
                      <span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>prompt<span style="color: #ffcb6b;">-</span>color<span style="color: #ffcb6b;">&gt;&gt;</span>
                      , promptKeymap      <span style="color: #ffcb6b;">=</span> myXPKeymap
                      , promptBorderWidth <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">0</span>
                      , position          <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">Top</span>
                      , height            <span style="color: #ffcb6b;">=</span> myPromptHeight
                      , autoComplete      <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">Nothing</span>
                      , searchPredicate   <span style="color: #ffcb6b;">=</span> fuzzyMatch
                      , alwaysHighlight   <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">True</span>
                      }
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org24919b1" class="outline-3">
<h3 id="org24919b1"><span class="section-number-3">10.5</span> Set default terminal</h3>
<div class="outline-text-3" id="text-10-5">
<p>
Set <a href="#orgf7aabbb">9.1</a> as default terminal in xmonad
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="orgf479b3b"><span style="color: #82aaff;">myTerminal</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">String</span>
<span style="color: #82aaff;">myTerminal</span> <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"alacritty"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0f7d21f" class="outline-3">
<h3 id="org0f7d21f"><span class="section-number-3">10.6</span> Set gaps</h3>
<div class="outline-text-3" id="text-10-6">
<p>
Set the gap between windows.
spacingRaw adds spacing to windows.
This function needs to be applied to the layout at layoutHook.
I don&rsquo;t apply it to Full screen layout
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org3ce68ae"><span style="color: #82aaff;">myGaps</span> <span style="color: #ffcb6b;">=</span> spacingRaw <span style="color: #c792ea;">False</span> (<span style="color: #c792ea;">Border</span> <span style="color: #f78c6c; font-weight: bold;">4</span> <span style="color: #f78c6c; font-weight: bold;">4</span> <span style="color: #f78c6c; font-weight: bold;">4</span> <span style="color: #f78c6c; font-weight: bold;">4</span>) <span style="color: #c792ea;">True</span> (<span style="color: #c792ea;">Border</span> <span style="color: #f78c6c; font-weight: bold;">4</span> <span style="color: #f78c6c; font-weight: bold;">4</span> <span style="color: #f78c6c; font-weight: bold;">4</span> <span style="color: #f78c6c; font-weight: bold;">4</span>) <span style="color: #c792ea;">True</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgad6fd14" class="outline-3">
<h3 id="orgad6fd14"><span class="section-number-3">10.7</span> Keybindings</h3>
<div class="outline-text-3" id="text-10-7">
<p>
Set Super key as xmonad mod key
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org60c9238"><span style="color: #82aaff;">myModMask</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">KeyMask</span>
<span style="color: #82aaff;">myModMask</span> <span style="color: #ffcb6b;">=</span> mod4Mask
</pre>
</div>

<p>
I use EZConfig that allows simpler, emacs-style keybinding description
See <a href="https://hackage.haskell.org/package/xmonad-contrib-0.16/docs/XMonad-Util-EZConfig.html#v:mkKeymap">here</a> for further information
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="orgc70cd3d"><span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Util.EZConfig</span>           ( additionalKeysP )
</pre>
</div>

<div class="org-src-container">
<pre class="src src-haskell" id="org326495f"><span style="color: #82aaff;">myKeys</span> <span style="color: #ffcb6b;">::</span> [(<span style="color: #c792ea;">String</span>, <span style="color: #c792ea;">X</span> <span style="color: #c792ea;">()</span>)]
<span style="color: #82aaff;">myKeys</span> <span style="color: #ffcb6b;">=</span>
  [
    (<span style="color: #c3e88d;">"M-&lt;Return&gt;"</span>, spawn myTerminal)
  , (<span style="color: #c3e88d;">"M-S-c"</span>, kill) <span style="color: #676E95;">-- </span><span style="color: #676E95;">Close focused application</span>
  , (<span style="color: #c3e88d;">"M-o"</span>, spawn <span style="color: #c3e88d;">"light-locker-command -l"</span>) <span style="color: #676E95;">-- </span><span style="color: #676E95;">lock screen</span>
  , (<span style="color: #c3e88d;">"M-S-q"</span>, confirmPrompt myXPConfig <span style="color: #c3e88d;">"exit"</span> <span style="color: #ffcb6b;">$</span> io exitSuccess) <span style="color: #676E95;">-- </span><span style="color: #676E95;">prompt to kill xmonad</span>
  , (<span style="color: #c3e88d;">"M-q"</span>, spawn <span style="color: #c3e88d;">"xmonad --recompile; xmonad --restart"</span>) <span style="color: #676E95;">-- </span><span style="color: #676E95;">Recompile and restart xmonad</span>

  , (<span style="color: #c3e88d;">"M-v"</span>, spawn <span style="color: #ffcb6b;">$</span> myTerminal <span style="color: #ffcb6b;">++</span> <span style="color: #c3e88d;">" -e nvim"</span>)
  , (<span style="color: #c3e88d;">"M-z"</span>, spawn <span style="color: #c3e88d;">"emacsclient -c -a emacs ~/"</span>)
  , (<span style="color: #c3e88d;">"M-w"</span>, spawn <span style="color: #c3e88d;">"emacsclient -c -a emacs"</span>)
  , (<span style="color: #c3e88d;">"M-b"</span>, spawn <span style="color: #c3e88d;">"qutebrowser"</span>)
  , (<span style="color: #c3e88d;">"M-e"</span>, spawn <span style="color: #c3e88d;">"~/.emacs_anywhere/bin/run"</span>)

  , (<span style="color: #c3e88d;">"M-C-t"</span>, namedScratchpadAction myScratchPads <span style="color: #c3e88d;">"terminal"</span>)
  , (<span style="color: #c3e88d;">"M-C-s"</span>, namedScratchpadAction myScratchPads <span style="color: #c3e88d;">"mixer"</span>)
  , (<span style="color: #c3e88d;">"M-C-h"</span>, namedScratchpadAction myScratchPads <span style="color: #c3e88d;">"bottom"</span>)
  , (<span style="color: #c3e88d;">"M-C-n"</span>, namedScratchpadAction myScratchPads <span style="color: #c3e88d;">"vifm"</span>)

  , (<span style="color: #c3e88d;">"M-d"</span>, shellPrompt myXPConfig)
  , (<span style="color: #c3e88d;">"M-C-m"</span>, manPrompt myXPConfig)
  , (<span style="color: #c3e88d;">"M-C-e"</span>, mkUnicodePrompt <span style="color: #c3e88d;">"xsel"</span> [<span style="color: #c3e88d;">"-b"</span>] <span style="color: #c3e88d;">"/etc/UnicodeData.txt"</span> myEmojiXPConfig) <span style="color: #676E95;">-- </span><span style="color: #676E95;">copy emoji to clipboard</span>

  , (<span style="color: #c3e88d;">"&lt;XF86AudioLowerVolume&gt;"</span>, spawn <span style="color: #c3e88d;">"amixer -q sset Master 2%-"</span>) <span style="color: #676E95;">-- </span><span style="color: #676E95;">fn+a on HHKB Dvorak</span>
  , (<span style="color: #c3e88d;">"&lt;XF86AudioRaiseVolume&gt;"</span>, spawn <span style="color: #c3e88d;">"amixer -q sset Master 2%+"</span>) <span style="color: #676E95;">-- </span><span style="color: #676E95;">fn+o on HHKB Dvorak</span>
  , (<span style="color: #c3e88d;">"&lt;XF86AudioMute&gt;"</span>, spawn <span style="color: #c3e88d;">"amixer set Master toggle"</span>) <span style="color: #676E95;">-- </span><span style="color: #676E95;">fn+e on HHKB Dvorak</span>

  , (<span style="color: #c3e88d;">"&lt;XF86MonBrightnessUp&gt;"</span>, spawn <span style="color: #c3e88d;">"xbacklight -inc 5"</span>)
  , (<span style="color: #c3e88d;">"&lt;XF86MonBrightnessDown&gt;"</span>, spawn <span style="color: #c3e88d;">"xbacklight -dec 5"</span>)

  , (<span style="color: #c3e88d;">"C-&lt;Print&gt;"</span>, spawn <span style="color: #c3e88d;">"scrot -s screen_%Y-%m-%d-%H-%M-%S.png -e 'mv $f ~/Pictures/'"</span>) <span style="color: #676E95;">-- </span><span style="color: #676E95;">ctrl+fn+c on HHKB Dvorak</span>
  , (<span style="color: #c3e88d;">"M-&lt;Print&gt;"</span>, spawn <span style="color: #c3e88d;">"scrot tmp.png -e 'xclip $f &amp;&amp; rm $f'"</span>) <span style="color: #676E95;">-- </span><span style="color: #676E95;">mod+fn+c on HHKB Dvorak</span>

  , (<span style="color: #c3e88d;">"M-S-&lt;F1&gt;"</span>, spawn <span style="color: #c3e88d;">"setxkbmap dvorak"</span>) <span style="color: #676E95;">-- </span><span style="color: #676E95;">Switch to Dvorak layout</span>
  , (<span style="color: #c3e88d;">"M-S-&lt;F2&gt;"</span>, spawn <span style="color: #c3e88d;">"setxkbmap us"</span>) <span style="color: #676E95;">-- </span><span style="color: #676E95;">Switch to qwerty layout</span>
  , (<span style="color: #c3e88d;">"M-S-&lt;F3&gt;"</span>, spawn <span style="color: #c3e88d;">"xinput --disable 11"</span>) <span style="color: #676E95;">-- </span><span style="color: #676E95;">Disable trackpad on laptop</span>
  , (<span style="color: #c3e88d;">"M-S-&lt;F4&gt;"</span>, spawn <span style="color: #c3e88d;">"xinput --enable 11"</span>) <span style="color: #676E95;">-- </span><span style="color: #676E95;">Enable trackpad on laptop</span>

  , (<span style="color: #c3e88d;">"M-&lt;Space&gt;"</span>, sendMessage <span style="color: #c792ea;">NextLayout</span>) <span style="color: #676E95;">-- </span><span style="color: #676E95;">Change to next layout in order</span>

  , (<span style="color: #c3e88d;">"M-t"</span>, sendMessage <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">JumpToLayout</span> <span style="color: #c3e88d;">"Spacing Tall"</span>)
  , (<span style="color: #c3e88d;">"M-f"</span>, sendMessage <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">JumpToLayout</span> <span style="color: #c3e88d;">"Full"</span>)
  , (<span style="color: #c3e88d;">"M-m"</span>, sendMessage <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">JumpToLayout</span> <span style="color: #c3e88d;">"Mirror Spacing Tall"</span>)
  , (<span style="color: #c3e88d;">"M-n"</span>, sendMessage <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">JumpToLayout</span> <span style="color: #c3e88d;">"Spacing BSP"</span>)
  , (<span style="color: #c3e88d;">"M-s"</span>, sendMessage <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">JumpToLayout</span> <span style="color: #c3e88d;">"Spacing Spiral"</span>)

  , (<span style="color: #c3e88d;">"M-S-t"</span>, withFocused <span style="color: #ffcb6b;">$</span> windows <span style="color: #ffcb6b;">.</span> W.sink) <span style="color: #676E95;">-- </span><span style="color: #676E95;">unfloat window</span>

  , (<span style="color: #c3e88d;">"M-r"</span>, refresh)

  <span style="color: #676E95;">-- </span><span style="color: #676E95;">focus horizontally like i3wm</span>
  , (<span style="color: #c3e88d;">"M-h"</span>, windowGo <span style="color: #c792ea;">L</span> <span style="color: #c792ea;">False</span>)
  , (<span style="color: #c3e88d;">"M-l"</span>, windowGo <span style="color: #c792ea;">R</span> <span style="color: #c792ea;">False</span>)

  , (<span style="color: #c3e88d;">"M-j"</span>, windows W.focusDown)
  , (<span style="color: #c3e88d;">"M-k"</span>, windows W.focusUp)
  , (<span style="color: #c3e88d;">"M-g"</span>, windows W.focusMaster)
  , (<span style="color: #c3e88d;">"M-S-j"</span>, windows W.swapDown)
  , (<span style="color: #c3e88d;">"M-S-k"</span>, windows W.swapUp)
  , (<span style="color: #c3e88d;">"M-S-g"</span>, windows W.swapMaster)

  , (<span style="color: #c3e88d;">"M-S-h"</span>, sendMessage <span style="color: #c792ea;">Shrink</span>)
  , (<span style="color: #c3e88d;">"M-S-l"</span>, sendMessage <span style="color: #c792ea;">Expand</span>)

  , (<span style="color: #c3e88d;">"M-,"</span>, <span style="color: #89DDFF;">do</span>
        layout <span style="color: #ffcb6b;">&lt;-</span> getActiveLayoutDescription
        <span style="color: #89DDFF;">case</span> layout <span style="color: #89DDFF;">of</span>
          <span style="color: #c3e88d;">"Spacing BSP"</span> <span style="color: #ffcb6b;">-&gt;</span> sendMessage <span style="color: #c792ea;">Swap</span>
          <span style="color: #89DDFF;">_</span>             <span style="color: #ffcb6b;">-&gt;</span> sendMessage <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">IncMasterN</span> <span style="color: #f78c6c; font-weight: bold;">1</span>
    )
  , (<span style="color: #c3e88d;">"M-."</span>, <span style="color: #89DDFF;">do</span>
        layout <span style="color: #ffcb6b;">&lt;-</span> getActiveLayoutDescription
        <span style="color: #89DDFF;">case</span> layout <span style="color: #89DDFF;">of</span>
          <span style="color: #c3e88d;">"Spacing BSP"</span> <span style="color: #ffcb6b;">-&gt;</span> sendMessage <span style="color: #c792ea;">Rotate</span>
          <span style="color: #89DDFF;">_</span>             <span style="color: #ffcb6b;">-&gt;</span> sendMessage <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">IncMasterN</span> (<span style="color: #ffcb6b;">-</span><span style="color: #f78c6c; font-weight: bold;">1</span>)
    )
  ]
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcb52ee7" class="outline-3">
<h3 id="orgcb52ee7"><span class="section-number-3">10.8</span> Layouts</h3>
<div class="outline-text-3" id="text-10-8">
<p>
Set the layouts avaliable to use.
Make sure to apply gaps(spacingRaw) from <a href="#org0f7d21f">here</a>
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org8c5b753"><span style="color: #82aaff;">myLayout</span> <span style="color: #ffcb6b;">=</span> avoidStruts <span style="color: #ffcb6b;">$</span> smartBorders
  (tiledgaps <span style="color: #ffcb6b;">|||</span> bspgaps <span style="color: #ffcb6b;">|||</span> <span style="color: #c792ea;">Mirror</span> tiledgaps <span style="color: #ffcb6b;">|||</span> spiralgaps <span style="color: #ffcb6b;">|||</span> <span style="color: #c792ea;">Full</span>)
 <span style="color: #89DDFF;">where</span>
  tiledgaps  <span style="color: #ffcb6b;">=</span> myGaps <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">Tall</span> nmaster delta ratio

  <span style="color: #676E95;">-- </span><span style="color: #676E95;">window number in master pane</span>
  nmaster    <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">1</span>

  <span style="color: #676E95;">-- </span><span style="color: #676E95;">percent of screen to increment by when resizing panes</span>
  delta      <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">2</span> <span style="color: #ffcb6b;">/</span> <span style="color: #f78c6c; font-weight: bold;">100</span>

  <span style="color: #676E95;">-- </span><span style="color: #676E95;">default proportion of screen occupied by master pane</span>
  ratio      <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">1</span> <span style="color: #ffcb6b;">/</span> <span style="color: #f78c6c; font-weight: bold;">2</span>

  bspgaps    <span style="color: #ffcb6b;">=</span> myGaps emptyBSP
  spiralgaps <span style="color: #ffcb6b;">=</span> myGaps <span style="color: #ffcb6b;">$</span> spiral (<span style="color: #f78c6c; font-weight: bold;">6</span> <span style="color: #ffcb6b;">/</span> <span style="color: #f78c6c; font-weight: bold;">7</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgca90ece" class="outline-3">
<h3 id="orgca90ece"><span class="section-number-3">10.9</span> Startups(autostart)</h3>
<div class="outline-text-3" id="text-10-9">
<p>
These are the commands that xmonad executes on startup. Set the wallpaper, cursor, etc here
I run compositor(picom) and few programs like keynav as systemd service because home-manager module does that.
But usually we start all these programs here
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="orgdecdc0d"><span style="color: #82aaff;">myStartupHook</span> <span style="color: #ffcb6b;">=</span> <span style="color: #89DDFF;">do</span>
  <span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>fallback<span style="color: #ffcb6b;">-</span>wallpaper<span style="color: #ffcb6b;">&gt;&gt;</span>
  <span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>set<span style="color: #ffcb6b;">-</span>wallpaper<span style="color: #ffcb6b;">&gt;&gt;</span>
  <span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>set<span style="color: #ffcb6b;">-</span>cursor<span style="color: #ffcb6b;">&gt;&gt;</span>
  <span style="color: #676E95;">-- </span><span style="color: #676E95;">spawn Japanese IME</span>
  spawnOnce <span style="color: #c3e88d;">"fcitx -d &amp;"</span>
  <span style="color: #676E95;">-- </span><span style="color: #676E95;">start screen locker</span>
  spawnOnce <span style="color: #c3e88d;">"light-locker --lock-on-suspend &amp;"</span>
  <span style="color: #676E95;">-- </span><span style="color: #676E95;">window animation</span>
  spawnOnce <span style="color: #c3e88d;">"flashfocus &amp;"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb2863ca" class="outline-3">
<h3 id="orgb2863ca"><span class="section-number-3">10.10</span> Scratchpads</h3>
<div class="outline-text-3" id="text-10-10">
<p>
Import scratchpad module
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org0306b7e"><span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">XMonad.Util.NamedScratchpad</span>
</pre>
</div>

<p>
This configures floating scratchpads for several programs:
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org16a565d"><span style="color: #82aaff;">myScratchPads</span> <span style="color: #ffcb6b;">=</span>
  [ <span style="color: #c792ea;">NS</span> <span style="color: #c3e88d;">"terminal"</span> spawnTerm   findTerm   manageTerm
  , <span style="color: #c792ea;">NS</span> <span style="color: #c3e88d;">"mixer"</span>    spawnMixer  findMixer  manageMixer
  , <span style="color: #c792ea;">NS</span> <span style="color: #c3e88d;">"bottom"</span>   spawnbottom findbottom managebottom
  , <span style="color: #c792ea;">NS</span> <span style="color: #c3e88d;">"vifm"</span>     spawnvifm   findvifm   managevifm
  ]
 <span style="color: #89DDFF;">where</span>
  centralh   <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">0.9</span>
  centralw   <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">0.9</span>
  centralt   <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">0.95</span> <span style="color: #ffcb6b;">-</span> centralh
  centrall   <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">0.95</span> <span style="color: #ffcb6b;">-</span> centralw

  spawnTerm  <span style="color: #ffcb6b;">=</span> myTerminal <span style="color: #ffcb6b;">++</span> <span style="color: #c3e88d;">" --title=terminalScratchpad"</span>
  findTerm   <span style="color: #ffcb6b;">=</span> title <span style="color: #ffcb6b;">=?</span> <span style="color: #c3e88d;">"terminalScratchpad"</span>
  manageTerm <span style="color: #ffcb6b;">=</span> customFloating <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">W.RationalRect</span> l t w h
   <span style="color: #89DDFF;">where</span>
    h <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">0.3</span>
    w <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">1</span>
    t <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">0</span>
    l <span style="color: #ffcb6b;">=</span> (<span style="color: #f78c6c; font-weight: bold;">1</span> <span style="color: #ffcb6b;">-</span> w) <span style="color: #ffcb6b;">/</span> <span style="color: #f78c6c; font-weight: bold;">2</span>

  spawnMixer <span style="color: #ffcb6b;">=</span> myTerminal <span style="color: #ffcb6b;">++</span> <span style="color: #c3e88d;">" --title=mixerScratchpad"</span> <span style="color: #ffcb6b;">++</span> <span style="color: #c3e88d;">" -e ncpamixer"</span>
  findMixer  <span style="color: #ffcb6b;">=</span> title <span style="color: #ffcb6b;">=?</span> <span style="color: #c3e88d;">"mixerScratchpad"</span>
  manageMixer <span style="color: #ffcb6b;">=</span>
    customFloating <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">W.RationalRect</span> centrall centralt centralw centralh

  spawnbottom <span style="color: #ffcb6b;">=</span> myTerminal <span style="color: #ffcb6b;">++</span> <span style="color: #c3e88d;">" --title=bottomScratchpad"</span> <span style="color: #ffcb6b;">++</span> <span style="color: #c3e88d;">" -e btm"</span>
  findbottom  <span style="color: #ffcb6b;">=</span> title <span style="color: #ffcb6b;">=?</span> <span style="color: #c3e88d;">"bottomScratchpad"</span>
  managebottom <span style="color: #ffcb6b;">=</span>
    customFloating <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">W.RationalRect</span> centrall centralt centralw centralh

  spawnvifm <span style="color: #ffcb6b;">=</span>
    myTerminal <span style="color: #ffcb6b;">++</span> <span style="color: #c3e88d;">" --title=vifmScratchpad"</span> <span style="color: #ffcb6b;">++</span> <span style="color: #c3e88d;">" -e bash -c 'vifmrun'"</span>
  findvifm <span style="color: #ffcb6b;">=</span> title <span style="color: #ffcb6b;">=?</span> <span style="color: #c3e88d;">"vifmScratchpad"</span>
  managevifm <span style="color: #ffcb6b;">=</span>
    customFloating <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">W.RationalRect</span> centrall centralt centralw centralh
</pre>
</div>
</div>
</div>
<div id="outline-container-org42109b4" class="outline-3">
<h3 id="org42109b4"><span class="section-number-3">10.11</span> ManageHook</h3>
<div class="outline-text-3" id="text-10-11">
<p>
Set rules for certain programs.
e.g.Make certain program always appear at certain workspace, Force certain program(GIMP here) to always float
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org778712b"><span style="color: #82aaff;">myManageHook</span> <span style="color: #ffcb6b;">=</span>
  composeAll
      [ className <span style="color: #ffcb6b;">=?</span> <span style="color: #c3e88d;">"Gimp"</span> <span style="color: #ffcb6b;">--&gt;</span> doFloat
      , resource <span style="color: #ffcb6b;">=?</span> <span style="color: #c3e88d;">"desktop_window"</span> <span style="color: #ffcb6b;">--&gt;</span> doIgnore
      , isFullscreen <span style="color: #ffcb6b;">--&gt;</span> doFullFloat
      ]
    <span style="color: #ffcb6b;">&lt;+&gt;</span> namedScratchpadManageHook myScratchPads
</pre>
</div>
</div>
</div>
<div id="outline-container-org611615b" class="outline-3">
<h3 id="org611615b"><span class="section-number-3">10.12</span> Mouse</h3>
<div class="outline-text-3" id="text-10-12">
<p>
Mouse configuration. I rarely use it, my mouse is mostly disabled so I won&rsquo;t document it.
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="orgc52a8f7"><span style="color: #82aaff;">myFocusFollowsMouse</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">Bool</span>
<span style="color: #82aaff;">myFocusFollowsMouse</span> <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">True</span>
<span style="color: #82aaff;">myClickJustFocuses</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">Bool</span>
<span style="color: #82aaff;">myClickJustFocuses</span> <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">False</span>

<span style="color: #82aaff;">myMouseBindings</span> <span style="color: #c792ea;">XConfig</span> { XMonad.modMask <span style="color: #ffcb6b;">=</span> modm } <span style="color: #ffcb6b;">=</span> M.fromList

    <span style="color: #676E95;">-- </span><span style="color: #676E95;">mod-button1, Set the window to floating mode and move by dragging</span>
  [ ( (modm, button1)
    , <span style="color: #ffcb6b;">\</span>w <span style="color: #ffcb6b;">-&gt;</span> focus w <span style="color: #ffcb6b;">&gt;&gt;</span> mouseMoveWindow w <span style="color: #ffcb6b;">&gt;&gt;</span> windows W.shiftMaster
    )

    <span style="color: #676E95;">-- </span><span style="color: #676E95;">mod-button2, Raise the window to the top of the stack</span>
  , ((modm, button2), <span style="color: #ffcb6b;">\</span>w <span style="color: #ffcb6b;">-&gt;</span> focus w <span style="color: #ffcb6b;">&gt;&gt;</span> windows W.shiftMaster)

    <span style="color: #676E95;">-- </span><span style="color: #676E95;">mod-button3, Set the window to floating mode and resize by dragging</span>
  , ( (modm, button3)
    , <span style="color: #ffcb6b;">\</span>w <span style="color: #ffcb6b;">-&gt;</span> focus w <span style="color: #ffcb6b;">&gt;&gt;</span> mouseResizeWindow w <span style="color: #ffcb6b;">&gt;&gt;</span> windows W.shiftMaster
    )

    <span style="color: #676E95;">-- </span><span style="color: #676E95;">you may also bind events to the mouse scroll wheel (button4 and button5)</span>
  ]
</pre>
</div>
</div>
</div>
<div id="outline-container-org46facfd" class="outline-3">
<h3 id="org46facfd"><span class="section-number-3">10.13</span> Function to get active layout description</h3>
<div class="outline-text-3" id="text-10-13">
<p>
Get active layout.
This used by <code>M-.</code> <code>"M-,"</code> keybind to determine if it&rsquo;s BSP layout or not.
</p>
<div class="org-src-container">
<pre class="src src-haskell" id="org78ca5dc"><span style="color: #82aaff;">getActiveLayoutDescription</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">X</span> <span style="color: #c792ea;">String</span>
<span style="color: #82aaff;">getActiveLayoutDescription</span> <span style="color: #ffcb6b;">=</span> <span style="color: #89DDFF;">do</span>
  workspaces <span style="color: #ffcb6b;">&lt;-</span> gets windowset
  return <span style="color: #ffcb6b;">$</span> description <span style="color: #ffcb6b;">.</span> W.layout <span style="color: #ffcb6b;">.</span> W.workspace <span style="color: #ffcb6b;">.</span> W.current <span style="color: #ffcb6b;">$</span> workspaces
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc00cdd5" class="outline-3">
<h3 id="orgc00cdd5"><span class="section-number-3">10.14</span> xmonad.hs base code</h3>
<div class="outline-text-3" id="text-10-14">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #676E95;">-- </span><span style="color: #676E95;">This file is generated from "README.org"</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>imports<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>mod<span style="color: #ffcb6b;">-</span>key<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span><span style="color: #89DDFF;">default</span><span style="color: #ffcb6b;">-</span>terminal<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>prompt<span style="color: #ffcb6b;">-</span>font<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>prompt<span style="color: #ffcb6b;">-</span>emoji<span style="color: #ffcb6b;">-</span>font<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>workspaces<span style="color: #ffcb6b;">-</span>names<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>border<span style="color: #ffcb6b;">-</span>width<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>prompt<span style="color: #ffcb6b;">-</span>height<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>normalborder<span style="color: #ffcb6b;">-</span>color<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>focusedborder<span style="color: #ffcb6b;">-</span>color<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>gaps<span style="color: #ffcb6b;">-</span>config<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>keybinds<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>prompt<span style="color: #ffcb6b;">-</span>keymap<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>prompt<span style="color: #ffcb6b;">-</span>config<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>emojiprompt<span style="color: #ffcb6b;">-</span>config<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>mouse<span style="color: #ffcb6b;">-</span>config<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>layouts<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>scratchpads<span style="color: #ffcb6b;">-</span>config<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>managehook<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>startuphook<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>loghook<span style="color: #ffcb6b;">&gt;&gt;</span>
<span style="color: #82aaff;">myEventHook</span> <span style="color: #ffcb6b;">=</span> handleEventHook def <span style="color: #ffcb6b;">&lt;+&gt;</span> fullscreenEventHook
<span style="color: #ffcb6b;">&lt;&lt;</span>xmonad<span style="color: #ffcb6b;">-</span>getactivelayout<span style="color: #ffcb6b;">&gt;&gt;</span>

<span style="color: #82aaff;">main</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">IO</span> <span style="color: #c792ea;">()</span>
<span style="color: #82aaff;">main</span> <span style="color: #ffcb6b;">=</span> <span style="color: #89DDFF;">do</span>
  h <span style="color: #ffcb6b;">&lt;-</span> spawnPipe <span style="color: #c3e88d;">"xmobar ~/.xmonad/xmobar.hs"</span>
  xmonad <span style="color: #ffcb6b;">$</span> docks <span style="color: #ffcb6b;">$</span> withNavigation2DConfig def <span style="color: #ffcb6b;">$</span> ewmh
    def { handleEventHook <span style="color: #ffcb6b;">=</span> handleEventHook def <span style="color: #ffcb6b;">&lt;+&gt;</span> fullscreenEventHook }
      {
      <span style="color: #676E95;">-- </span><span style="color: #676E95;">simple stuff</span>
        terminal           <span style="color: #ffcb6b;">=</span> myTerminal
      , focusFollowsMouse  <span style="color: #ffcb6b;">=</span> myFocusFollowsMouse
      , clickJustFocuses   <span style="color: #ffcb6b;">=</span> myClickJustFocuses
      , borderWidth        <span style="color: #ffcb6b;">=</span> myBorderWidth
      , modMask            <span style="color: #ffcb6b;">=</span> myModMask
      , workspaces         <span style="color: #ffcb6b;">=</span> myWorkspaces
      , normalBorderColor  <span style="color: #ffcb6b;">=</span> myNormalBorderColor
      , focusedBorderColor <span style="color: #ffcb6b;">=</span> myFocusedBorderColor
      <span style="color: #676E95;">-- </span><span style="color: #676E95;">key bindings</span>
      <span style="color: #676E95;">-- </span><span style="color: #676E95;">, keys               = myKeys</span>
      , mouseBindings      <span style="color: #ffcb6b;">=</span> myMouseBindings
      <span style="color: #676E95;">-- </span><span style="color: #676E95;">hooks, layouts</span>
      , layoutHook         <span style="color: #ffcb6b;">=</span> myLayout
      , manageHook         <span style="color: #ffcb6b;">=</span> myManageHook
      , handleEventHook    <span style="color: #ffcb6b;">=</span> myEventHook
      , logHook            <span style="color: #ffcb6b;">=</span> myLogHook h
      , startupHook        <span style="color: #ffcb6b;">=</span> myStartupHook
      } <span style="color: #ffcb6b;">`additionalKeysP`</span> myKeys
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgde1a3bc" class="outline-2">
<h2 id="orgde1a3bc"><span class="section-number-2">11</span> xmobar</h2>
<div class="outline-text-2" id="text-11">
<p>
xmobar is lightweight status bar that is written/configured in Haskell.
Since it serves well my usage, it can be configured in Haskell, I use it.
</p>
</div>
<div id="outline-container-org3d029a3" class="outline-3">
<h3 id="org3d029a3"><span class="section-number-3">11.1</span> Desktop config</h3>
<div class="outline-text-3" id="text-11-1">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #676E95;">-- </span><span style="color: #676E95;">This file is generated from "README.org"</span>
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">Xmobar</span>


<span style="color: #82aaff;">config</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">Config</span>
<span style="color: #82aaff;">config</span> <span style="color: #ffcb6b;">=</span> defaultConfig
  { font             <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"xft:Liberation Sans-14,GohuFont Nerd Font-14"</span>
  , additionalFonts  <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">[]</span>
  , borderColor      <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #232635;">#232635</span><span style="color: #c3e88d;">"</span>
  , border           <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">BottomB</span>
  <span style="color: #676E95;">-- </span><span style="color: #676E95;">, alpha            = 255</span>
  <span style="color: #676E95;">-- </span><span style="color: #676E95;">, bgColor          = "</span><span style="color: #ffffff; background-color: #3C435E;">#3C435E</span><span style="color: #676E95;">"</span>
  , alpha            <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">220</span>
  , bgColor          <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #203123;">#203123</span><span style="color: #c3e88d;">"</span> <span style="color: #676E95;">-- </span><span style="color: #676E95;">Somehow color get messed up when using alpha issue</span><span style="color: #ffffff; background-color: #246;">#246</span><span style="color: #676E95;"> this is the workaround. invert 3rd4th &lt;--&gt; 5th6th like this.</span>
  , fgColor          <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #676E95;">#676E95</span><span style="color: #c3e88d;">"</span>
  , position         <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">TopSize</span> <span style="color: #c792ea;">L</span> <span style="color: #f78c6c; font-weight: bold;">100</span> <span style="color: #f78c6c; font-weight: bold;">30</span>
  , textOffset       <span style="color: #ffcb6b;">=</span> <span style="color: #ffcb6b;">-</span><span style="color: #f78c6c; font-weight: bold;">1</span>
  , iconOffset       <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">13</span>
  , lowerOnStart     <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">True</span>
  , pickBroadest     <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">False</span>
  , persistent       <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">False</span>
  , hideOnStart      <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">False</span>
  , iconRoot         <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"/etc/icons"</span>
  , allDesktops      <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">True</span>
  , overrideRedirect <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">True</span>
  , commands         <span style="color: #ffcb6b;">=</span> [ <span style="color: #c792ea;">Run</span> <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">Cpu</span> [<span style="color: #c3e88d;">"-t"</span>, <span style="color: #c3e88d;">"&lt;icon=cpu.xpm/&gt;  &lt;total&gt;%"</span>] <span style="color: #f78c6c; font-weight: bold;">10</span>
                       , <span style="color: #c792ea;">Run</span> <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">Memory</span> [<span style="color: #c3e88d;">"-t"</span>, <span style="color: #c3e88d;">"&lt;icon=ram.xpm/&gt;  &lt;used&gt;MB"</span>] <span style="color: #f78c6c; font-weight: bold;">10</span>
                       , <span style="color: #c792ea;">Run</span> <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">Date</span> <span style="color: #c3e88d;">"%a %m/%_d"</span> <span style="color: #c3e88d;">"date"</span> <span style="color: #f78c6c; font-weight: bold;">10</span>
                       , <span style="color: #c792ea;">Run</span> <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">Date</span> <span style="color: #c3e88d;">"%H:%M:%S"</span> <span style="color: #c3e88d;">"time"</span> <span style="color: #f78c6c; font-weight: bold;">10</span>
                       , <span style="color: #c792ea;">Run</span> <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">Volume</span>
                         <span style="color: #c3e88d;">"default"</span>
                         <span style="color: #c3e88d;">"Master"</span>
                         [ <span style="color: #c3e88d;">"-t"</span>
                         , <span style="color: #c3e88d;">"&lt;status&gt;  &lt;volume&gt;%"</span>
                         , <span style="color: #c3e88d;">"--"</span>
                         , <span style="color: #c3e88d;">"-O"</span>
                         , <span style="color: #c3e88d;">"&lt;icon=volume.xpm/&gt;"</span>
                         , <span style="color: #676E95;">-- </span><span style="color: #676E95;">on</span>
                           <span style="color: #c3e88d;">"-o"</span>
                         , <span style="color: #c3e88d;">"&lt;icon=volume-mute.xpm/&gt;"</span>
                         , <span style="color: #676E95;">-- </span><span style="color: #676E95;">off</span>
                           <span style="color: #c3e88d;">"-C"</span>
                         , <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #c3e88d;">"</span>
                         , <span style="color: #c3e88d;">"-c"</span>
                         , <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #f07178;">#f07178</span><span style="color: #c3e88d;">"</span>
                         ]
                         <span style="color: #f78c6c; font-weight: bold;">3</span>
                       , <span style="color: #c792ea;">Run</span> <span style="color: #c792ea;">StdinReader</span>
                       ]
  , sepChar          <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"%"</span>
  , alignSep         <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"}{"</span>
  , template         <span style="color: #ffcb6b;">=</span>
    <span style="color: #c3e88d;">"%StdinReader% }\</span>
<span style="color: #c3e88d;">     \ &lt;fc=</span><span style="color: #000000; background-color: #89ddff;">#89ddff</span><span style="color: #c3e88d;">&gt;&lt;icon=clock.xpm/&gt;  %time%&lt;/fc&gt; \</span>
<span style="color: #c3e88d;">     \{ &lt;fc=</span><span style="color: #000000; background-color: #f07178;">#f07178</span><span style="color: #c3e88d;">&gt;%cpu%&lt;/fc&gt; | &lt;fc=</span><span style="color: #000000; background-color: #80cbc4;">#80cbc4</span><span style="color: #c3e88d;">&gt;%memory%&lt;/fc&gt;\</span>
<span style="color: #c3e88d;">     \ | &lt;fc=</span><span style="color: #000000; background-color: #f78c6c;">#f78c6c</span><span style="color: #c3e88d;">&gt;&lt;icon=calendar.xpm/&gt;  %date%&lt;/fc&gt; | &lt;fc=</span><span style="color: #000000; background-color: #82aaff;">#82aaff</span><span style="color: #c3e88d;">&gt;%default:Master%&lt;/fc&gt;"</span>
  }


<span style="color: #82aaff;">main</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">IO</span> <span style="color: #c792ea;">()</span>
<span style="color: #82aaff;">main</span> <span style="color: #ffcb6b;">=</span> xmobar config
</pre>
</div>
</div>
</div>
<div id="outline-container-orga58dfb9" class="outline-3">
<h3 id="orga58dfb9"><span class="section-number-3">11.2</span> Laptop config</h3>
<div class="outline-text-3" id="text-11-2">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #676E95;">-- </span><span style="color: #676E95;">This file is generated from "README.org"</span>
<span style="color: #89DDFF;">import</span>           <span style="color: #c792ea;">Xmobar</span>


<span style="color: #82aaff;">config</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">Config</span>
<span style="color: #82aaff;">config</span> <span style="color: #ffcb6b;">=</span> defaultConfig
  { font             <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"xft:Liberation Sans-14,GohuFont Nerd Font-14"</span>
  , additionalFonts  <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">[]</span>
  , borderColor      <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #232635;">#232635</span><span style="color: #c3e88d;">"</span>
  , border           <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">BottomB</span>
  <span style="color: #676E95;">-- </span><span style="color: #676E95;">, alpha            = 255</span>
  <span style="color: #676E95;">-- </span><span style="color: #676E95;">, bgColor          = "</span><span style="color: #ffffff; background-color: #3C435E;">#3C435E</span><span style="color: #676E95;">"</span>
  , alpha            <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">220</span>
  , bgColor          <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #203123;">#203123</span><span style="color: #c3e88d;">"</span> <span style="color: #676E95;">-- </span><span style="color: #676E95;">Somehow color get messed up when using alpha issue</span><span style="color: #ffffff; background-color: #246;">#246</span><span style="color: #676E95;"> this is the workaround. invert 3rd4th &lt;--&gt; 5th6th like this.</span>
  , fgColor          <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #676E95;">#676E95</span><span style="color: #c3e88d;">"</span>
  , position         <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">TopSize</span> <span style="color: #c792ea;">L</span> <span style="color: #f78c6c; font-weight: bold;">100</span> <span style="color: #f78c6c; font-weight: bold;">30</span>
  , textOffset       <span style="color: #ffcb6b;">=</span> <span style="color: #ffcb6b;">-</span><span style="color: #f78c6c; font-weight: bold;">1</span>
  , iconOffset       <span style="color: #ffcb6b;">=</span> <span style="color: #f78c6c; font-weight: bold;">13</span>
  , lowerOnStart     <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">True</span>
  , pickBroadest     <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">False</span>
  , persistent       <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">False</span>
  , hideOnStart      <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">False</span>
  , iconRoot         <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"/etc/icons"</span>
  , allDesktops      <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">True</span>
  , overrideRedirect <span style="color: #ffcb6b;">=</span> <span style="color: #c792ea;">True</span>
  , commands         <span style="color: #ffcb6b;">=</span> [ <span style="color: #c792ea;">Run</span> <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">Cpu</span> [<span style="color: #c3e88d;">"-t"</span>, <span style="color: #c3e88d;">"&lt;icon=cpu.xpm/&gt;  &lt;total&gt;%"</span>] <span style="color: #f78c6c; font-weight: bold;">10</span>
                       , <span style="color: #c792ea;">Run</span> <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">Memory</span> [<span style="color: #c3e88d;">"-t"</span>, <span style="color: #c3e88d;">"&lt;icon=ram.xpm/&gt;  &lt;used&gt;MB"</span>] <span style="color: #f78c6c; font-weight: bold;">10</span>
                       , <span style="color: #c792ea;">Run</span> <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">Date</span> <span style="color: #c3e88d;">"%a %m/%_d"</span> <span style="color: #c3e88d;">"date"</span> <span style="color: #f78c6c; font-weight: bold;">10</span>
                       , <span style="color: #c792ea;">Run</span> <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">Date</span> <span style="color: #c3e88d;">"%H:%M:%S"</span> <span style="color: #c3e88d;">"time"</span> <span style="color: #f78c6c; font-weight: bold;">10</span>
                       , <span style="color: #c792ea;">Run</span> <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">BatteryN</span>
                         [<span style="color: #c3e88d;">"BAT0"</span>]
                         [ <span style="color: #c3e88d;">"-t"</span>
                         , <span style="color: #c3e88d;">"&lt;acstatus&gt;  &lt;left&gt;"</span>
                         , <span style="color: #c3e88d;">"-S"</span>
                         , <span style="color: #c3e88d;">"Off"</span>
                         , <span style="color: #c3e88d;">"-d"</span>
                         , <span style="color: #c3e88d;">"0"</span>
                         , <span style="color: #c3e88d;">"-m"</span>
                         , <span style="color: #c3e88d;">"3"</span>
                         , <span style="color: #c3e88d;">"-L"</span>
                         , <span style="color: #c3e88d;">"10"</span>
                         , <span style="color: #c3e88d;">"-H"</span>
                         , <span style="color: #c3e88d;">"90"</span>
                         , <span style="color: #c3e88d;">"-p"</span>
                         , <span style="color: #c3e88d;">"3"</span>
                         , <span style="color: #c3e88d;">"--low"</span>
                         , <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #f07178;">#f07178</span><span style="color: #c3e88d;">"</span>
                         , <span style="color: #c3e88d;">"--normal"</span>
                         , <span style="color: #c3e88d;">"</span><span style="color: #ffffff; background-color: #676E95;">#676E95</span><span style="color: #c3e88d;">"</span>
                         , <span style="color: #c3e88d;">"--high"</span>
                         , <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #80cbc4;">#80cbc4</span><span style="color: #c3e88d;">"</span>
                         , <span style="color: #c3e88d;">"--"</span>
                         , <span style="color: #c3e88d;">"-P"</span>
                         , <span style="color: #c3e88d;">"-a"</span>
                         , <span style="color: #c3e88d;">"notify-send -u critical 'Battery running out!!!!!!'"</span>
                         , <span style="color: #c3e88d;">"-A"</span>
                         , <span style="color: #c3e88d;">"7"</span>
           <span style="color: #676E95;">-- </span><span style="color: #676E95;">Charged</span>
                         , <span style="color: #c3e88d;">"-i"</span>
                         , <span style="color: #c3e88d;">"&lt;icon=battery-charging.xpm/&gt;"</span>
           <span style="color: #676E95;">-- </span><span style="color: #676E95;">AC on</span>
                         , <span style="color: #c3e88d;">"-O"</span>
                         , <span style="color: #c3e88d;">"&lt;icon=battery-charging.xpm/&gt;"</span>
           <span style="color: #676E95;">-- </span><span style="color: #676E95;">Discharging</span>
                         , <span style="color: #c3e88d;">"-o"</span>
                         , <span style="color: #c3e88d;">"&lt;icon=battery.xpm/&gt;"</span>
                         , <span style="color: #c3e88d;">"-H"</span>
                         , <span style="color: #c3e88d;">"10"</span>
                         , <span style="color: #c3e88d;">"-L"</span>
                         , <span style="color: #c3e88d;">"7"</span>
                         , <span style="color: #c3e88d;">"-h"</span>
                         , <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #80cbc4;">#80cbc4</span><span style="color: #c3e88d;">"</span>
                         , <span style="color: #c3e88d;">"-l"</span>
                         , <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #f07178;">#f07178</span><span style="color: #c3e88d;">"</span>
                         ]
                         <span style="color: #f78c6c; font-weight: bold;">50</span>
                         <span style="color: #c3e88d;">"battery"</span>
                       , <span style="color: #c792ea;">Run</span> <span style="color: #ffcb6b;">$</span> <span style="color: #c792ea;">Volume</span>
                         <span style="color: #c3e88d;">"default"</span>
                         <span style="color: #c3e88d;">"Master"</span>
                         [ <span style="color: #c3e88d;">"-t"</span>
                         , <span style="color: #c3e88d;">"&lt;status&gt;  &lt;volume&gt;%"</span>
                         , <span style="color: #c3e88d;">"--"</span>
                         , <span style="color: #c3e88d;">"-O"</span>
                         , <span style="color: #c3e88d;">"&lt;icon=volume.xpm/&gt;"</span>
                         , <span style="color: #676E95;">-- </span><span style="color: #676E95;">on</span>
                           <span style="color: #c3e88d;">"-o"</span>
                         , <span style="color: #c3e88d;">"&lt;icon=volume-mute.xpm/&gt;"</span>
                         , <span style="color: #676E95;">-- </span><span style="color: #676E95;">off</span>
                           <span style="color: #c3e88d;">"-C"</span>
                         , <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #c3e88d;">"</span>
                         , <span style="color: #c3e88d;">"-c"</span>
                         , <span style="color: #c3e88d;">"</span><span style="color: #000000; background-color: #f07178;">#f07178</span><span style="color: #c3e88d;">"</span>
                         ]
                         <span style="color: #f78c6c; font-weight: bold;">3</span>
                       , <span style="color: #c792ea;">Run</span> <span style="color: #c792ea;">StdinReader</span>
                       ]
  , sepChar          <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"%"</span>
  , alignSep         <span style="color: #ffcb6b;">=</span> <span style="color: #c3e88d;">"}{"</span>
  , template         <span style="color: #ffcb6b;">=</span>
    <span style="color: #c3e88d;">"%StdinReader% }\</span>
<span style="color: #c3e88d;">     \ &lt;fc=</span><span style="color: #000000; background-color: #89ddff;">#89ddff</span><span style="color: #c3e88d;">&gt;&lt;icon=clock.xpm/&gt;  %time%&lt;/fc&gt; \</span>
<span style="color: #c3e88d;">     \{ %battery% | &lt;fc=</span><span style="color: #000000; background-color: #f07178;">#f07178</span><span style="color: #c3e88d;">&gt;%cpu%&lt;/fc&gt; | &lt;fc=</span><span style="color: #000000; background-color: #80cbc4;">#80cbc4</span><span style="color: #c3e88d;">&gt;%memory%&lt;/fc&gt;\</span>
<span style="color: #c3e88d;">     \ | &lt;fc=</span><span style="color: #000000; background-color: #f78c6c;">#f78c6c</span><span style="color: #c3e88d;">&gt;&lt;icon=calendar.xpm/&gt;  %date%&lt;/fc&gt; | &lt;fc=</span><span style="color: #000000; background-color: #82aaff;">#82aaff</span><span style="color: #c3e88d;">&gt;%default:Master%&lt;/fc&gt;"</span>
  }


<span style="color: #82aaff;">main</span> <span style="color: #ffcb6b;">::</span> <span style="color: #c792ea;">IO</span> <span style="color: #c792ea;">()</span>
<span style="color: #82aaff;">main</span> <span style="color: #ffcb6b;">=</span> xmobar config
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org2aa8bd9" class="outline-2">
<h2 id="org2aa8bd9"><span class="section-number-2">12</span> Emacs</h2>
<div class="outline-text-2" id="text-12">
<p>
<img src="pictures/emacs-logo.png" alt="emacs-logo.png" />
I use emacs (specifically, <b>doom-emacs</b>) as main text editor
</p>

<p>
doom-emacs is an Emacs framework, which is preconfigured with evil-mode(vim keybindings) that allows me to use heavily customized emacs ootb
Doom starts up really quickly,because it tries to lazy load a lot of packages, byte compiles your configuration.
</p>

<p>
My emacs config is still work in progress, I change it often.
</p>

<p>
So, I choose to install doom-emacs in traditional way instead of using <a href="https://github.com/vlaci/nix-doom-emacs">nix-doom-emacs</a>
<code>git clone --depth 1 https://github.com/hlissner/doom-emacs ~/.emacs.d</code>
<code>~/.emacs.d/bin/doom install</code>
</p>

<ul class="org-ul">
<li><a href="#org804a45b">Theme</a></li>
<li><a href="#org73371bf">Fonts</a></li>
</ul>
</div>

<div id="outline-container-org55d1621" class="outline-3">
<h3 id="org55d1621"><span class="section-number-3">12.1</span> Install Emacs nativecomp pgtk</h3>
<div class="outline-text-3" id="text-12-1">
<p>
Install emacs itself
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org6f48c38"><span style="color: #ffcb6b;">programs.emacs.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
<p>
Use emacs native comp pgtk package from <a href="#org3da75a6">Overlay here</a>
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgdccccb8"><span style="color: #ffcb6b;">programs.emacs.package</span> = pkgs.emacsPgtkGcc;
</pre>
</div>

<p>
You have to add this to init.el and config.el to fix nativecomp in Nix
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orga939fb3"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">comp-async-env-modifier-form</span> <span style="color: #c3e88d;">""</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org811c289" class="outline-3">
<h3 id="org811c289"><span class="section-number-3">12.2</span> Enable Emacs daemon</h3>
<div class="outline-text-3" id="text-12-2">
<p>
I use emacs as daemon.
This allows to use emacs in a very flexible way(e.g.<a href="#orgd795940">15.1.8</a> )
Note that enabling socketActivation produces error when running <code>nixos-rebuild</code> with latest unstable emacs
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org850f0d1"><span style="color: #ffcb6b;">services.emacs</span> = {
  <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
  <span style="color: #ffcb6b;">client</span> = {
    <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">arguments</span> = [ <span style="color: #c3e88d;">"-c"</span> ];
  };
  <span style="color: #ffcb6b;">socketActivation.enable</span> = <span style="color: #82aaff;">false</span>;
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgecea5ad" class="outline-3">
<h3 id="orgecea5ad"><span class="section-number-3">12.3</span> Select doom-emacs modules</h3>
<div class="outline-text-3" id="text-12-3">
<p>
Control what Doom modules are enabled and what order they load in.
Run <code>doom sync</code> after modifying it
</p>
</div>
<div id="outline-container-orgf9c5642" class="outline-4">
<h4 id="orgf9c5642"><span class="section-number-4">12.3.1</span> base code</h4>
<div class="outline-text-4" id="text-12-3-1">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #676E95;">;;; </span><span style="color: #676E95;">init.el -*- lexical-binding: t; -*-</span>
<span style="color: #676E95;">;</span><span style="color: #676E95;">This file is generated from "README.org"</span>

&lt;&lt;emacs-fix-nativecomp&gt;&gt;

<span style="color: #c792ea;">(</span><span style="color: #89DDFF;">doom!</span> <span style="color: #82aaff;">:input</span>
       &lt;&lt;doom-initel-input&gt;&gt;
       <span style="color: #82aaff;">:completion</span>
       &lt;&lt;doom-initel-completion&gt;&gt;
       <span style="color: #82aaff;">:ui</span>
       &lt;&lt;doom-initel-ui&gt;&gt;
       <span style="color: #82aaff;">:editor</span>
       &lt;&lt;doom-initel-editor&gt;&gt;
       <span style="color: #82aaff;">:emacs</span>
       &lt;&lt;doom-initel-emacs&gt;&gt;
       <span style="color: #82aaff;">:term</span>
       &lt;&lt;doom-initel-term&gt;&gt;
       <span style="color: #82aaff;">:checkers</span>
       &lt;&lt;doom-initel-checkers&gt;&gt;
       <span style="color: #82aaff;">:tools</span>
       &lt;&lt;doom-initel-tools&gt;&gt;
       <span style="color: #82aaff;">:os</span>
       &lt;&lt;doom-initel-os&gt;&gt;
       <span style="color: #82aaff;">:lang</span>
       &lt;&lt;doom-initel-lang&gt;&gt;
       <span style="color: #82aaff;">:email</span>
       &lt;&lt;doom-initel-email&gt;&gt;
       <span style="color: #82aaff;">:app</span>
       &lt;&lt;doom-initel-app&gt;&gt;
       <span style="color: #82aaff;">:config</span>
       &lt;&lt;doom-initel-config&gt;&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb515f94" class="outline-4">
<h4 id="orgb515f94"><span class="section-number-4">12.3.2</span> input modules</h4>
<div class="outline-text-4" id="text-12-3-2">
<div class="org-src-container">
<pre class="src src-elisp" id="org330ae3d"><span style="color: #676E95;">;;</span><span style="color: #676E95;">chinese</span>
japanese
<span style="color: #676E95;">;;</span><span style="color: #676E95;">layout</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf29d1d4" class="outline-4">
<h4 id="orgf29d1d4"><span class="section-number-4">12.3.3</span> completion modules</h4>
<div class="outline-text-4" id="text-12-3-3">
<div class="org-src-container">
<pre class="src src-elisp" id="orge274199"><span style="color: #c792ea;">(</span>company +childframe +tng<span style="color: #c792ea;">)</span>          <span style="color: #676E95;">; </span><span style="color: #676E95;">the ultimate code completion backend</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">helm              ; the *other* search engine for love and life</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">ido               ; the other *other* search engine...</span>
<span style="color: #c792ea;">(</span>ivy +fuzzy +prescient +childframe +icons<span style="color: #c792ea;">)</span>              <span style="color: #676E95;">; </span><span style="color: #676E95;">a search engine for love and life</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org1600c11" class="outline-4">
<h4 id="org1600c11"><span class="section-number-4">12.3.4</span> UI modules</h4>
<div class="outline-text-4" id="text-12-3-4">
<div class="org-src-container">
<pre class="src src-elisp" id="orgbedfb84"><span style="color: #676E95;">;;</span><span style="color: #676E95;">deft              ; notational velocity for Emacs</span>
doom              <span style="color: #676E95;">; </span><span style="color: #676E95;">what makes DOOM look the way it does</span>
doom-dashboard    <span style="color: #676E95;">; </span><span style="color: #676E95;">a nifty splash screen for Emacs</span>
doom-quit         <span style="color: #676E95;">; </span><span style="color: #676E95;">DOOM quit-message prompts when you quit Emacs</span>
<span style="color: #c792ea;">(</span>emoji +unicode +github +ascii<span style="color: #c792ea;">)</span>  <span style="color: #676E95;">;</span><span style="color: #676E95;">&#128578;</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">fill-column       ; a `</span><span style="color: #f78c6c;">fill-column</span><span style="color: #676E95;">' indicator</span>
hl-todo           <span style="color: #676E95;">; </span><span style="color: #676E95;">highlight </span><span style="color: #ffcb6b; font-weight: bold;">TODO</span><span style="color: #676E95;">/</span><span style="color: #ff5370; font-weight: bold;">FIXME</span><span style="color: #676E95;">/</span><span style="color: #c3e88d; font-weight: bold;">NOTE</span><span style="color: #676E95;">/</span><span style="color: #8d92af; font-weight: bold;">DEPRECATED</span><span style="color: #676E95;">/</span><span style="color: #f78c6c; font-weight: bold;">HACK</span><span style="color: #676E95;">/</span><span style="color: #89DDFF; font-weight: bold;">REVIEW</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">hydra</span>
&lt;&lt;emacs-indent-guide-enable&gt;&gt;
<span style="color: #676E95;">;;</span><span style="color: #676E95;">minimap           ; show a map of the code on the side</span>
modeline          <span style="color: #676E95;">; </span><span style="color: #676E95;">snazzy, Atom-inspired modeline, plus API</span>
nav-flash         <span style="color: #676E95;">; </span><span style="color: #676E95;">blink cursor line after big motions</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">neotree           ; a project drawer, like NERDTree for vim</span>
ophints           <span style="color: #676E95;">; </span><span style="color: #676E95;">highlight the region an operation acts on</span>
<span style="color: #c792ea;">(</span>popup +defaults<span style="color: #c792ea;">)</span>   <span style="color: #676E95;">; </span><span style="color: #676E95;">tame sudden yet inevitable temporary windows</span>
ligatures       <span style="color: #676E95;">; </span><span style="color: #676E95;">ligatures or substitute text with pretty symbols</span>
&lt;&lt;initel-centaur-tabs&gt;&gt;
treemacs          <span style="color: #676E95;">; </span><span style="color: #676E95;">a project drawer, like neotree but cooler</span>
unicode           <span style="color: #676E95;">; </span><span style="color: #676E95;">extended unicode support for various languages</span>
vc-gutter         <span style="color: #676E95;">; </span><span style="color: #676E95;">vcs diff in the fringe</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">vi-tilde-fringe   ; fringe tildes to mark beyond EOB   THIS IS THE ANNOYING VIM TILDES MAKE SURE ITS TURNED OFF!!!</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">window-select     ; visually switch windows</span>
workspaces        <span style="color: #676E95;">; </span><span style="color: #676E95;">tab emulation, persistence &amp; separate workspaces</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">zen               ; distraction-free coding or writing</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orga67107a" class="outline-4">
<h4 id="orga67107a"><span class="section-number-4">12.3.5</span> editor modules</h4>
<div class="outline-text-4" id="text-12-3-5">
<div class="org-src-container">
<pre class="src src-elisp" id="org18641d2"><span style="color: #c792ea;">(</span>evil +everywhere<span style="color: #c792ea;">)</span><span style="color: #676E95;">; </span><span style="color: #676E95;">come to the dark side, we have cookies</span>
file-templates    <span style="color: #676E95;">; </span><span style="color: #676E95;">auto-snippets for empty files</span>
fold              <span style="color: #676E95;">; </span><span style="color: #676E95;">(nigh) universal code folding</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">(format +onsave)  ; automated prettiness</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">god               ; run Emacs commands without modifier keys</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">lispy             ; vim for lisp, for people who don't like vim</span>
multiple-cursors  <span style="color: #676E95;">; </span><span style="color: #676E95;">editing in many places at once</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">objed             ; text object editing for the innocent</span>
<span style="color: #676E95;">;; </span><span style="color: #676E95;">parinfer          ; turn lisp into python, sort of</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">rotate-text       ; cycle region at point between text candidates</span>
snippets          <span style="color: #676E95;">; </span><span style="color: #676E95;">my elves. They type so I don't have to</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">word-wrap         ; soft wrapping with language-aware indent</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgac8bcff" class="outline-4">
<h4 id="orgac8bcff"><span class="section-number-4">12.3.6</span> emacs modules</h4>
<div class="outline-text-4" id="text-12-3-6">
<div class="org-src-container">
<pre class="src src-elisp" id="org9536f5e"><span style="color: #c792ea;">(</span><span style="color: #f78c6c;">dired</span> +ranger +icons<span style="color: #c792ea;">)</span>             <span style="color: #676E95;">; </span><span style="color: #676E95;">making dired pretty [functional]</span>
electric          <span style="color: #676E95;">; </span><span style="color: #676E95;">smarter, keyword-based electric-indent</span>
<span style="color: #c792ea;">(</span><span style="color: #f78c6c;">ibuffer</span> +icons<span style="color: #c792ea;">)</span>         <span style="color: #676E95;">; </span><span style="color: #676E95;">interactive buffer management</span>
undo              <span style="color: #676E95;">; </span><span style="color: #676E95;">persistent, smarter undo for your inevitable mistakes</span>
vc                <span style="color: #676E95;">; </span><span style="color: #676E95;">version-control and Emacs, sitting in a tree</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf8c9bb6" class="outline-4">
<h4 id="orgf8c9bb6"><span class="section-number-4">12.3.7</span> term modules</h4>
<div class="outline-text-4" id="text-12-3-7">
<div class="org-src-container">
<pre class="src src-elisp" id="org1f1fea9"><span style="color: #676E95;">;;</span><span style="color: #676E95;">eshell            ; the elisp shell that works everywhere</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">shell             ; simple shell REPL for Emacs</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">term              ; basic terminal emulator for Emacs</span>
vterm             <span style="color: #676E95;">; </span><span style="color: #676E95;">the best terminal emulation in Emacs</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf8a5a02" class="outline-4">
<h4 id="orgf8a5a02"><span class="section-number-4">12.3.8</span> checkers modules</h4>
<div class="outline-text-4" id="text-12-3-8">
<div class="org-src-container">
<pre class="src src-elisp" id="org0bfb224">syntax              <span style="color: #676E95;">; </span><span style="color: #676E95;">tasing you for every semicolon you forget</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">spell             ; tasing you for misspelling mispelling</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">grammar           ; tasing grammar mistake every you make</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org318959e" class="outline-4">
<h4 id="org318959e"><span class="section-number-4">12.3.9</span> tools modules</h4>
<div class="outline-text-4" id="text-12-3-9">
<div class="org-src-container">
<pre class="src src-elisp" id="org6274818"><span style="color: #676E95;">;;</span><span style="color: #676E95;">ansible</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">debugger          ; </span><span style="color: #ff5370; font-weight: bold;">FIXME</span><span style="color: #676E95;"> stepping through code, to help you add bugs</span>
direnv
<span style="color: #676E95;">;;</span><span style="color: #676E95;">docker</span>
editorconfig      <span style="color: #676E95;">; </span><span style="color: #676E95;">let someone else argue about tabs vs spaces</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">ein               ; tame Jupyter notebooks with emacs</span>
<span style="color: #c792ea;">(</span><span style="color: #f78c6c;">eval</span> +overlay<span style="color: #c792ea;">)</span>     <span style="color: #676E95;">; </span><span style="color: #676E95;">run code, run (also, repls)</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">gist              ; interacting with github gists</span>
lookup              <span style="color: #676E95;">; </span><span style="color: #676E95;">navigate your code and its documentation</span>
lsp
<span style="color: #676E95;">;;</span><span style="color: #676E95;">macos             ; MacOS-specific commands</span>
<span style="color: #c792ea;">(</span><span style="color: #82aaff;">magit</span> +forge<span style="color: #c792ea;">)</span>             <span style="color: #676E95;">; </span><span style="color: #676E95;">a git porcelain for Emacs</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">make              ; run make tasks from Emacs</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">pass              ; password manager for nerds</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">pdf               ; pdf enhancements</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">prodigy           ; </span><span style="color: #ff5370; font-weight: bold;">FIXME</span><span style="color: #676E95;"> managing external services &amp; code builders</span>
rgb               <span style="color: #676E95;">; </span><span style="color: #676E95;">creating color strings</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">taskrunner        ; taskrunner for all your projects</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">terraform         ; infrastructure as code</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">tmux              ; an API for interacting with tmux</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">upload            ; map local to remote projects via ssh/ftp</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org99f4de8" class="outline-4">
<h4 id="org99f4de8"><span class="section-number-4">12.3.10</span> OS modules</h4>
<div class="outline-text-4" id="text-12-3-10">
<div class="org-src-container">
<pre class="src src-elisp" id="org9ea9ce5"><span style="color: #676E95;">;;</span><span style="color: #676E95;">tty               ; improve the terminal Emacs experience</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgec5549c" class="outline-4">
<h4 id="orgec5549c"><span class="section-number-4">12.3.11</span> lang modules</h4>
<div class="outline-text-4" id="text-12-3-11">
<div class="org-src-container">
<pre class="src src-elisp" id="orge7c1064"><span style="color: #676E95;">;;</span><span style="color: #676E95;">agda              ; types of types of types of types...</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">cc                ; C/C++/Obj-C madness</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">clojure           ; java with a lisp</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">common-lisp       ; if you've seen one lisp, you've seen them all</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">coq               ; proofs-as-programs</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">crystal           ; ruby at the speed of c</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">csharp            ; unity, .NET, and mono shenanigans</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">data              ; config/data formats</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">(dart +flutter)   ; paint ui and not much else</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">elixir            ; erlang done right</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">elm               ; care for a cup of TEA?</span>
emacs-lisp        <span style="color: #676E95;">; </span><span style="color: #676E95;">drown in parentheses</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">erlang            ; an elegant language for a more civilized age</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">ess               ; emacs speaks statistics</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">faust             ; dsp, but you get to keep your soul</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">fsharp            ; ML stands for Microsoft's Language</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">fstar             ; (dependent) types and (monadic) effects and Z3</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">gdscript          ; the language you waited for</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">(go +lsp)         ; the hipster dialect</span>
<span style="color: #c792ea;">(</span>haskell +lsp<span style="color: #c792ea;">)</span>  <span style="color: #676E95;">; </span><span style="color: #676E95;">a language that's lazier than I am</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">hy                ; readability of scheme w/ speed of python</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">idris             ;</span>
json              <span style="color: #676E95;">; </span><span style="color: #676E95;">At least it ain't XML</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">(java +meghanada) ; the poster child for carpal tunnel syndrome</span>
<span style="color: #c792ea;">(</span>javascript +lsp<span style="color: #c792ea;">)</span>       <span style="color: #676E95;">; </span><span style="color: #676E95;">all(hope(abandon(ye(who(enter(here))))))</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">julia             ; a better, faster MATLAB</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">kotlin            ; a better, slicker Java(Script)</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">latex             ; writing papers in Emacs has never been so fun</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">lean</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">factor</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">ledger            ; an accounting system in Emacs</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">lua               ; one-based indices? one-based indices</span>
markdown          <span style="color: #676E95;">; </span><span style="color: #676E95;">writing docs for people to ignore</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">nim               ; python + lisp at the speed of c</span>
nix               <span style="color: #676E95;">; </span><span style="color: #676E95;">I hereby declare "nix geht mehr!"</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">ocaml             ; an objective camel</span>
<span style="color: #c792ea;">(</span>org +pretty +pandoc<span style="color: #c792ea;">)</span>               <span style="color: #676E95;">; </span><span style="color: #676E95;">organize your plain life in plain text</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">php               ; perl's insecure younger brother</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">plantuml          ; diagrams for confusing people more</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">purescript        ; javascript, but functional</span>
<span style="color: #c792ea;">(</span>python +lsp<span style="color: #c792ea;">)</span>            <span style="color: #676E95;">; </span><span style="color: #676E95;">beautiful is better than ugly</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">qt                ; the 'cutest' gui framework ever</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">racket            ; a DSL for DSLs</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">raku              ; the artist formerly known as perl6</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">rest              ; Emacs as a REST client</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">rst               ; ReST in peace</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">(ruby +rails)     ; 1.step {|i| p "Ruby is #{i.even? ? 'love' : 'life'}"}</span>
rust              <span style="color: #676E95;">; </span><span style="color: #676E95;">Fe2O3.unwrap().unwrap().unwrap().unwrap()</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">scala             ; java, but good</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">scheme            ; a fully conniving family of lisps</span>
sh                <span style="color: #676E95;">; </span><span style="color: #676E95;">she sells {ba,z,fi}sh shells on the C xor</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">sml</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">solidity          ; do you need a blockchain? No.</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">swift             ; who asked for emoji variables?</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">terra             ; Earth and Moon in alignment for performance.</span>
web               <span style="color: #676E95;">; </span><span style="color: #676E95;">the tubes</span>
yaml              <span style="color: #676E95;">; </span><span style="color: #676E95;">JSON, but readable</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org5ca6f19" class="outline-4">
<h4 id="org5ca6f19"><span class="section-number-4">12.3.12</span> email modules</h4>
<div class="outline-text-4" id="text-12-3-12">
<div class="org-src-container">
<pre class="src src-elisp" id="orgb1170fc"><span style="color: #676E95;">;;</span><span style="color: #676E95;">(mu4e +gmail)</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">notmuch</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">(wanderlust +gmail)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org629a46b" class="outline-4">
<h4 id="org629a46b"><span class="section-number-4">12.3.13</span> app modules</h4>
<div class="outline-text-4" id="text-12-3-13">
<div class="org-src-container">
<pre class="src src-elisp" id="org1a6ff39">calendar
<span style="color: #676E95;">;;</span><span style="color: #676E95;">irc               ; how neckbeards socialize</span>
<span style="color: #676E95;">;;</span><span style="color: #676E95;">(rss +org)        ; emacs as an RSS reader</span>
twitter           <span style="color: #676E95;">; </span><span style="color: #676E95;">twitter client https://twitter.com/vnought</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org39790b8" class="outline-4">
<h4 id="org39790b8"><span class="section-number-4">12.3.14</span> config modules</h4>
<div class="outline-text-4" id="text-12-3-14">
<div class="org-src-container">
<pre class="src src-elisp" id="org9afa814"><span style="color: #676E95;">;;</span><span style="color: #676E95;">literate</span>
<span style="color: #c792ea;">(</span>default +bindings +smartparens<span style="color: #c792ea;">)</span><span style="color: #ff5370; font-weight: bold;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfbd0689" class="outline-3">
<h3 id="orgfbd0689"><span class="section-number-3">12.4</span> Install custom packages</h3>
<div class="outline-text-3" id="text-12-4">
<p>
Install custom packages that aren&rsquo;t included in doom-emacs here
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #676E95;">;; </span><span style="color: #676E95;">-*- no-byte-compile: t; -*-</span>
<span style="color: #676E95;">;;; </span><span style="color: #676E95;">$DOOMDIR/packages.el</span>

<span style="color: #676E95;">;; </span><span style="color: #676E95;">Disable packages</span>

<span style="color: #676E95;">;; </span><span style="color: #676E95;">Basic stuffs</span>
&lt;&lt;centaur-tabs-package&gt;&gt;
&lt;&lt;magit-delta-package&gt;&gt;

<span style="color: #676E95;">;; </span><span style="color: #676E95;">org-mode</span>
&lt;&lt;emacs-org-mixed-pitch-install&gt;&gt;

<span style="color: #676E95;">;; </span><span style="color: #676E95;">Filetypes</span>
<span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> vimrc-mode<span style="color: #c792ea;">)</span>
<span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> fish-mode<span style="color: #c792ea;">)</span>

<span style="color: #676E95;">;; </span><span style="color: #676E95;">company(autocompletion) packages</span>
<span style="color: #676E95;">;; </span><span style="color: #676E95;">(package! company-tabnine)</span>
<span style="color: #676E95;">;; </span><span style="color: #676E95;">(package! company-emoji)</span>

</pre>
</div>
</div>
<div id="outline-container-org966ff02" class="outline-4">
<h4 id="org966ff02"><span class="section-number-4">12.4.1</span> Commentary</h4>
<div class="outline-text-4" id="text-12-4-1">
<p>
To install a package with Doom you must declare them here and run &rsquo;doom sync&rsquo;
on the command line, then restart Emacs for the changes to take effect &#x2013; or
use &rsquo;M-x doom/reload&rsquo;.
</p>

<p>
To install SOME-PACKAGE from MELPA, ELPA or emacsmirror:
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> some-package<span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
To install a package directly from a remote git repo, you must specify a
<code>:recipe</code>. You&rsquo;ll find documentation on what `:recipe&rsquo; accepts here:
<a href="https://github.com/raxod502/straight.el#the-recipe-format">https://github.com/raxod502/straight.el#the-recipe-format</a>
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> another-package
  <span style="color: #82aaff;">:recipe</span> <span style="color: #f78c6c;">(</span><span style="color: #82aaff;">:host</span> github <span style="color: #82aaff;">:repo</span> <span style="color: #c3e88d;">"username/repo"</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
If the package you are trying to install does not contain a PACKAGENAME.el
file, or is located in a subdirectory of the repo, you&rsquo;ll need to specify
<code>:files</code> in the <code>:recipe</code>
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> this-package
  <span style="color: #82aaff;">:recipe</span> <span style="color: #f78c6c;">(</span><span style="color: #82aaff;">:host</span> github <span style="color: #82aaff;">:repo</span> <span style="color: #c3e88d;">"username/repo"</span>
           <span style="color: #82aaff;">:files</span> <span style="color: #c3e88d;">(</span><span style="color: #c3e88d;">"some-file.el"</span> <span style="color: #c3e88d;">"src/lisp/*.el"</span><span style="color: #c3e88d;">)</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
If you&rsquo;d like to disable a package included with Doom, you can do so here
with the <code>:disable</code> property:
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> builtin-package <span style="color: #82aaff;">:disable</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
You can override the recipe of a built in package without having to specify
all the properties for <code>:recipe</code>. These will inherit the rest of its recipe
from Doom or MELPA/ELPA/Emacsmirror:
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> builtin-package <span style="color: #82aaff;">:recipe</span> <span style="color: #f78c6c;">(</span><span style="color: #82aaff;">:nonrecursive</span> t<span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
<span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> builtin-package-2 <span style="color: #82aaff;">:recipe</span> <span style="color: #f78c6c;">(</span><span style="color: #82aaff;">:repo</span> <span style="color: #c3e88d;">"myfork/package"</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Specify a <code>:branch</code> to install a package from a particular branch or tag.
This is required for some packages whose default branch isn&rsquo;t &rsquo;master&rsquo; (which
our package manager can&rsquo;t deal with; see <a href="https://github.com/raxod502/straight.el/issues/279">https://github.com/raxod502/straight.el/issues/279</a>
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> builtin-package <span style="color: #82aaff;">:recipe</span> <span style="color: #f78c6c;">(</span><span style="color: #82aaff;">:branch</span> <span style="color: #c3e88d;">"develop"</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Use <code>:pin</code> to specify a particular commit to install.
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> builtin-package <span style="color: #82aaff;">:pin</span> <span style="color: #c3e88d;">"1a2b3c4d5e"</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Doom&rsquo;s packages are pinned to a specific commit and updated from release to
release. The `unpin!&rsquo; macro allows you to unpin single packages&#x2026;
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">unpin!</span> pinned-package<span style="color: #c792ea;">)</span>
</pre>
</div>
<p>
&#x2026;or multiple packages
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">unpin!</span> pinned-package another-pinned-package<span style="color: #c792ea;">)</span>
</pre>
</div>
<p>
&#x2026;Or <b>all</b> packages (NOT RECOMMENDED; will likely break things)
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">unpin!</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org532bfaf" class="outline-3">
<h3 id="org532bfaf"><span class="section-number-3">12.5</span> Disable line number</h3>
<div class="outline-text-3" id="text-12-5">
<p>
Disable line number mode because it causes lag
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgecaf9ef"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">display-line-numbers-type</span> nil<span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org746e0d3" class="outline-3">
<h3 id="org746e0d3"><span class="section-number-3">12.6</span> Indent</h3>
<div class="outline-text-3" id="text-12-6">
<p>
Disable tab and use 4 space
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org66d9e82"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq-default</span>
 <span style="color: #ffcb6b;">indent-tabs-mode</span> nil
 <span style="color: #ffcb6b;">tab-width</span> <span style="color: #f78c6c; font-weight: bold;">4</span>
 <span style="color: #ffcb6b;">evil-shift-width</span> <span style="color: #f78c6c; font-weight: bold;">4</span>
 <span style="color: #ffcb6b;">standard-indent</span> <span style="color: #f78c6c; font-weight: bold;">4</span>
 <span style="color: #ffcb6b;">line-spacing</span> <span style="color: #f78c6c; font-weight: bold;">4</span>
 <span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Force it for haskell-mode as well
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orge69b260"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq-hook!</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">haskell-mode-hook</span>
  <span style="color: #ffcb6b;">tab-width</span> <span style="color: #f78c6c; font-weight: bold;">4</span>
  <span style="color: #ffcb6b;">evil-shift-width</span> <span style="color: #f78c6c; font-weight: bold;">4</span>
  <span style="color: #ffcb6b;">standard-indent</span> <span style="color: #f78c6c; font-weight: bold;">4</span>
  <span style="color: #ffcb6b;">indent-tabs-mode</span> nil
  <span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Enable indent guide module
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgab09072">indent-guides     <span style="color: #676E95;">; </span><span style="color: #676E95;">highlighted indent columns</span>
</pre>
</div>
<p>
Set indent guide to column
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org74ed407"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">after!</span> highlight-indent-guides
  <span style="color: #f78c6c;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">highlight-indent-guides-method</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">column</span>
        <span style="color: #ffcb6b;">highlight-indent-guides-responsive</span> t<span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org36261cc" class="outline-3">
<h3 id="org36261cc"><span class="section-number-3">12.7</span> History length</h3>
<div class="outline-text-3" id="text-12-7">
<p>
Set history length to 1000
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgb981c1c"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq-default</span>
 <span style="color: #ffcb6b;">history-length</span> <span style="color: #f78c6c; font-weight: bold;">1000</span>
 <span style="color: #ffcb6b;">prescient-history-length</span> <span style="color: #f78c6c; font-weight: bold;">1000</span>
 <span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org4af32b7" class="outline-3">
<h3 id="org4af32b7"><span class="section-number-3">12.8</span> Enable auto saving</h3>
<div class="outline-text-3" id="text-12-8">
<div class="org-src-container">
<pre class="src src-elisp" id="orgcac416b"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">auto-save-default</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgce1173b" class="outline-3">
<h3 id="orgce1173b"><span class="section-number-3">12.9</span> Delete files to trash</h3>
<div class="outline-text-3" id="text-12-9">
<div class="org-src-container">
<pre class="src src-elisp" id="orgff5bba5"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq-default</span> <span style="color: #ffcb6b;">delete-by-moving-to-trash</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc4f85f4" class="outline-3">
<h3 id="orgc4f85f4"><span class="section-number-3">12.10</span> Stretch cursor</h3>
<div class="outline-text-3" id="text-12-10">
<p>
Make the cursor stretch to cover wide characters
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org0af914c"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq-default</span> <span style="color: #ffcb6b;">x-stretch-cursor</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org31f48fd" class="outline-3">
<h3 id="org31f48fd"><span class="section-number-3">12.11</span> Centaur Tabs</h3>
<div class="outline-text-3" id="text-12-11">
<p>
Centaur tabs is a functional, efficient, customizable tab plugin for emacs
</p>

<p>
Install fork compatible with emacs daemon(packages.el)
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org16aed3f"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> centaur-tabs
  <span style="color: #82aaff;">:recipe</span><span style="color: #f78c6c;">(</span><span style="color: #82aaff;">:host</span> github <span style="color: #82aaff;">:repo</span> <span style="color: #c3e88d;">"MoritzMaxeiner/centaur-tabs"</span> <span style="color: #82aaff;">:branch</span> <span style="color: #c3e88d;">"daemon"</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Comment to disable default tabs module from doom emacs(init.el)
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org9094d21"><span style="color: #676E95;">;; </span><span style="color: #676E95;">tabs              ; a tab bar for Emacs</span>
</pre>
</div>
<ul class="org-ul">
<li><a href="#org51f3105">Fonts</a></li>
</ul>

<p>
Hook centaur tabs at doom startup
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgcec03d7"><span style="color: #82aaff;">:hook</span> <span style="color: #c792ea;">(</span>doom-first-file . <span style="color: #ffcb6b;">centaur-tabs-mode</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Scrolling (with the mouse wheel) past the end of the tab list replaces the tab list with that of another Doom workspace.
This prevents that:
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgc3876ee"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">centaur-tabs-cycle-scope</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">tabs</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Disable centaur tabs in certain buffers(doom-dashboard and popup buffer here)
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org54f1b23"><span style="color: #c792ea;">(</span><span style="color: #f78c6c;">add-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">+doom-dashboard-mode-hook</span> <span style="color: #89DDFF;">#'</span><span style="color: #ffcb6b;">centaur-tabs-local-mode</span><span style="color: #c792ea;">)</span>
<span style="color: #c792ea;">(</span><span style="color: #f78c6c;">add-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">+popup-buffer-mode-hook</span> <span style="color: #89DDFF;">#'</span><span style="color: #ffcb6b;">centaur-tabs-local-mode</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Integrate with projectile
You can group your tabs by Projectiles project. Just use the following function in your configuration:
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org4153f20"><span style="color: #c792ea;">(</span><span style="color: #f78c6c;">centaur-tabs-group-by-projectile-project</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
base code:
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org413bd4b"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">use-package!</span> centaur-tabs
  &lt;&lt;centaur-tabs-hook-startup&gt;&gt;
  <span style="color: #82aaff;">:init</span>
  &lt;&lt;centaur-tabs-show-icons&gt;&gt;
  &lt;&lt;centaur-tabs-grayout-icons&gt;&gt;
  &lt;&lt;centaur-tabs-style&gt;&gt;
  &lt;&lt;centaur-tabs-underline&gt;&gt;
  &lt;&lt;centaur-tabs-modified-marker&gt;&gt;
  &lt;&lt;centaur-tabs-modified-marker-character&gt;&gt;
  &lt;&lt;centaur-tabs-close-button&gt;&gt;
  &lt;&lt;centaur-tabs-cycle-scope&gt;&gt;
  <span style="color: #82aaff;">:config</span>
  &lt;&lt;centaur-tabs-buffer-exclude&gt;&gt;
  &lt;&lt;centaur-tabs-font&gt;&gt;
  &lt;&lt;centaur-tabs-projectile&gt;&gt;
  &lt;&lt;centaur-tabs-show-icons&gt;&gt;
  &lt;&lt;centaur-tabs-modified-marker&gt;&gt;
  &lt;&lt;centaur-tabs-underline&gt;&gt;
  &lt;&lt;centaur-tabs-height&gt;&gt;
  &lt;&lt;centaur-tabs-horizontal-margin&gt;&gt;
  <span style="color: #f78c6c;">(</span><span style="color: #ffcb6b;">centaur-tabs-mode</span> t<span style="color: #f78c6c;">)</span>
  <span style="color: #82aaff;">:bind</span>
  &lt;&lt;centaur-tabs-vim-key&gt;&gt;
  <span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
<div id="outline-container-org3f46ba7" class="outline-4">
<h4 id="org3f46ba7"><span class="section-number-4">12.11.1</span> Style</h4>
<div class="outline-text-4" id="text-12-11-1">
<p>
Set centaur tabs height
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgabb5e23"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">centaur-tabs-height</span> <span style="color: #f78c6c; font-weight: bold;">30</span><span style="color: #c792ea;">)</span>
</pre>
</div>
<p>
Set the tab style to chamfer
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org49fba96"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">centaur-tabs-style</span> <span style="color: #c3e88d;">"chamfer"</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Display themed icons from all the icons
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgce643aa"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">centaur-tabs-set-icons</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Gray out icons for the unselected tabs
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org536aac4"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">centaur-tabs-</span><span style="color: #000000; background-color: #bebebe;">gray</span><span style="color: #ffcb6b;">-out-icons</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">buffer</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Display underline below the selected tab
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orge59ef13"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">centaur-tabs-set-bar</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">under</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Display a marker indicating that a buffer has been modified
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgea6baa7"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">centaur-tabs-set-modified-marker</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Set modified marker character
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org2751ebd"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">centaur-tabs-modified-marker</span> <span style="color: #c3e88d;">"&#8226;"</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Set close button character
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org4f63030"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">centaur-tabs-close-button</span> <span style="color: #c3e88d;">"&#61453;"</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Add horizontal margins
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org5bbbb4d"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">centaur-tabs-left-edge-margin</span> <span style="color: #c3e88d;">"         "</span><span style="color: #c792ea;">)</span>
<span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">centaur-tabs-right-edge-margin</span> <span style="color: #c3e88d;">"         "</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Enable Vim like tab motions
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org6004ea1"><span style="color: #c792ea;">(</span><span style="color: #82aaff;">:map</span> <span style="color: #ffcb6b;">evil-normal-state-map</span>
 <span style="color: #f78c6c;">(</span><span style="color: #c3e88d;">"g t"</span> . centaur-tabs-forward<span style="color: #f78c6c;">)</span>
 <span style="color: #f78c6c;">(</span><span style="color: #c3e88d;">"g T"</span> . centaur-tabs-backward<span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org3db9d2b" class="outline-3">
<h3 id="org3db9d2b"><span class="section-number-3">12.12</span> Modeline</h3>
<div class="outline-text-3" id="text-12-12">
<p>
Set doom modeline height
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orga35ad9a"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">doom-modeline-height</span> <span style="color: #f78c6c; font-weight: bold;">20</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org01d9ba6" class="outline-3">
<h3 id="org01d9ba6"><span class="section-number-3">12.13</span> Treemacs</h3>
<div class="outline-text-3" id="text-12-13">
<ul class="org-ul">
<li><a href="#orgc907877">Theme</a></li>
<li><a href="#orgc9f2f89">Fonts</a></li>
</ul>
</div>

<div id="outline-container-orgd7506b2" class="outline-4">
<h4 id="orgd7506b2"><span class="section-number-4">12.13.1</span> Set title for Treemacs workspace</h4>
<div class="outline-text-4" id="text-12-13-1">
<p>
Stolen code from <a href="https://andreyorst.gitlab.io/posts/2020-05-01-dynamic-title-for-treemacs-workspace/">https://andreyorst.gitlab.io/posts/2020-05-01-dynamic-title-for-treemacs-workspace/</a>
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org2f5be2c"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">defun</span> <span style="color: #82aaff;">my/treemacs-setup-title</span> <span style="color: #f78c6c;">()</span>
  <span style="color: #f78c6c;">(</span><span style="color: #89DDFF;">let</span> <span style="color: #c3e88d;">(</span><span style="color: #c792ea;">(</span>bg <span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">face-attribute</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">default</span> <span style="color: #82aaff;">:background</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
        <span style="color: #c792ea;">(</span>fg <span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">face-attribute</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">default</span> <span style="color: #82aaff;">:foreground</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span><span style="color: #c3e88d;">)</span>
    <span style="color: #c3e88d;">(</span><span style="color: #f78c6c;">face-remap-add-relative</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">header-line</span>
                             <span style="color: #82aaff;">:family</span> <span style="color: #c3e88d;">"Liberation Sans"</span>
                             <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">100</span>
                             <span style="color: #82aaff;">:background</span> bg <span style="color: #82aaff;">:foreground</span> fg
                             <span style="color: #82aaff;">:box</span> <span style="color: #89DDFF;">`</span><span style="color: #c792ea;">(</span><span style="color: #82aaff;">:line-width</span> ,<span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">/</span> <span style="color: #c3e88d;">(</span><span style="color: #f78c6c;">line-pixel-height</span><span style="color: #c3e88d;">)</span> <span style="color: #f78c6c; font-weight: bold;">2</span><span style="color: #f78c6c;">)</span> <span style="color: #82aaff;">:color</span> ,bg<span style="color: #c792ea;">)</span><span style="color: #c3e88d;">)</span><span style="color: #f78c6c;">)</span>
  <span style="color: #f78c6c;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">header-line-format</span>
        <span style="color: #89DDFF;">'</span><span style="color: #c3e88d;">(</span><span style="color: #c792ea;">(</span><span style="color: #82aaff;">:eval</span>
           <span style="color: #f78c6c;">(</span><span style="color: #89DDFF;">let*</span> <span style="color: #c3e88d;">(</span><span style="color: #c792ea;">(</span>text <span style="color: #c3e88d;">"Explorer"</span><span style="color: #c792ea;">)</span>
                  <span style="color: #c792ea;">(</span>extra-align <span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">+</span> <span style="color: #c3e88d;">(</span><span style="color: #f78c6c;">/</span> <span style="color: #c792ea;">(</span><span style="color: #f78c6c;">length</span> text<span style="color: #c792ea;">)</span> <span style="color: #f78c6c; font-weight: bold;">2</span><span style="color: #c3e88d;">)</span> <span style="color: #f78c6c; font-weight: bold;">1</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
                  <span style="color: #c792ea;">(</span>width <span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">-</span> <span style="color: #c3e88d;">(</span><span style="color: #f78c6c;">/</span> <span style="color: #c792ea;">(</span><span style="color: #f78c6c;">window-width</span><span style="color: #c792ea;">)</span> <span style="color: #f78c6c; font-weight: bold;">2</span><span style="color: #c3e88d;">)</span> extra-align<span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span><span style="color: #c3e88d;">)</span>
             <span style="color: #c3e88d;">(</span><span style="color: #f78c6c;">concat</span> <span style="color: #c792ea;">(</span><span style="color: #f78c6c;">make-string</span> width ?\s<span style="color: #c792ea;">)</span> text<span style="color: #c3e88d;">)</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span><span style="color: #c3e88d;">)</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>

<span style="color: #c792ea;">(</span><span style="color: #f78c6c;">add-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">treemacs-mode-hook</span> <span style="color: #89DDFF;">#'</span><span style="color: #c792ea;">my/treemacs-setup-title</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3e64c65" class="outline-4">
<h4 id="org3e64c65"><span class="section-number-4">12.13.2</span> Start treemacs on emacs startup</h4>
<div class="outline-text-4" id="text-12-13-2">
<div class="org-src-container">
<pre class="src src-elisp" id="org8be1c9d">
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org43f3b49" class="outline-3">
<h3 id="org43f3b49"><span class="section-number-3">12.14</span> Dashboard</h3>
<div class="outline-text-3" id="text-12-14">
</div>
<div id="outline-container-org29973a3" class="outline-4">
<h4 id="org29973a3"><span class="section-number-4">12.14.1</span> Set dashboard logo</h4>
<div class="outline-text-4" id="text-12-14-1">
<div class="org-src-container">
<pre class="src src-elisp" id="org6a7d96c"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">+doom-dashboard-banner-file</span> <span style="color: #c3e88d;">"emacs-logo.png"</span>
      <span style="color: #ffcb6b;">+doom-dashboard-banner-dir</span> <span style="color: #c3e88d;">"/etc"</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgbdc0cbd" class="outline-3">
<h3 id="orgbdc0cbd"><span class="section-number-3">12.15</span> Company auto completion/LSP</h3>
<div class="outline-text-3" id="text-12-15">
<p>
Enable company module <a href="#orge274199">here</a>
Enable LSP module <a href="#org318959e">here</a>
You also have to enable/install lsp per each language
</p>

<p>
Trigger completion immediately
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org85656bc"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">company-idle-delay</span> <span style="color: #f78c6c; font-weight: bold;">0</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Start company completion with single character
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org39a7565"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">company-minimum-prefix-length</span> <span style="color: #f78c6c; font-weight: bold;">1</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Don&rsquo;t show completion numbers
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org740b3c2"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">company-show-numbers</span> nil<span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Show completion for files
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgf5b4696"><span style="color: #c792ea;">(</span><span style="color: #82aaff;">set-company-backend!</span> <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>c-mode
                        c++-mode
                        haskell-mode
                        lisp-mode
                        sh-mode
                        css-mode
                        web-mode
                        js-mode
                        python-mode
                        rust-mode
                        org-mode
                        nix-mode<span style="color: #f78c6c;">)</span>
  <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span><span style="color: #82aaff;">:separate</span> company-files<span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Add rnix-lsp language server
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orged54b41"><span style="color: #c792ea;">(</span><span style="color: #f78c6c;">add-to-list</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">lsp-language-id-configuration</span> <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>nix-mode . <span style="color: #c3e88d;">"nix"</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
<span style="color: #c792ea;">(</span><span style="color: #f78c6c;">lsp-register-client</span>
 <span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">make-lsp-client</span> <span style="color: #82aaff;">:new-connection</span> <span style="color: #c3e88d;">(</span><span style="color: #f78c6c;">lsp-stdio-connection</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">(</span><span style="color: #c3e88d;">"rnix-lsp"</span><span style="color: #c792ea;">)</span><span style="color: #c3e88d;">)</span>
                  <span style="color: #82aaff;">:major-modes</span> <span style="color: #89DDFF;">'</span><span style="color: #c3e88d;">(</span>nix-mode<span style="color: #c3e88d;">)</span>
                  <span style="color: #82aaff;">:server-id</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">nix</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Disable lsp modeline diagnostics and sideline because it causes lag
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org1bb6992"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">lsp-modeline-diagnostics-enable</span> nil<span style="color: #c792ea;">)</span>
</pre>
</div>
<div class="org-src-container">
<pre class="src src-elisp" id="org75734bc"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> lsp-ui-sideline-enable nil<span style="color: #c792ea;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-elisp" id="org25732c8"><span style="color: #676E95;">;; </span><span style="color: #676E95;">Company completion</span>
<span style="color: #c792ea;">(</span><span style="color: #89DDFF;">after!</span> company
  &lt;&lt;company-idle-delay&gt;&gt;
  &lt;&lt;company-minimum-prefix-length&gt;&gt;
  &lt;&lt;company-show-numbers&gt;&gt;
  <span style="color: #c792ea;">)</span>
&lt;&lt;company-files-add&gt;&gt;

<span style="color: #676E95;">;; </span><span style="color: #676E95;">LSP language server</span>
<span style="color: #c792ea;">(</span><span style="color: #89DDFF;">after!</span> <span style="color: #ffcb6b;">lsp-mode</span>
  &lt;&lt;lsp-add-rnix&gt;&gt;
  &lt;&lt;lsp-modeline-diagnostics&gt;&gt;
  &lt;&lt;lsp-ui-sideline-enable&gt;&gt;
  <span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfaee48e" class="outline-3">
<h3 id="orgfaee48e"><span class="section-number-3">12.16</span> Projectile</h3>
<div class="outline-text-3" id="text-12-16">
<p>
Projectile is a project interaction library for Emacs.
</p>

<p>
Set project search path to <code>$HOME/code</code>
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orga169987"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">projectile-project-search-path</span> <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span><span style="color: #c3e88d;">"~/code"</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Add this repository(<code>$HOME/.nixconfig</code>) to projectile
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org700c108"><span style="color: #c792ea;">(</span><span style="color: #f78c6c;">projectile-add-known-project</span> <span style="color: #c3e88d;">"~/.nixconfig"</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org157cc30" class="outline-3">
<h3 id="org157cc30"><span class="section-number-3">12.17</span> Magit</h3>
<div class="outline-text-3" id="text-12-17">
<p>
Magit is a complete text-based user interface to Git inside emacs.
</p>

<p>
Configure magit
</p>

<p>
Enable magit syntax highlight
Needs <code>pkgs.gitAndTools.delta</code> installed
Install magit-delta:
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgc267eb9"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> magit-delta<span style="color: #c792ea;">)</span>
</pre>
</div>
<p>
Enable it:
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgf1b0a8e"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">after!</span> magit
  <span style="color: #f78c6c;">(</span><span style="color: #82aaff;">magit-delta-mode</span> <span style="color: #f78c6c; font-weight: bold;">+1</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgaf3cb75" class="outline-3">
<h3 id="orgaf3cb75"><span class="section-number-3">12.18</span> Dired</h3>
<div class="outline-text-3" id="text-12-18">
<p>
Set dired default to ranger mode
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org64b382e"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">use-package!</span> ranger
    <span style="color: #82aaff;">:config</span> <span style="color: #f78c6c;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">ranger-override-dired</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">ranger</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf2a76db" class="outline-3">
<h3 id="orgf2a76db"><span class="section-number-3">12.19</span> org-mode</h3>
<div class="outline-text-3" id="text-12-19">
<p>
Configure org-mode
</p>
</div>

<div id="outline-container-org73f4d83" class="outline-4">
<h4 id="org73f4d83"><span class="section-number-4">12.19.1</span> Set org-mode directory</h4>
<div class="outline-text-4" id="text-12-19-1">
<div class="org-src-container">
<pre class="src src-elisp" id="org9069d64"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">org-directory</span> <span style="color: #c3e88d;">"~/org/"</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org34d06ec" class="outline-4">
<h4 id="org34d06ec"><span class="section-number-4">12.19.2</span> Start every org-mode files folded.</h4>
<div class="outline-text-4" id="text-12-19-2">
<p>
It can be set per-file, but better also set here:
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org8e4ca87"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">org-startup-folded</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org964186b" class="outline-4">
<h4 id="org964186b"><span class="section-number-4">12.19.3</span> Start every org-mode files with inline images</h4>
<div class="outline-text-4" id="text-12-19-3">
<div class="org-src-container">
<pre class="src src-elisp" id="orge91d3bf"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">org-startup-with-inline-images</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8dc21eb" class="outline-4">
<h4 id="org8dc21eb"><span class="section-number-4">12.19.4</span> Enable variable pitch font in org-mode using mixed-pitch-mode</h4>
<div class="outline-text-4" id="text-12-19-4">
<p>
Install it:
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org928e6ac"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">package!</span> mixed-pitch<span style="color: #c792ea;">)</span>
</pre>
</div>
<p>
Hook it into org-mode:
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgd55070c"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">use-package!</span> mixed-pitch
  <span style="color: #82aaff;">:hook</span>
  <span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">org-mode</span> . <span style="color: #ffcb6b;">mixed-pitch-mode</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>
<p>
You have to set variable pitch font from link below
</p>
<ul class="org-ul">
<li><a href="#org73371bf">Fonts</a></li>
</ul>
<p>
company-mode becomes zig zag in org-mode when we use <code>mixed-pitch-mode</code>.
We have to use company-box(childframe) to workaround it.
</p>

<p>
Set mixed-pitch-mode variable pitch font height (This is required to set different variable-pitch font size than fixed-pitch one)
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org8ac1319"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">mixed-pitch-set-height</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf679dab" class="outline-4">
<h4 id="orgf679dab"><span class="section-number-4">12.19.5</span> Set org-mode headline bullets characters.</h4>
<div class="outline-text-4" id="text-12-19-5">
<p>
I use emoji
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org6e7dd40"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">org-superstar-headline-bullets-list</span> <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span><span style="color: #c3e88d;">"&#127761;"</span> <span style="color: #c3e88d;">"&#128156;"</span> <span style="color: #c3e88d;">"&#128091;"</span> <span style="color: #c3e88d;">"&#10052;"</span> <span style="color: #c3e88d;">"&#127799;"</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orge29772a" class="outline-4">
<h4 id="orge29772a"><span class="section-number-4">12.19.6</span> Hide markup elements(<b>bold</b>, <i>italic</i>)</h4>
<div class="outline-text-4" id="text-12-19-6">
<div class="org-src-container">
<pre class="src src-elisp" id="orga62e5c0"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">org-hide-emphasis-markers</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcacf07c" class="outline-4">
<h4 id="orgcacf07c"><span class="section-number-4">12.19.7</span> Increase headline font sizes according to level</h4>
<div class="outline-text-4" id="text-12-19-7">
<div class="org-src-container">
<pre class="src src-elisp" id="org72dec1c"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">with-eval-after-load</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">org</span>
  <span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">set-face-attribute</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">org-level-1</span> nil <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">1.5</span><span style="color: #f78c6c;">)</span>
  <span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">set-face-attribute</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">org-level-2</span> nil <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">1.25</span><span style="color: #f78c6c;">)</span>
  <span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">set-face-attribute</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">org-level-3</span> nil <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">1.0</span><span style="color: #f78c6c;">)</span>
  <span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">set-face-attribute</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">org-level-4</span> nil <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">1.0</span><span style="color: #f78c6c;">)</span>
  <span style="color: #f78c6c;">(</span><span style="color: #f78c6c;">set-face-attribute</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">org-level-5</span> nil <span style="color: #82aaff;">:height</span> <span style="color: #f78c6c; font-weight: bold;">1.0</span><span style="color: #f78c6c;">)</span>
  <span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org59c2267" class="outline-4">
<h4 id="org59c2267"><span class="section-number-4">12.19.8</span> Set org-mode folding symbol(ellipsis) to triangle</h4>
<div class="outline-text-4" id="text-12-19-8">
<div class="org-src-container">
<pre class="src src-elisp" id="org6764e25"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">org-ellipsis</span> <span style="color: #c3e88d;">"&#61703;"</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org718bca2" class="outline-4">
<h4 id="org718bca2"><span class="section-number-4">12.19.9</span> Set margins for org-mode</h4>
<div class="outline-text-4" id="text-12-19-9">
<div class="org-src-container">
<pre class="src src-elisp" id="orgf2da8dd"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">defun</span> <span style="color: #82aaff;">my-set-margins</span> <span style="color: #f78c6c;">()</span>
  <span style="color: #f78c6c;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">left-margin-width</span> <span style="color: #f78c6c; font-weight: bold;">2</span><span style="color: #f78c6c;">)</span>
  <span style="color: #f78c6c;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">right-margin-width</span> <span style="color: #f78c6c; font-weight: bold;">2</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
<span style="color: #c792ea;">(</span><span style="color: #f78c6c;">add-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">org-mode-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">my-set-margins</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org59fd000" class="outline-3">
<h3 id="org59fd000"><span class="section-number-3">12.20</span> Evil-mode</h3>
<div class="outline-text-3" id="text-12-20">
<p>
Evil is an extensible vi layer for Emacs. It emulates the main features of Vim, and provides facilities for writing custom extensions.
It comes with doom-emacs.
Configure it:
</p>

<p>
Disable evil-escape
evil-escape is a customizable key sequence to escape from insert state and everything else in Emacs.
It&rsquo;s binded in &ldquo;jk&rdquo; by default. I don&rsquo;t use it.
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgdb3adc3"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">after!</span> evil-escape <span style="color: #f78c6c;">(</span><span style="color: #ffcb6b;">evil-escape-mode</span> <span style="color: #f78c6c; font-weight: bold;">-1</span><span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Set evil-mode substitute(search and replace) to global by default
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org389296e"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">after!</span> evil <span style="color: #f78c6c;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">evil-ex-substitute-global</span> t<span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6fd816e" class="outline-3">
<h3 id="org6fd816e"><span class="section-number-3">12.21</span> Avy</h3>
<div class="outline-text-3" id="text-12-21">
<p>
Remap avy(qutebrowser-like hinting) to the dvorak home row
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org900aee1"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">avy-keys</span> <span style="color: #89DDFF;">'</span><span style="color: #f78c6c;">(</span>?a ?o ?e ?u ?i ?d ?h ?t ?n ?s<span style="color: #f78c6c;">)</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org204804f" class="outline-3">
<h3 id="org204804f"><span class="section-number-3">12.22</span> Rainbow mode</h3>
<div class="outline-text-3" id="text-12-22">
<p>
Enable rainbow mode(RGB code preview) for all files
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgca201d5"><span style="color: #c792ea;">(</span><span style="color: #f78c6c;">add-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">text-mode-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">rainbow-mode</span><span style="color: #c792ea;">)</span>
<span style="color: #c792ea;">(</span><span style="color: #f78c6c;">add-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">prog-mode-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">rainbow-mode</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orge2095af" class="outline-3">
<h3 id="orge2095af"><span class="section-number-3">12.23</span> Haskell mode</h3>
<div class="outline-text-3" id="text-12-23">
<p>
Use brittany to format haskell file
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org10ffed9"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">use-package!</span> haskell-mode
  <span style="color: #82aaff;">:config</span>
  <span style="color: #f78c6c;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">haskell-mode-stylish-haskell-path</span> <span style="color: #c3e88d;">"brittany"</span><span style="color: #f78c6c;">)</span>
<span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Set haskell-language-server as LSP
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgf99a514"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">use-package!</span> lsp-haskell
 <span style="color: #82aaff;">:config</span>
 <span style="color: #f78c6c;">(</span><span style="color: #89DDFF;">setq</span> lsp-haskell-process-path-hie <span style="color: #c3e88d;">"haskell-language-server-wrapper"</span><span style="color: #f78c6c;">)</span>
<span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org5937387" class="outline-3">
<h3 id="org5937387"><span class="section-number-3">12.24</span> Twittering mode</h3>
<div class="outline-text-3" id="text-12-24">
<p>
Display icons
Requires imagemagick
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org11826e2"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">after!</span> twittering-mode
  <span style="color: #f78c6c;">(</span><span style="color: #89DDFF;">setq</span> twittering-icon-mode t<span style="color: #f78c6c;">)</span>
  <span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org9c0d309" class="outline-3">
<h3 id="org9c0d309"><span class="section-number-3">12.25</span> Performance (optimize, remove the clutter)</h3>
<div class="outline-text-3" id="text-12-25">
<p>
Disable modeline word
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org8409ef6"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">doom-modeline-enable-word-count</span> nil<span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Faster childframe performance
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgab9a77a"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">posframe-gtk-resize-child-frames</span> <span style="color: #89DDFF;">'</span><span style="color: #c792ea;">resize-mode</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Fast but imprecise scrolling
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org197b6ca"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">fast-but-imprecise-scrolling</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Enable Pixel Scroll Mode for smoother (jk) scroll
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="orgd8bffd2"><span style="color: #c792ea;">(</span><span style="color: #f78c6c;">add-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">prog-mode-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">pixel-scroll-mode</span><span style="color: #c792ea;">)</span>
<span style="color: #c792ea;">(</span><span style="color: #f78c6c;">add-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">text-mode-hook</span> <span style="color: #89DDFF;">'</span><span style="color: #ffcb6b;">pixel-scroll-mode</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Never go back to the old scrolling behaviour
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org6903ea6"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">pixel-dead-time</span> <span style="color: #f78c6c; font-weight: bold;">0</span><span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Scroll by number of pixels instead of lines
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org657b7d4"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">setq</span> <span style="color: #ffcb6b;">pixel-resolution-fine-flag</span> t<span style="color: #c792ea;">)</span>
</pre>
</div>

<p>
Disable line highlight
</p>
<div class="org-src-container">
<pre class="src src-elisp" id="org1329175"><span style="color: #c792ea;">(</span><span style="color: #89DDFF;">remove-hook!</span> doom-first-buffer <span style="color: #89DDFF;">#'</span><span style="color: #ffcb6b;">global-hl-line-mode</span><span style="color: #c792ea;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org8f99b00" class="outline-3">
<h3 id="org8f99b00"><span class="section-number-3">12.26</span> emacs.nix base code</h3>
<div class="outline-text-3" id="text-12-26">
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ...}:
{
  &lt;<span style="color: #f78c6c;">&lt;emacs-install&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;emacs-package&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;vterm-install&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;emacs-enable-daemon&gt;</span>&gt;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orge3cc69d" class="outline-3">
<h3 id="orge3cc69d"><span class="section-number-3">12.27</span> doom-emacs config.el base code</h3>
<div class="outline-text-3" id="text-12-27">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #676E95;">;;; </span><span style="color: #676E95;">$DOOMDIR/config.el -*- lexical-binding: t; -*-</span>
<span style="color: #676E95;">;</span><span style="color: #676E95;">This file is generated from "README.org"</span>
&lt;&lt;emacs-fix-nativecomp&gt;&gt;
&lt;&lt;emacs-doom-fonts&gt;&gt;
&lt;&lt;emacs-extrafonts&gt;&gt;
&lt;&lt;emacs-custom-set-faces&gt;&gt;
&lt;&lt;emacs-emojify-display-style&gt;&gt;
&lt;&lt;emacs-theme&gt;&gt;
&lt;&lt;emacs-theme-bold&gt;&gt;
&lt;&lt;emacs-theme-italic&gt;&gt;
&lt;&lt;emacs-dashboard-logo&gt;&gt;
&lt;&lt;emacs-treemacs-theme&gt;&gt;
&lt;&lt;emacs-treemacs-fonts&gt;&gt;
&lt;&lt;emacs-treemacs-startup&gt;&gt;
&lt;&lt;emacs-treemacs-dynamic-title&gt;&gt;
&lt;&lt;emacs-disable-line-number&gt;&gt;
&lt;&lt;emacs-indent-space&gt;&gt;
&lt;&lt;emacs-indent-guide-config&gt;&gt;
&lt;&lt;projecile-add-searchpath&gt;&gt;
&lt;&lt;projectile-add-nixconfig&gt;&gt;
&lt;&lt;doom-modeline-disable-word-count&gt;&gt;
&lt;&lt;doom-modeline-height&gt;&gt;
&lt;&lt;emacs-posframe-resizemode&gt;&gt;
&lt;&lt;emacs-fast-but-imprecise-scrolling&gt;&gt;
&lt;&lt;emacs-pixel-scroll-mode&gt;&gt;
&lt;&lt;emacs-pixel-dead-line&gt;&gt;
&lt;&lt;emacs-pixel-resolution-fine-flag&gt;&gt;
&lt;&lt;emacs-disable-hl-line-mode&gt;&gt;
&lt;&lt;centaur-tabs-config&gt;&gt;
&lt;&lt;emacs-company-config&gt;&gt;
&lt;&lt;emacs-haskell-mode-indent&gt;&gt;
&lt;&lt;emacs-history-length&gt;&gt;
&lt;&lt;emacs-rainbow-mode-hook&gt;&gt;
&lt;&lt;emacs-org-directory&gt;&gt;
&lt;&lt;emacs-org-startup-folded&gt;&gt;
&lt;&lt;emacs-org-startup-inline-images&gt;&gt;
&lt;&lt;emacs-org-mixed-pitch-enable&gt;&gt;
&lt;&lt;emacs-org-mixed-pitch-height&gt;&gt;
&lt;&lt;emacs-org-headline-bullets&gt;&gt;
&lt;&lt;emacs-org-hide-emphasis-markers&gt;&gt;
&lt;&lt;emacs-org-headline-fontsize&gt;&gt;
&lt;&lt;emacs-org-ellipsis&gt;&gt;
&lt;&lt;emacs-org-margins&gt;&gt;
&lt;&lt;evil-escape-disable&gt;&gt;
&lt;&lt;evil-substitute-global&gt;&gt;
&lt;&lt;emacs-avy-dvorak&gt;&gt;
&lt;&lt;emacs-auto-save&gt;&gt;
&lt;&lt;emacs-delete-trash&gt;&gt;
&lt;&lt;emacs-x-stretch-cursor&gt;&gt;
&lt;&lt;emacs-dired-ranger&gt;&gt;
&lt;&lt;emacs-haskell-brittany&gt;&gt;
&lt;&lt;emacs-haskell-language-server&gt;&gt;
&lt;&lt;emacs-opacity&gt;&gt;
&lt;&lt;emacs-twittering-mode-icon&gt;&gt;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org8cd5df6" class="outline-2">
<h2 id="org8cd5df6"><span class="section-number-2">13</span> neovim</h2>
<div class="outline-text-2" id="text-13">
</div>
<div id="outline-container-org7376d86" class="outline-3">
<h3 id="org7376d86"><span class="section-number-3">13.1</span> Open lazygit commit window inside neovim</h3>
<div class="outline-text-3" id="text-13-1">
<div class="org-src-container">
<pre class="src src-fish" id="orgeea0a0a"><span style="color: #676E95;"># </span><span style="color: #676E95;">Open lazygit commit window inside neovim</span>
<span style="color: #89DDFF;">if</span> [ -n <span style="color: #c3e88d;">"$NVIM_LISTEN_ADDRESS"</span> ];
    <span style="color: #82aaff;">alias</span> nvim=<span style="color: #c3e88d;">"nvr -cc split --remote-wait +'set bufhidden=wipe'"</span>
<span style="color: #89DDFF;">end</span>

<span style="color: #89DDFF;">if</span> [ -n <span style="color: #c3e88d;">"$NVIM_LISTEN_ADDRESS"</span> ];
    <span style="color: #82aaff;">export</span> VISUAL=<span style="color: #c3e88d;">"nvr -cc split --remote-wait +'set bufhidden=wipe'"</span>
    <span style="color: #82aaff;">export</span> EDITOR=<span style="color: #c3e88d;">"nvr -cc split --remote-wait +'set bufhidden=wipe'"</span>
<span style="color: #89DDFF;">else</span>
    <span style="color: #82aaff;">export</span> VISUAL=<span style="color: #c3e88d;">"nvim"</span>
    <span style="color: #82aaff;">export</span> EDITOR=<span style="color: #c3e88d;">"nvim"</span>
<span style="color: #89DDFF;">end</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org9ccfa66" class="outline-2">
<h2 id="org9ccfa66"><span class="section-number-2">14</span> Dev environment</h2>
<div class="outline-text-2" id="text-14">
</div>
<div id="outline-container-org57af4e6" class="outline-3">
<h3 id="org57af4e6"><span class="section-number-3">14.1</span> Haskell</h3>
<div class="outline-text-3" id="text-14-1">
<p>
Haskell packages to install on home environment
We need haskell-language-server to use in emacs
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgf9bb3ac"><span style="color: #ffcb6b;">haskell-env</span> = pkgs.unstable.haskellPackages.ghcWithHoogle (
  hp: <span style="color: #89DDFF;">with</span> hp; [
    xmonad
    xmonad-contrib
    xmonad-extras
    apply-refact
    haskell-language-server
    brittany
    cabal-install
    hlint
    xmobar
  ]
);
</pre>
</div>

<p>
put these packages at <code>home.packages</code> to install like this:
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org9238479">haskell-env
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org0bf504b" class="outline-2">
<h2 id="org0bf504b"><span class="section-number-2">15</span> Web Browser</h2>
<div class="outline-text-2" id="text-15">
</div>
<div id="outline-container-orgeeb020c" class="outline-3">
<h3 id="orgeeb020c"><span class="section-number-3">15.1</span> qutebrowser</h3>
<div class="outline-text-3" id="text-15-1">
<p>
I use qutebrowser as main browser.
qutebrowser is a keyboard-focused(Vim-style key bindings) browser with a minimal GUI based on Chromium(qtwebengine).
</p>
<ul class="org-ul">
<li><a href="#org35794ad">Colors</a></li>
<li><a href="#org595ff46">Fonts</a></li>
</ul>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  &lt;<span style="color: #f78c6c;">&lt;qutebrowser-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;qutebrowser-searchengine&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;qutebrowser-gpu-acceleration&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;qutebrowser-mpv&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;qutebrowser-mpv-hint&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;qutebrowser-start-page&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;qutebrowser-default-zoom&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;qutebrowser-hinting-dvorak&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;qutebrowser-fonts&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;qutebrowser-darkmode&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;qutebrowser-colors&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;qutebrowser-history-max-completion&gt;</span>&gt;
  <span style="color: #ffcb6b;">programs.qutebrowser.extraConfig</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">      &lt;&lt;qutebrowser-emacs-editor&gt;&gt;</span>
<span style="color: #c3e88d;">    ''</span>;
}
</pre>
</div>
</div>
<div id="outline-container-orge5a8329" class="outline-4">
<h4 id="orge5a8329"><span class="section-number-4">15.1.1</span> Install qutebrowser</h4>
<div class="outline-text-4" id="text-15-1-1">
<p>
Turn on this option to install qutebrowser
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgc1107a9"><span style="color: #ffcb6b;">programs.qutebrowser.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org59bed22" class="outline-4">
<h4 id="org59bed22"><span class="section-number-4">15.1.2</span> Search engine</h4>
<div class="outline-text-4" id="text-15-1-2">
<p>
While the default option (DuckDuckGo) is great, I&rsquo;m still not ready to switch to it.
So, I choose to use Google as default search engine
qutebrowser can set multiple search engines, but I don&rsquo;t use it.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgc5929da"><span style="color: #ffcb6b;">programs.qutebrowser.searchEngines</span> = {
    <span style="color: #ffcb6b;">DEFAULT</span> = <span style="color: #c3e88d;">"https://google.com/search?q={}"</span>;
};
</pre>
</div>
</div>
</div>
<div id="outline-container-org6980c75" class="outline-4">
<h4 id="org6980c75"><span class="section-number-4">15.1.3</span> GPU acceleration</h4>
<div class="outline-text-4" id="text-15-1-3">
<p>
Idk why, these gpu acceleration flags are disabled in qtwebengine by default (See <a href="https://github.com/qutebrowser/qutebrowser/issues/5378">Issue 5378</a>)
These flags makes a significant difference in perfomance, CPU usage, and battery life. Especially usable for laptop. Enable it.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org6f6f386"><span style="color: #ffcb6b;">programs.qutebrowser.settings.qt.args</span> = [ <span style="color: #c3e88d;">"enable-native-gpu-memory-buffers"</span> <span style="color: #c3e88d;">"enable-gpu-rasterization"</span> <span style="color: #c3e88d;">"use-gl=egl"</span> <span style="color: #c3e88d;">"ignore-gpu-blacklist"</span> <span style="color: #c3e88d;">"num-raster-threads=4"</span> ];
</pre>
</div>
</div>
</div>
<div id="outline-container-org06ecfa5" class="outline-4">
<h4 id="org06ecfa5"><span class="section-number-4">15.1.4</span> Youtube playback with mpv</h4>
<div class="outline-text-4" id="text-15-1-4">
<p>
Youtube video uses vp9 codec nowadays, that can&rsquo;t be playbacked in Linux with GPU acceleration.
That can be workaronuded by using Plugin to force h264 in Firefox.
But, qutebrowser can&rsquo;t. So, just play the video in mpv as alternative workaround.
Press <code>yd</code> to open current youtube video URL in mpv
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org1b6ccba">programs.qutebrowser.keyBindings.normal.<span style="color: #c3e88d;">"yd"</span> = <span style="color: #c3e88d;">"spawn mpv --ytdl-format='bestvideo[height&lt;=?1080][vcodec!=vp9]+bestaudio/best' {url}"</span>;
</pre>
</div>
<p>
Or, <code>yf</code> use hints to select and open youtube video in mpv
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgdbfef71">programs.qutebrowser.keyBindings.normal.<span style="color: #c3e88d;">"yf"</span> = <span style="color: #c3e88d;">"hint links spawn mpv --ytdl-format='bestvideo[height&lt;=?1080][vcodec!=vp9]+bestaudio/best' --force-window yes {hint-url}"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org23b052e" class="outline-4">
<h4 id="org23b052e"><span class="section-number-4">15.1.5</span> Qutebrowser start page</h4>
<div class="outline-text-4" id="text-15-1-5">
<p>
Set my own start page
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org040db9e"><span style="color: #ffcb6b;">programs.qutebrowser.settings.url.start_pages</span> = [ <span style="color: #c3e88d;">"https://btwiusegentoo.github.io/start.html"</span> ];
<span style="color: #ffcb6b;">programs.qutebrowser.settings.url.default_page</span> = <span style="color: #c3e88d;">"https://btwiusegentoo.github.io/start.html"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org6bfbe35" class="outline-4">
<h4 id="org6bfbe35"><span class="section-number-4">15.1.6</span> Max completion history items</h4>
<div class="outline-text-4" id="text-15-1-6">
<p>
Set qutebrowser max completion items from history to 30
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgfcfcddb"><span style="color: #ffcb6b;">programs.qutebrowser.settings.completion.web_history.max_items</span> = <span style="color: #f78c6c; font-weight: bold;">30</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org7dc2354" class="outline-4">
<h4 id="org7dc2354"><span class="section-number-4">15.1.7</span> Default zoom</h4>
<div class="outline-text-4" id="text-15-1-7">
<p>
Even with 1080p xrandr scale in laptop or 1440p xrandr scale in desktop, I feel everything is too big(possibly I&rsquo;m weird)
So I have to set default zoom to 90%
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org9afdace"><span style="color: #ffcb6b;">programs.qutebrowser.settings.zoom.default</span> = <span style="color: #c3e88d;">"90%"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd795940" class="outline-4">
<h4 id="orgd795940"><span class="section-number-4">15.1.8</span> Edit text on qutebrowser using emacs</h4>
<div class="outline-text-4" id="text-15-1-8">
<p>
You can write text in qutebrowser using emacs.
This is really useful when using Reddit, or writing GitHub issue,etc.
Requires 
</p>
<div class="org-src-container">
<pre class="src src-python" id="orga637def">c.editor.<span style="color: #ffcb6b;">command</span> = [<span style="color: #c3e88d;">"emacsclient"</span>, <span style="color: #c3e88d;">"-c"</span>, <span style="color: #c3e88d;">"--eval"</span>, <span style="color: #c3e88d;">"(find-file \"{}\")"</span>, <span style="color: #c3e88d;">"(org-mode)"</span>]
</pre>
</div>
</div>
</div>
<div id="outline-container-orga963441" class="outline-4">
<h4 id="orga963441"><span class="section-number-4">15.1.9</span> Dvorak friendly Hinting</h4>
<div class="outline-text-4" id="text-15-1-9">
<div class="org-src-container">
<pre class="src src-nix" id="orge94ce8f"><span style="color: #ffcb6b;">programs.qutebrowser.settings.hints.chars</span> = <span style="color: #c3e88d;">"aoeuidhtns"</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb04bd72" class="outline-3">
<h3 id="orgb04bd72"><span class="section-number-3">15.2</span> Firefox</h3>
<div class="outline-text-3" id="text-15-2">
<p>
Firefox is my backup browser.
I Use for certain websites that qutebrowser can&rsquo;t access(like widevine websites in NixOS), or games, etc.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:
{
  &lt;<span style="color: #f78c6c;">&lt;firefox-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;firefox-package&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;firefox-extensions&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;firefox-startpage&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;firefox-search-isus&gt;</span>&gt;
  <span style="color: #ffcb6b;">programs.firefox.profiles.default.isDefault</span> = <span style="color: #82aaff;">true</span>;
  <span style="color: #ffcb6b;">programs.firefox.profiles.default.name</span> = <span style="color: #c3e88d;">"Default"</span>;
}
</pre>
</div>
</div>
<div id="outline-container-org6307cd9" class="outline-4">
<h4 id="org6307cd9"><span class="section-number-4">15.2.1</span> Install Firefox</h4>
<div class="outline-text-4" id="text-15-2-1">
<p>
Turn on to install Firefox
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org9258853"><span style="color: #ffcb6b;">programs.firefox.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org6c33bb9" class="outline-4">
<h4 id="org6c33bb9"><span class="section-number-4">15.2.2</span> Firefox package</h4>
<div class="outline-text-4" id="text-15-2-2">
<p>
I like to use Firefox from nixpkgs-unstable
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org7a6894c"><span style="color: #ffcb6b;">programs.firefox.package</span> = pkgs.unstable.firefox;
</pre>
</div>
</div>
</div>
<div id="outline-container-orga536abf" class="outline-4">
<h4 id="orga536abf"><span class="section-number-4">15.2.3</span> Extensions</h4>
<div class="outline-text-4" id="text-15-2-3">
<p>
Extensions to install goes here:
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org7dce1c1"><span style="color: #ffcb6b;">programs.firefox.extensions</span> = <span style="color: #89DDFF;">with</span> pkgs.nur.repos.rycee.firefox-addons; [
  &lt;<span style="color: #f78c6c;">&lt;firefox-tridactyl-install&gt;</span>&gt;
  ublock-origin
];
</pre>
</div>
</div>
</div>
<div id="outline-container-org2c726f0" class="outline-4">
<h4 id="org2c726f0"><span class="section-number-4">15.2.4</span> Tridactyl</h4>
<div class="outline-text-4" id="text-15-2-4">
<p>
Tridactyl is a Firefox plugin that provides Vim key bindings. Makes Firefox usable.
Replaces Firefoxs control mechanism with one modelled on Vim.
</p>

<p>
Let&rsquo;s install it:
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgd67931c">tridactyl
</pre>
</div>
</div>

<ol class="org-ol">
<li><a id="org64ce1dc"></a><span class="todo TODO">TODO</span> Configuration<br />
<div class="outline-text-5" id="text-15-2-4-1">
<p>
Idk why, file based configuration doesn&rsquo;t work now.
Configuration to make it behave like qutebrowser
</p>
<div class="org-src-container">
<pre class="src src-vimrc" id="orge37817b">
<span style="color: #676E95;">" Remove local config</span>
sanitise tridactyllocal tridactylsync

<span style="color: #676E95;">" Adjust scroll speed</span>
bind <span style="color: #89DDFF;">j</span> scrollline <span style="color: #87ceeb;">-2</span>
bind <span style="color: #89DDFF;">k</span> scrollline <span style="color: #f78c6c; font-weight: bold;">2</span>
<span style="color: #676E95;">" Set tab move direction same as qutebrowser</span>
bind J <span style="color: #89DDFF;">tabnext</span>
bind K tabprev
<span style="color: #676E95;">" Use qutebrowser like behavior for new tab :open</span>
bind O fillcmdline tabopen
</pre>
</div>
<p>
Install tridactyl configuration into <code>$HOME/.config/tridactyl/tridactylrc</code>
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orge7f60d6"><span style="color: #c3e88d;">"tridactyl/tridactylrc"</span>.<span style="color: #ffcb6b;">text</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">    &lt;&lt;tridactylrc&gt;&gt;</span>
<span style="color: #c3e88d;">''</span>;
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-orga72911a" class="outline-4">
<h4 id="orga72911a"><span class="section-number-4">15.2.5</span> Start page</h4>
<div class="outline-text-4" id="text-15-2-5">
<p>
Set my own startpage
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org164021f">programs.firefox.profiles.default.settings.<span style="color: #c3e88d;">"browser.startup.homepage"</span> = <span style="color: #c3e88d;">"https://btwiusegentoo.github.io/start.html"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org223d2e0" class="outline-4">
<h4 id="org223d2e0"><span class="section-number-4">15.2.6</span> Use US google search engine</h4>
<div class="outline-text-4" id="text-15-2-6">
<div class="org-src-container">
<pre class="src src-nix" id="org43d36bd">programs.firefox.profiles.default.settings.<span style="color: #c3e88d;">"browser.search.isUS"</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org87b596f" class="outline-2">
<h2 id="org87b596f"><span class="section-number-2">16</span> Multimedia</h2>
<div class="outline-text-2" id="text-16">
</div>
<div id="outline-container-org8725316" class="outline-3">
<h3 id="org8725316"><span class="section-number-3">16.1</span> mpv</h3>
<div class="outline-text-3" id="text-16-1">
<p>
mpv is a FOSS, lightweight command line media player. It supports a wide variety of media file formats.
I mostly use it to play Youtube videos <a href="#org06ecfa5">spawning from qutebrowser</a> , Thanks to 
</p>
<ul class="org-ul">
<li><a href="#org5bd3822">Background Color</a></li>
</ul>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  &lt;<span style="color: #f78c6c;">&lt;mpv-install&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;mpv-background-color&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;mpv-hardware-decoding&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;mpv-bindings&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-orgec935bb" class="outline-4">
<h4 id="orgec935bb"><span class="section-number-4">16.1.1</span> Install mpv</h4>
<div class="outline-text-4" id="text-16-1-1">
<p>
Turn on to install mpv
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org8b175d6"><span style="color: #ffcb6b;">programs.mpv.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc0fa354" class="outline-4">
<h4 id="orgc0fa354"><span class="section-number-4">16.1.2</span> Enable hardware decoding</h4>
<div class="outline-text-4" id="text-16-1-2">
<p>
Hardware decoding is not enabled by default because it&rsquo;s likely to cause issues like tearing, stutter, etc on Low Power GPUs
My GPUs are totally fine. Enable it:
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org3bf75d4"><span style="color: #ffcb6b;">programs.mpv.config.hwdec</span> = <span style="color: #c3e88d;">"auto"</span>;
<span style="color: #ffcb6b;">programs.mpv.config.hwdec-codecs</span> = <span style="color: #c3e88d;">"all"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd529642" class="outline-4">
<h4 id="orgd529642"><span class="section-number-4">16.1.3</span> mpv default volume</h4>
<div class="outline-text-4" id="text-16-1-3">
<p>
Set the startup volume. 0 means silence, 100 means no volume reduction or ampififacion.
Negative values can be passed for compatibility, but are treated as 0.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org3c70098"><span style="color: #ffcb6b;">programs.mpv.config.volume</span> = <span style="color: #f78c6c; font-weight: bold;">80</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org271260c" class="outline-4">
<h4 id="org271260c"><span class="section-number-4">16.1.4</span> mpv key bindings</h4>
<div class="outline-text-4" id="text-16-1-4">
<p>
Even though I use <a href="#orgb17045f">5.1.2</a>, I&rsquo;m vim keybinding user.
<b>hjkl</b> feels much better than arrow key.
It&rsquo;s a great idea to control volume and seek video/music with <b>hjkl</b>
<b>l</b> already have set to ab-loop for default. So I have to change it.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orge636bf9"><span style="color: #ffcb6b;">programs.mpv.bindings</span> = {
    <span style="color: #ffcb6b;">h</span> = <span style="color: #c3e88d;">"seek -10"</span>;
    <span style="color: #ffcb6b;">j</span> = <span style="color: #c3e88d;">"add volume -2"</span>;
    <span style="color: #ffcb6b;">k</span> = <span style="color: #c3e88d;">"add volume 2"</span>;
    <span style="color: #ffcb6b;">l</span> = <span style="color: #c3e88d;">"seek 10"</span>;
    <span style="color: #c3e88d;">"Ctrl+l"</span> = <span style="color: #c3e88d;">"ab-loop"</span>;
};
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf970f77" class="outline-3">
<h3 id="orgf970f77"><span class="section-number-3">16.2</span> zathura</h3>
<div class="outline-text-3" id="text-16-2">
<p>
zathura is a highly customizable and functional document viewer based on the girara user interface library and several document libraries.
</p>
<ul class="org-ul">
<li><a href="#orgd9f3b83">Colors</a></li>
</ul>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  &lt;<span style="color: #f78c6c;">&lt;zathura-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;zathura-recolor&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;zathura-recolor-colors&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;zathura-colors&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-orga5583bf" class="outline-4">
<h4 id="orga5583bf"><span class="section-number-4">16.2.1</span> Enable zathura</h4>
<div class="outline-text-4" id="text-16-2-1">
<p>
Turn on to install zathura
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org4e441ef"><span style="color: #ffcb6b;">programs.zathura.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd29b6a9" class="outline-4">
<h4 id="orgd29b6a9"><span class="section-number-4">16.2.2</span> Recolor</h4>
<div class="outline-text-4" id="text-16-2-2">
<p>
Turn on to recolor the document
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgb0444a9"><span style="color: #ffcb6b;">programs.zathura.options.recolor</span> = <span style="color: #c3e88d;">"true"</span>;
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb5b246c" class="outline-2">
<h2 id="orgb5b246c"><span class="section-number-2">17</span> Games</h2>
<div class="outline-text-2" id="text-17">
</div>
<div id="outline-container-org35e0d2f" class="outline-3">
<h3 id="org35e0d2f"><span class="section-number-3">17.1</span> RetroArch</h3>
<div class="outline-text-3" id="text-17-1">
<div class="org-src-container">
<pre class="src src-nix" id="orga5f3337"><span style="color: #ffcb6b;">retroarch</span> = {
  <span style="color: #ffcb6b;">enableDolphin</span> = <span style="color: #82aaff;">true</span>;
  <span style="color: #ffcb6b;">enableCitra</span> = <span style="color: #82aaff;">true</span>;
  <span style="color: #ffcb6b;">enableMupen64Plus</span> = <span style="color: #82aaff;">true</span>;
  <span style="color: #ffcb6b;">enableDesmume</span> = <span style="color: #82aaff;">true</span>;
  <span style="color: #ffcb6b;">enableSnes9x</span> = <span style="color: #82aaff;">true</span>;
  <span style="color: #ffcb6b;">enableVbaNext</span> = <span style="color: #82aaff;">true</span>;
};
</pre>
</div>
</div>
</div>
<div id="outline-container-org0ed96e7" class="outline-3">
<h3 id="org0ed96e7"><span class="section-number-3">17.2</span> Dolphin (GC/Wii emu)</h3>
<div class="outline-text-3" id="text-17-2">
<p>
Install Dolphin emu
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org606a06a">unstable.dolphinEmu
</pre>
</div>
<p>
udev rules required is required to use GameCube controllers
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgbd1edcf"><span style="color: #ffcb6b;">services.udev.packages</span> = [ pkgs.dolphinEmu ];
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org3c47700" class="outline-2">
<h2 id="org3c47700"><span class="section-number-2">18</span> Security</h2>
<div class="outline-text-2" id="text-18">
</div>
<div id="outline-container-org44e6eaf" class="outline-3">
<h3 id="org44e6eaf"><span class="section-number-3">18.1</span> doas</h3>
<div class="outline-text-3" id="text-18-1">
<p>
The <b>doas</b> utility is a program originally written for OpenBSD, that can be used as alternative for <b>sudo</b>
The following code disables <b>sudo</b>, enables <b>doas</b>, permits <code>@wheel</code> group users to use doas with password.
<code>keepEnv</code> makes retain the environment variables when creating the environment for the new process.
<code>persist</code> means it literally. After running doas successfully, do not ask password again for some time.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  <span style="color: #ffcb6b;">security.sudo.enable</span> = <span style="color: #82aaff;">false</span>;
  <span style="color: #ffcb6b;">security.doas</span> = {
    <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">wheelNeedsPassword</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">extraRules</span> = [
      { <span style="color: #ffcb6b;">groups</span> = [ <span style="color: #c3e88d;">"wheel"</span> ]; <span style="color: #ffcb6b;">noPass</span> = <span style="color: #82aaff;">false</span>; <span style="color: #ffcb6b;">keepEnv</span> = <span style="color: #82aaff;">true</span>; <span style="color: #ffcb6b;">persist</span> = <span style="color: #82aaff;">true</span>; }
    ];
  };
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6468e09" class="outline-3">
<h3 id="org6468e09"><span class="section-number-3">18.2</span> ClamAV</h3>
<div class="outline-text-3" id="text-18-2">
<p>
Clam AntiVirus is a FOSS antivirus software toolkit able to detect many types of malicious software, including viruses.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  &lt;<span style="color: #f78c6c;">&lt;clamav-daemon-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;clamav-daemon-config&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;clamav-updater-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;clamav-updater-frequency&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;clamav-updater-interval&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;clamav-updater-config&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-org92bc1a9" class="outline-4">
<h4 id="org92bc1a9"><span class="section-number-4">18.2.1</span> Enable ClamAV daemon</h4>
<div class="outline-text-4" id="text-18-2-1">
<div class="org-src-container">
<pre class="src src-nix" id="orgf517dcf"><span style="color: #ffcb6b;">services.clamav.daemon.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org5a75d27" class="outline-4">
<h4 id="org5a75d27"><span class="section-number-4">18.2.2</span> ClamAV daemon configs</h4>
<div class="outline-text-4" id="text-18-2-2">
<div class="org-src-container">
<pre class="src src-nix" id="org8a0ceab"><span style="color: #ffcb6b;">services.clamav.daemon.extraConfig</span> = <span style="color: #c3e88d;">''</span>

<span style="color: #c3e88d;">''</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org1fba1df" class="outline-4">
<h4 id="org1fba1df"><span class="section-number-4">18.2.3</span> Enable ClamAV updater</h4>
<div class="outline-text-4" id="text-18-2-3">
<p>
Enable ClamAV freshclam updater
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org0eaf072"><span style="color: #ffcb6b;">services.clamav.updater.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb0d04d3" class="outline-4">
<h4 id="orgb0d04d3"><span class="section-number-4">18.2.4</span> ClamAV update frequency</h4>
<div class="outline-text-4" id="text-18-2-4">
<p>
Number of database checks per day
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgefa46c6"><span style="color: #ffcb6b;">services.clamav.updater.frequency</span> = <span style="color: #f78c6c; font-weight: bold;">24</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org13a3f9e" class="outline-4">
<h4 id="org13a3f9e"><span class="section-number-4">18.2.5</span> ClamAV updater interval</h4>
<div class="outline-text-4" id="text-18-2-5">
<p>
How often freshclam is invoked
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org9413c60"><span style="color: #ffcb6b;">services.clamav.updater.interval</span> = <span style="color: #c3e88d;">"hourly"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbbbc077" class="outline-4">
<h4 id="orgbbbc077"><span class="section-number-4">18.2.6</span> ClamAV updater configs</h4>
<div class="outline-text-4" id="text-18-2-6">
<div class="org-src-container">
<pre class="src src-nix" id="org9685b08"><span style="color: #ffcb6b;">services.clamav.updater.extraConfig</span> = <span style="color: #c3e88d;">''</span>

<span style="color: #c3e88d;">''</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgdd416b4" class="outline-3">
<h3 id="orgdd416b4"><span class="section-number-3">18.3</span> GnuPG</h3>
<div class="outline-text-3" id="text-18-3">
<p>
GnuPG is a complete and free implementation of the OpenPGP standard.
GnuPG allows to encrypt and sign your data and communication, features a versatile key management system as well as access modules for all kinds of public key directories.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  &lt;<span style="color: #f78c6c;">&lt;gpg-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;gpg-settings&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;gpg-agent-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;gpg-agent-ssh&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;gpg-agent-grabkbmouse&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;gpg-agent-pinentry-flavor&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-orgf6257dd" class="outline-4">
<h4 id="orgf6257dd"><span class="section-number-4">18.3.1</span> Enable GPG</h4>
<div class="outline-text-4" id="text-18-3-1">
<p>
Install GnuPG
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org332835e"><span style="color: #ffcb6b;">programs.gpg.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org6421bd1" class="outline-4">
<h4 id="org6421bd1"><span class="section-number-4">18.3.2</span> GPG settings</h4>
<div class="outline-text-4" id="text-18-3-2">
<div class="org-src-container">
<pre class="src src-nix" id="org4f3a8ec"><span style="color: #ffcb6b;">programs.settings</span> = {
};
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb155e58" class="outline-4">
<h4 id="orgb155e58"><span class="section-number-4">18.3.3</span> Enable GPG agent</h4>
<div class="outline-text-4" id="text-18-3-3">
<p>
whether to install GnuPG private key agent
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org878b2fd"><span style="color: #ffcb6b;">services.gpg-agent.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org617ca4d" class="outline-4">
<h4 id="org617ca4d"><span class="section-number-4">18.3.4</span> Enable SSH support</h4>
<div class="outline-text-4" id="text-18-3-4">
<p>
Use GPG agent for SSH keys
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org5121702"><span style="color: #ffcb6b;">services.gpg-agent.enableSshSupport</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgffd525f" class="outline-4">
<h4 id="orgffd525f"><span class="section-number-4">18.3.5</span> Grab the keyboard and mouse</h4>
<div class="outline-text-4" id="text-18-3-5">
<p>
Tell the pinentry to grab the keyboard and mouse. This option should in general be used to avoid X-sniffing attacks.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org2e923e1"><span style="color: #ffcb6b;">services.gpg-agent.grabKeyboardAndMouse</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org63d8e9c" class="outline-4">
<h4 id="org63d8e9c"><span class="section-number-4">18.3.6</span> Select pinentry interface</h4>
<div class="outline-text-4" id="text-18-3-6">
<p>
Use &ldquo;curses&rdquo; to be able to use GPG-agent without X11
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org7eef830"><span style="color: #ffcb6b;">services.gpg-agent.pinentryFlavor</span> = <span style="color: #c3e88d;">"curses"</span>;
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org5aac44e" class="outline-2">
<h2 id="org5aac44e"><span class="section-number-2">19</span> Common configs</h2>
<div class="outline-text-2" id="text-19">
</div>
<div id="outline-container-org106a6dc" class="outline-3">
<h3 id="org106a6dc"><span class="section-number-3">19.1</span> X server</h3>
<div class="outline-text-3" id="text-19-1">
<p>
This module configures common stuff of xserver and displaymanager.
Change layout and repeat rate 
</p>

<p>
Enable xserver
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgd5e5a55"><span style="color: #ffcb6b;">services.xserver.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>

<p>
Auto start xserver
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org0f66bc7"><span style="color: #ffcb6b;">services.xserver.autorun</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>

<p>
Xorg dpi
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org025299a"><span style="color: #ffcb6b;">services.xserver.dpi</span> = <span style="color: #f78c6c; font-weight: bold;">96</span>;
</pre>
</div>

<p>
Following code goes to <code>xserver.nix</code> file
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, config, ... }:
{
  &lt;<span style="color: #f78c6c;">&lt;xserver-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xserver-autorun&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xserver-keymap&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xserver-autorepeat&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xserver-dpi&gt;</span>&gt;
  <span style="color: #ffcb6b;">services.xserver.desktopManager.session</span> = [
    {
      <span style="color: #ffcb6b;">name</span> = <span style="color: #c3e88d;">"home-manager"</span>;
      <span style="color: #ffcb6b;">start</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">          </span><span style="color: #89DDFF; font-weight: bold;">${</span>pkgs.runtimeShell<span style="color: #89DDFF; font-weight: bold;">}</span><span style="color: #c3e88d;"> $HOME/.hm-xsession &amp;</span>
<span style="color: #c3e88d;">          waitPID=$!</span>
<span style="color: #c3e88d;">        ''</span>;
    }
  ];
  &lt;<span style="color: #f78c6c;">&lt;xserver-lightdm&gt;</span>&gt;
}
</pre>
</div>

<p>
And this is for laptop
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, config, ... }:
{
  &lt;<span style="color: #f78c6c;">&lt;xserver-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xserver-autorun&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xserver-keymap&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xserver-autorepeat&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xserver-dpi&gt;</span>&gt;
  <span style="color: #ffcb6b;">services.xserver.desktopManager.session</span> = [
    {
      <span style="color: #ffcb6b;">name</span> = <span style="color: #c3e88d;">"home-manager"</span>;
      <span style="color: #ffcb6b;">start</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">          </span><span style="color: #89DDFF; font-weight: bold;">${</span>pkgs.runtimeShell<span style="color: #89DDFF; font-weight: bold;">}</span><span style="color: #c3e88d;"> $HOME/.hm-xsession &amp;</span>
<span style="color: #c3e88d;">          waitPID=$!</span>
<span style="color: #c3e88d;">        ''</span>;
    }
  ];
  &lt;<span style="color: #f78c6c;">&lt;xserver-lightdm-laptop&gt;</span>&gt;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org2c8c966" class="outline-3">
<h3 id="org2c8c966"><span class="section-number-3">19.2</span> LightDM</h3>
<div class="outline-text-3" id="text-19-2">
<p>
The following code configures lightdm with mini greeter.
I use LightDM because mini greeter is minimal, and it&rsquo;s easy to use as lockscreen with <code>light-locker</code>.


</p>
<div class="org-src-container">
<pre class="src src-nix" id="org125abfb"><span style="color: #ffcb6b;">services.xserver.displayManager</span> = {
    <span style="color: #ffcb6b;">lightdm</span> = {
    <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">greeters.mini</span> = {
        <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
        <span style="color: #ffcb6b;">extraConfig</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">        [greeter]</span>
<span style="color: #c3e88d;">        show-password-label = false</span>
<span style="color: #c3e88d;">        [greeter-theme]</span>
<span style="color: #c3e88d;">        &lt;&lt;lightdm-greeter-colors&gt;&gt;</span>
<span style="color: #c3e88d;">        border-width = 6px</span>
<span style="color: #c3e88d;">        &lt;&lt;lightdm-wallpaper&gt;&gt;</span>
<span style="color: #c3e88d;">        ''</span>;
    };
    };
};
</pre>
</div>

<p>
laptop config
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orga13baee"><span style="color: #ffcb6b;">services.xserver.displayManager</span> = {
    <span style="color: #ffcb6b;">lightdm</span> = {
    <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">greeters.mini</span> = {
        <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
        <span style="color: #ffcb6b;">extraConfig</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">        [greeter]</span>
<span style="color: #c3e88d;">        show-password-label = false</span>
<span style="color: #c3e88d;">        [greeter-theme]</span>
<span style="color: #c3e88d;">        &lt;&lt;lightdm-greeter-colors&gt;&gt;</span>
<span style="color: #c3e88d;">        border-width = 6px</span>
<span style="color: #c3e88d;">        &lt;&lt;lightdm-fhd-wallpaper&gt;&gt;</span>
<span style="color: #c3e88d;">        ''</span>;
    };
    };
};
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc7eff00" class="outline-3">
<h3 id="orgc7eff00"><span class="section-number-3">19.3</span> Locale</h3>
<div class="outline-text-3" id="text-19-3">
<p>
Module to config locale related stuff
</p>
<ul class="org-ul">
<li><a href="#orge84225b">5.1.3</a></li>
</ul>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, config, ... }:

{
  <span style="color: #ffcb6b;">i18n.defaultLocale</span> = <span style="color: #c3e88d;">"en_US.UTF-8"</span>;
  &lt;<span style="color: #f78c6c;">&lt;japanese-ime&gt;</span>&gt;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org51a1124" class="outline-3">
<h3 id="org51a1124"><span class="section-number-3">19.4</span> XDG</h3>
<div class="outline-text-3" id="text-19-4">
<p>
Configure XDG(X Desktop Group) stuff.
This module is imported from home-manager
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:

{
  &lt;<span style="color: #f78c6c;">&lt;xdg-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xdg-userdirs&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xdg-mime-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xdg-mimeapps&gt;</span>&gt;
  <span style="color: #ffcb6b;">xdg.configFile</span> = <span style="color: #82aaff;">import</span> <span style="color: #f78c6c;">./xdg-configfiles.nix</span> { <span style="color: #89DDFF;">inherit</span> pkgs; };
}
</pre>
</div>
</div>

<div id="outline-container-org56ac6ab" class="outline-4">
<h4 id="org56ac6ab"><span class="section-number-4">19.4.1</span> Enable XDG module</h4>
<div class="outline-text-4" id="text-19-4-1">
<div class="org-src-container">
<pre class="src src-nix" id="orgfd052a6"><span style="color: #ffcb6b;">xdg.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org1be3c2f" class="outline-4">
<h4 id="org1be3c2f"><span class="section-number-4">19.4.2</span> Enable XDG user dirs</h4>
<div class="outline-text-4" id="text-19-4-2">
<p>
XDG user dirs is a tool to manager &ldquo;well known&rdquo; user directories like the Desktop folder, Pictures folder, and the Music folder.
These directories are created by enabling this.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org0e8a7dd"><span style="color: #ffcb6b;">xdg.userDirs.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orga9d3117" class="outline-4">
<h4 id="orga9d3117"><span class="section-number-4">19.4.3</span> Enable XDG mime</h4>
<div class="outline-text-4" id="text-19-4-3">
<p>
Install files to support the XDG Shared MIME-info specification and the XDG MIME Applications specification.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgc26fe70"><span style="color: #ffcb6b;">xdg.mime.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd2eddd1" class="outline-4">
<h4 id="orgd2eddd1"><span class="section-number-4">19.4.4</span> XDG mimeapps</h4>
<div class="outline-text-4" id="text-19-4-4">
<p>
Configure default applications/associations of applications with mimetypes
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org20d138b"><span style="color: #ffcb6b;">xdg.mimeApps</span> = {
  <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
  <span style="color: #ffcb6b;">defaultApplications</span> = {
    <span style="color: #c3e88d;">"text/html"</span> = <span style="color: #c3e88d;">"org.qutebrowser.qutebrowser.desktop"</span>;
    <span style="color: #c3e88d;">"x-scheme-handler/http"</span> = <span style="color: #c3e88d;">"org.qutebrowser.qutebrowser.desktop"</span>;
    <span style="color: #c3e88d;">"x-scheme-handler/https"</span> = <span style="color: #c3e88d;">"org.qutebrowser.qutebrowser.desktop"</span>;
    <span style="color: #c3e88d;">"x-scheme-handler/about"</span> = <span style="color: #c3e88d;">"org.qutebrowser.qutebrowser.desktop"</span>;
    <span style="color: #c3e88d;">"x-scheme-handler/unknown"</span> = <span style="color: #c3e88d;">"org.qutebrowser.qutebrowser.desktop"</span>;
  };
};
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfc6a0a1" class="outline-2">
<h2 id="orgfc6a0a1"><span class="section-number-2">20</span> Services</h2>
<div class="outline-text-2" id="text-20">
</div>
<div id="outline-container-org3530763" class="outline-3">
<h3 id="org3530763"><span class="section-number-3">20.1</span> OpenSSH</h3>
<div class="outline-text-3" id="text-20-1">
<p>
This module configures OpenSSH, a suite of secure networking utilities based on the Secure Shell (SSH) protocol, which provides a secure channel over an unsecured network in a clientserver architecture.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  &lt;<span style="color: #f78c6c;">&lt;ssh-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;ssh-challenge-response-authentication&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;ssh-x11-forward&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;ssh-open-firewall&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;ssh-password-authentication&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;ssh-root-login&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-org67ec7fc" class="outline-4">
<h4 id="org67ec7fc"><span class="section-number-4">20.1.1</span> Enable SSH</h4>
<div class="outline-text-4" id="text-20-1-1">
<div class="org-src-container">
<pre class="src src-nix" id="orgaa77e54"><span style="color: #ffcb6b;">services.openssh.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf7f95ef" class="outline-4">
<h4 id="orgf7f95ef"><span class="section-number-4">20.1.2</span> Challenge Response Authentication</h4>
<div class="outline-text-4" id="text-20-1-2">
<p>
challenge response authentication uses a cryptographic protocol that allows to prove that the user knows the password without revealing the password itself.
thus, makes the authentication more secure.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org69f3deb"><span style="color: #ffcb6b;">services.openssh.challengeResponseAuthentication</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org0211ba5" class="outline-4">
<h4 id="org0211ba5"><span class="section-number-4">20.1.3</span> X11 forwarding</h4>
<div class="outline-text-4" id="text-20-1-3">
<p>
X11 forwarding is a method to start a graphical apllication installed on a remote system and forward that application to the local system.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org05fc16a"><span style="color: #ffcb6b;">services.openssh.forwardX11</span> = <span style="color: #82aaff;">false</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgec1df12" class="outline-4">
<h4 id="orgec1df12"><span class="section-number-4">20.1.4</span> Open firewall</h4>
<div class="outline-text-4" id="text-20-1-4">
<p>
Whether to automatically open the ssh ports in the firewall.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org6713fcb"><span style="color: #ffcb6b;">services.openssh.openFirewall</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org8dede4a" class="outline-4">
<h4 id="org8dede4a"><span class="section-number-4">20.1.5</span> Password authentication</h4>
<div class="outline-text-4" id="text-20-1-5">
<p>
Disable this to use Public Key Authentication
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org8a02e13"><span style="color: #ffcb6b;">services.openssh.passwordAuthentication</span> = <span style="color: #82aaff;">false</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf66c5d4" class="outline-4">
<h4 id="orgf66c5d4"><span class="section-number-4">20.1.6</span> Root login</h4>
<div class="outline-text-4" id="text-20-1-6">
<p>
Whether the root user can login using ssh.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgde630ba"><span style="color: #ffcb6b;">services.openssh.permitRootLogin</span> = <span style="color: #c3e88d;">"no"</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org35e2357" class="outline-3">
<h3 id="org35e2357"><span class="section-number-3">20.2</span> Dunst</h3>
<div class="outline-text-3" id="text-20-2">
<p>
Dunst is a minimal notification daemon. Mostly used by WM users.
This module is imported from home-manager
</p>
<ul class="org-ul">
<li><a href="#orga5004b2">Fonts</a></li>
<li><a href="#org5edb37e">Colors</a></li>
</ul>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  &lt;<span style="color: #f78c6c;">&lt;dunst-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;dunst-settings&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;dunst-font&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;dunst-colors&gt;</span>&gt;
}
</pre>
</div>
</div>
<div id="outline-container-orgc9bc174" class="outline-4">
<h4 id="orgc9bc174"><span class="section-number-4">20.2.1</span> Enable dunst</h4>
<div class="outline-text-4" id="text-20-2-1">
<div class="org-src-container">
<pre class="src src-nix" id="org43d8d6a"><span style="color: #ffcb6b;">services.dunst.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgac8cdf6" class="outline-4">
<h4 id="orgac8cdf6"><span class="section-number-4">20.2.2</span> Dunst Settings</h4>
<div class="outline-text-4" id="text-20-2-2">
<div class="org-src-container">
<pre class="src src-nix" id="org0d6aff0"><span style="color: #ffcb6b;">services.dunst.settings</span> = {
    <span style="color: #ffcb6b;">global.transparency</span> = <span style="color: #f78c6c; font-weight: bold;">10</span>;
    <span style="color: #ffcb6b;">global.alignment</span> = <span style="color: #c3e88d;">"left"</span>;
    <span style="color: #ffcb6b;">global.geometry</span> = <span style="color: #c3e88d;">"300x5-30+20"</span>;
    <span style="color: #ffcb6b;">urgency_low.timeout</span> = <span style="color: #f78c6c; font-weight: bold;">10</span>;
    <span style="color: #ffcb6b;">urgency_normal.timeout</span> = <span style="color: #f78c6c; font-weight: bold;">10</span>;
    <span style="color: #ffcb6b;">urgency_critical.timeout</span> = <span style="color: #f78c6c; font-weight: bold;">10</span>;
};
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfa9708d" class="outline-3">
<h3 id="orgfa9708d"><span class="section-number-3">20.3</span> Picom</h3>
<div class="outline-text-3" id="text-20-3">
<p>
Picom is a X11 compositor.
It can be used to configure opacity of programs, blur,etc.
This module is imported from home-manager
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:
{
  &lt;<span style="color: #f78c6c;">&lt;picom-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;picom-package&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;picom-backend&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;picom-experimental-backends&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;picom-opacity&gt;</span>&gt;
  <span style="color: #ffcb6b;">services.picom.extraOptions</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">    &lt;&lt;picom-client-opacity&gt;&gt;</span>
<span style="color: #c3e88d;">    &lt;&lt;picom-detect-rounded-corners&gt;&gt;</span>
<span style="color: #c3e88d;">    &lt;&lt;picom-blur&gt;&gt;</span>
<span style="color: #c3e88d;">    &lt;&lt;picom-blur-exclude&gt;&gt;</span>
<span style="color: #c3e88d;">    &lt;&lt;picom-corner-radius&gt;&gt;</span>
<span style="color: #c3e88d;">    &lt;&lt;picom-rounded-corners-exclude&gt;&gt;</span>
<span style="color: #c3e88d;">    &lt;&lt;picom-enable-rounded-borders&gt;&gt;</span>
<span style="color: #c3e88d;">    &lt;&lt;picom-round-borders-exclude&gt;&gt;</span>
<span style="color: #c3e88d;">  ''</span>;
}
</pre>
</div>
</div>

<div id="outline-container-orge4d5f0b" class="outline-4">
<h4 id="orge4d5f0b"><span class="section-number-4">20.3.1</span> Enable picom</h4>
<div class="outline-text-4" id="text-20-3-1">
<div class="org-src-container">
<pre class="src src-nix" id="org889c5c3"><span style="color: #ffcb6b;">services.picom.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org6f75b44" class="outline-4">
<h4 id="org6f75b44"><span class="section-number-4">20.3.2</span> Picom package</h4>
<div class="outline-text-4" id="text-20-3-2">
<p>
This fork contains dual kawase blur(KDE-like fancy blur) and rounded borders.
Requires NUR.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgdb4b3db"><span style="color: #ffcb6b;">services.picom.package</span> = pkgs.nur.repos.reedrw.picom-next-ibhagwan;
</pre>
</div>
</div>
</div>
<div id="outline-container-org7ce4016" class="outline-4">
<h4 id="org7ce4016"><span class="section-number-4">20.3.3</span> Picom backend</h4>
<div class="outline-text-4" id="text-20-3-3">
<p>
xrender backend uses software rendering.
glx uses GPU rendering.
It&rsquo;s obviously that glx is better.
round-borders was originally written for xrender backend, but it&rsquo;s ported to glx
kawase-blur was originally written for glx backend.
Just use glx.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgee4ac7a"><span style="color: #ffcb6b;">services.picom.backend</span> = <span style="color: #c3e88d;">"glx"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcc3d0b6" class="outline-4">
<h4 id="orgcc3d0b6"><span class="section-number-4">20.3.4</span> Experimental backends</h4>
<div class="outline-text-4" id="text-20-3-4">
<p>
Whether to use the new experimental backends.
Currently, new backends feature better vsync with the xrender backend and improved input lag with the glx backend(for non-NVIDIA users).
Also, I think dual<sub>kawase</sub> blur and rounded borders have better implementation within the experimental backends code.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org08d5ec6"><span style="color: #ffcb6b;">services.picom.experimentalBackends</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org9323597" class="outline-4">
<h4 id="org9323597"><span class="section-number-4">20.3.5</span> Detect Client Opacity</h4>
<div class="outline-text-4" id="text-20-3-5">
<p>
Detect _NET<sub>WM</sub><sub>OPACITY</sub> on client windows.
This prevents opacity being ignored for some apps.
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgc8820d3"><span style="color: #ffcb6b;">detect-client-opacity</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org7a4cabc" class="outline-4">
<h4 id="org7a4cabc"><span class="section-number-4">20.3.6</span> Detect rounded corners</h4>
<div class="outline-text-4" id="text-20-3-6">
<p>
Detect rounded corners and treat them as rectangular
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org529ebef"><span style="color: #ffcb6b;">detect-rounded-corners</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org8a505cb" class="outline-2">
<h2 id="org8a505cb"><span class="section-number-2">21</span> Machines</h2>
<div class="outline-text-2" id="text-21">
</div>
<div id="outline-container-org67c24a1" class="outline-3">
<h3 id="org67c24a1"><span class="section-number-3">21.1</span> Common Defaults</h3>
<div class="outline-text-3" id="text-21-1">
<p>
Import files on each machine directories
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgd83c1e5"><span style="color: #676E95;"># </span><span style="color: #676E95;">Include the results of the hardware scan.</span>
<span style="color: #f78c6c;">./hardware-configuration.nix</span>
<span style="color: #676E95;"># </span><span style="color: #676E95;">import encrypted user settings/secrets</span>
<span style="color: #f78c6c;">./usersettings.nix</span>
</pre>
</div>

<p>
This is required to enable various firmwares like WiFi
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org75ff1e0"><span style="color: #ffcb6b;">hardware.enableRedistributableFirmware</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org5ad10e1" class="outline-3">
<h3 id="org5ad10e1"><span class="section-number-3">21.2</span> Boot/kernel/initrd</h3>
<div class="outline-text-3" id="text-21-2">
<p>
Boot faster
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org74c787f"><span style="color: #ffcb6b;">systemd.services.systemd-udev-settle.serviceConfig.TimeoutSec</span> = <span style="color: #f78c6c; font-weight: bold;">5</span>;
<span style="color: #ffcb6b;">systemd.services.NetworkManager-wait-online.enable</span> = <span style="color: #82aaff;">false</span>;
</pre>
</div>

<p>
Enable latest kernel from nixos-unstable
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org5d144a9"><span style="color: #ffcb6b;">boot.kernelPackages</span> = pkgs.unstable.linuxPackages_latest;
</pre>
</div>

<p>
Enable plymouth(boot screen splash)
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org6582833"><span style="color: #ffcb6b;">boot.plymouth.enable</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>

<div id="outline-container-org5d7b26f" class="outline-4">
<h4 id="org5d7b26f"><span class="section-number-4">21.2.1</span> Grub</h4>
<div class="outline-text-4" id="text-21-2-1">
<p>
Enable legacy bios grub(laptop and server)
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgbf51c44"><span style="color: #ffcb6b;">boot.loader.grub.enable</span> = <span style="color: #82aaff;">true</span>;
<span style="color: #ffcb6b;">boot.loader.grub.version</span> = <span style="color: #f78c6c; font-weight: bold;">2</span>;
</pre>
</div>

<p>
Disable grub timeout(basically boot straight to NixOS), show grub only when shift key is holded
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgcc2bad7"><span style="color: #ffcb6b;">boot.loader.timeout</span> = <span style="color: #f78c6c; font-weight: bold;">0</span>;
<span style="color: #ffcb6b;">boot.loader.grub.extraConfig</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">if keystatus --shift ; then</span>
<span style="color: #c3e88d;">    set timeout=-1</span>
<span style="color: #c3e88d;">else</span>
<span style="color: #c3e88d;">    set timeout=0</span>
<span style="color: #c3e88d;">fi</span>
<span style="color: #c3e88d;">''</span>;
</pre>
</div>

<p>
Copy kernels and initrds to /boot. This is enabled automatically if /boot is on a different partition than / .
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org47448fd"><span style="color: #ffcb6b;">boot.loader.grub.copyKernels</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org01efb24" class="outline-4">
<h4 id="org01efb24"><span class="section-number-4">21.2.2</span> systemd-boot</h4>
<div class="outline-text-4" id="text-21-2-2">
<p>
SystemD-boot is used on desktop.
Enable it:
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org43ff162"><span style="color: #ffcb6b;">boot.loader.systemd-boot.enable</span> = <span style="color: #82aaff;">true</span>;
<span style="color: #ffcb6b;">boot.loader.efi.canTouchEfiVariables</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org243dcd5" class="outline-4">
<h4 id="org243dcd5"><span class="section-number-4">21.2.3</span> filesystem path/luks</h4>
<div class="outline-text-4" id="text-21-2-3">
</div>
<ol class="org-ol">
<li><a id="org66a3f3a"></a>Desktop<br />
<div class="outline-text-5" id="text-21-2-3-1">
<div class="org-src-container">
<pre class="src src-nix" id="org70737cf">
<span style="color: #676E95;"># </span><span style="color: #676E95;">Luks encrypted partition</span>
boot.initrd.luks.devices.<span style="color: #c3e88d;">"root"</span>.<span style="color: #ffcb6b;">device</span> = <span style="color: #c3e88d;">"/dev/disk/by-uuid/02d555e3-f8d2-4617-860e-06c08bec521b"</span>;

<span style="color: #676E95;"># </span><span style="color: #676E95;">Root partition after unlocking luks</span>
fileSystems.<span style="color: #c3e88d;">"/"</span> =
{
    <span style="color: #ffcb6b;">device</span> = <span style="color: #c3e88d;">"/dev/disk/by-uuid/ba342cbb-2d6c-453d-8d25-df8fad829c37"</span>;
    <span style="color: #ffcb6b;">fsType</span> = <span style="color: #c3e88d;">"xfs"</span>;
};

<span style="color: #676E95;"># </span><span style="color: #676E95;">Boot partition</span>
fileSystems.<span style="color: #c3e88d;">"/boot"</span> =
{
    <span style="color: #ffcb6b;">device</span> = <span style="color: #c3e88d;">"/dev/disk/by-uuid/E5A7-FB2A"</span>;
    <span style="color: #ffcb6b;">fsType</span> = <span style="color: #c3e88d;">"vfat"</span>;
};

<span style="color: #676E95;"># </span><span style="color: #676E95;">Swap partition uuid</span>
<span style="color: #ffcb6b;">swapDevices</span> =
[{ <span style="color: #ffcb6b;">device</span> = <span style="color: #c3e88d;">"/dev/disk/by-uuid/aedff2c4-f34c-410c-9612-aa9df0dd3cef"</span>; }];
</pre>
</div>
</div>
</li>
<li><a id="org8385ded"></a>Laptop<br />
<div class="outline-text-5" id="text-21-2-3-2">
<div class="org-src-container">
<pre class="src src-nix" id="org45ca538"><span style="color: #676E95;"># </span><span style="color: #676E95;">Luks encrypted partition</span>
<span style="color: #ffcb6b;">boot.loader.grub.enableCryptodisk</span> = <span style="color: #82aaff;">true</span>;
boot.initrd.luks.devices.<span style="color: #c3e88d;">"root"</span>.<span style="color: #ffcb6b;">device</span> = <span style="color: #c3e88d;">"/dev/disk/by-uuid/27740e7b-5bb7-482a-94dc-72df547f1f66"</span>;

<span style="color: #676E95;"># </span><span style="color: #676E95;">Set what drive to install grub</span>
<span style="color: #ffcb6b;">boot.loader.grub.device</span> = <span style="color: #c3e88d;">"/dev/sda"</span>;

<span style="color: #676E95;"># </span><span style="color: #676E95;">Root partition after unlocking luks</span>
fileSystems.<span style="color: #c3e88d;">"/"</span> =
  {
    <span style="color: #ffcb6b;">device</span> = <span style="color: #c3e88d;">"/dev/disk/by-uuid/b904a3b9-a30e-425c-9e6c-6f8a56cedbf9"</span>;
    <span style="color: #ffcb6b;">fsType</span> = <span style="color: #c3e88d;">"xfs"</span>;
  };

<span style="color: #676E95;"># </span><span style="color: #676E95;">Boot partition</span>
fileSystems.<span style="color: #c3e88d;">"/boot"</span> =
  {
    <span style="color: #ffcb6b;">device</span> = <span style="color: #c3e88d;">"/dev/disk/by-uuid/f548cd01-269e-4b56-8aab-2cf06f278f88"</span>;
    <span style="color: #ffcb6b;">fsType</span> = <span style="color: #c3e88d;">"ext2"</span>;
  };

<span style="color: #676E95;"># </span><span style="color: #676E95;">Swap partition uuid</span>
<span style="color: #ffcb6b;">swapDevices</span> =
  [{ <span style="color: #ffcb6b;">device</span> = <span style="color: #c3e88d;">"/dev/disk/by-uuid/1c57f70d-7083-4109-8cd5-f407a51d39cf"</span>; }];
</pre>
</div>
</div>
</li>
<li><a id="orge4bd651"></a>Server<br />
<div class="outline-text-5" id="text-21-2-3-3">
<div class="org-src-container">
<pre class="src src-nix" id="orgd4bc339"><span style="color: #676E95;"># </span><span style="color: #676E95;">Luks encrypted partition</span>
<span style="color: #ffcb6b;">boot.loader.grub.enableCryptodisk</span> = <span style="color: #82aaff;">true</span>;
boot.initrd.luks.devices.<span style="color: #c3e88d;">"root"</span>.<span style="color: #ffcb6b;">device</span> = <span style="color: #c3e88d;">"/dev/disk/by-uuid/29e93967-944e-4306-adb2-8d2441ca5ed5"</span>;

<span style="color: #676E95;"># </span><span style="color: #676E95;">Set what drive to install grub</span>
<span style="color: #ffcb6b;">boot.loader.grub.device</span> = <span style="color: #c3e88d;">"/dev/sda"</span>;

<span style="color: #676E95;"># </span><span style="color: #676E95;">Root partition after unlocking luks</span>
fileSystems.<span style="color: #c3e88d;">"/"</span> =
  {
    <span style="color: #ffcb6b;">device</span> = <span style="color: #c3e88d;">"/dev/disk/by-uuid/4979bbc1-28e8-4505-9a3e-2d2fc0f41fa3"</span>;
    <span style="color: #ffcb6b;">fsType</span> = <span style="color: #c3e88d;">"xfs"</span>;
  };

<span style="color: #676E95;"># </span><span style="color: #676E95;">Boot partition</span>
fileSystems.<span style="color: #c3e88d;">"/boot"</span> =
  {
    <span style="color: #ffcb6b;">device</span> = <span style="color: #c3e88d;">"/dev/disk/by-uuid/f5979f75-d494-49ba-a149-82a612dcf543"</span>;
    <span style="color: #ffcb6b;">fsType</span> = <span style="color: #c3e88d;">"ext2"</span>;
  };

<span style="color: #676E95;"># </span><span style="color: #676E95;">Swap partition uuid</span>
<span style="color: #ffcb6b;">swapDevices</span> =
  [{ <span style="color: #ffcb6b;">device</span> = <span style="color: #c3e88d;">"/dev/disk/by-uuid/8bb10870-d71d-484b-a861-d702a2f55484"</span>; }];
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org16143f0" class="outline-3">
<h3 id="org16143f0"><span class="section-number-3">21.3</span> Hardware</h3>
<div class="outline-text-3" id="text-21-3">
<p>
Update Intel micro code(laptop, server)
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org9a0a1e8"><span style="color: #ffcb6b;">hardware.cpu.intel.updateMicrocode</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>

<p>
Update AMD micro code(desktop)
</p>
<div class="org-src-container">
<pre class="src src-nix" id="org6852640"><span style="color: #ffcb6b;">hardware.cpu.amd.updateMicrocode</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>

<p>
Enable opengl
32bit is required for some programs like lutris/wine
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgad5838d"><span style="color: #ffcb6b;">hardware.opengl.enable</span> = <span style="color: #82aaff;">true</span>;
<span style="color: #ffcb6b;">hardware.opengl.driSupport</span> = <span style="color: #82aaff;">true</span>;
<span style="color: #ffcb6b;">hardware.opengl.driSupport32Bit</span> = <span style="color: #82aaff;">true</span>;
</pre>
</div>
</div>
<div id="outline-container-orga2f826e" class="outline-4">
<h4 id="orga2f826e"><span class="section-number-4">21.3.1</span> xserver AMDGPU driver</h4>
<div class="outline-text-4" id="text-21-3-1">
<p>
This belongs to desktop config
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgd7ddf8f"><span style="color: #ffcb6b;">services.xserver.videoDrivers</span> = [ <span style="color: #c3e88d;">"amdgpu"</span> ];
<span style="color: #ffcb6b;">services.xserver.deviceSection</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">Option "TearFree" "true"</span>
<span style="color: #c3e88d;">''</span>;
<span style="color: #ffcb6b;">hardware.opengl.extraPackages</span> = <span style="color: #89DDFF;">with</span> pkgs; [
  amdvlk
];
</pre>
</div>
</div>
</div>
<div id="outline-container-org15c0a8d" class="outline-4">
<h4 id="org15c0a8d"><span class="section-number-4">21.3.2</span> xserver intel gpu driver</h4>
<div class="outline-text-4" id="text-21-3-2">
<p>
This belongs to laptop config
</p>
<div class="org-src-container">
<pre class="src src-nix" id="orgde1e9df"><span style="color: #ffcb6b;">services.xserver.videoDrivers</span> = [ <span style="color: #c3e88d;">"intel"</span> ];
<span style="color: #ffcb6b;">services.xserver.deviceSection</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">Option "TearFree" "true"</span>
<span style="color: #c3e88d;">''</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org0cde8ad" class="outline-3">
<h3 id="org0cde8ad"><span class="section-number-3">21.4</span> Desktop</h3>
<div class="outline-text-3" id="text-21-4">
</div>
<div id="outline-container-org61c7cf4" class="outline-4">
<h4 id="org61c7cf4"><span class="section-number-4">21.4.1</span> Set desktop hostname</h4>
<div class="outline-text-4" id="text-21-4-1">
<div class="org-src-container">
<pre class="src src-nix" id="org1556bf6"><span style="color: #ffcb6b;">networking.hostName</span> = <span style="color: #c3e88d;">"desktop1"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org93e5936" class="outline-4">
<h4 id="org93e5936"><span class="section-number-4">21.4.2</span> configuration.nix</h4>
<div class="outline-text-4" id="text-21-4-2">
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ config, pkgs, fetchgit, ... }:
{

  <span style="color: #ffcb6b;">imports</span> =
    [
      &lt;<span style="color: #f78c6c;">&lt;configurationnix-defaultimports&gt;</span>&gt;
    ];

  <span style="color: #676E95;"># Boot{{{</span>
  <span style="color: #676E95;"># Use the systemd-boot EFI boot loader.</span>
  <span style="color: #ffcb6b;">boot</span> = {
    <span style="color: #ffcb6b;">extraModulePackages</span> = <span style="color: #89DDFF;">with</span> config.boot.kernelPackages; [ xpadneo ];
    <span style="color: #ffcb6b;">extraModprobeConfig</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">      options bluetooth disable_ertm=Y</span>
<span style="color: #c3e88d;">    ''</span>;
  };
  <span style="color: #676E95;"># }}}</span>
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-systemdboot-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-faster-boot&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-latest-kernel&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-plymouth-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-desktop-fspath&gt;</span>&gt;

  &lt;<span style="color: #f78c6c;">&lt;hardware-redistributable-firmware&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;enable-sound&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-amd-microcode&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-opengl-enable&gt;</span>&gt;
  <span style="color: #ffcb6b;">hardware.opengl.extraPackages32</span> = <span style="color: #89DDFF;">with</span> pkgs.unstable.pkgsi686Linux; [ libva ];

  <span style="color: #ffcb6b;">programs</span> = {
    <span style="color: #ffcb6b;">dconf.enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">adb.enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">java.enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">java.package</span> = pkgs.unstable.jdk;
  };

  &lt;<span style="color: #f78c6c;">&lt;configurationnix-desktop-hostname&gt;</span>&gt;
  <span style="color: #676E95;"># Networking{{{</span>
  <span style="color: #676E95;"># networking.wireless.enable = true;  # Enables wireless support via wpa_supplicant.</span>

  <span style="color: #676E95;"># The global useDHCP flag is deprecated, therefore explicitly set to false here.</span>
  <span style="color: #676E95;"># Per-interface useDHCP will be mandatory in the future, so this generated config</span>
  <span style="color: #676E95;"># replicates the default behaviour.</span>
  <span style="color: #ffcb6b;">networking</span> = {
    <span style="color: #ffcb6b;">dhcpcd.enable</span> = <span style="color: #82aaff;">false</span>;
    <span style="color: #ffcb6b;">useNetworkd</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">useDHCP</span> = <span style="color: #82aaff;">false</span>;
    <span style="color: #ffcb6b;">interfaces.enp9s0.useDHCP</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">networkmanager</span> = {
      <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
      <span style="color: #ffcb6b;">dns</span> = <span style="color: #c3e88d;">"systemd-resolved"</span>;
    };
  };
  <span style="color: #676E95;">#}}}</span>

  <span style="color: #ffcb6b;">environment.variables</span> = (<span style="color: #82aaff;">import</span> <span style="color: #f78c6c;">../../modules/common/globalvars.nix</span>);

  <span style="color: #ffcb6b;">virtualisation</span> = <span style="color: #82aaff;">import</span> (<span style="color: #f78c6c;">../../modules/virtualisation/default.nix</span>);
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-amdgpu-driver&gt;</span>&gt;
  <span style="color: #ffcb6b;">services.xserver.wacom.enable</span> = <span style="color: #82aaff;">true</span>;
  &lt;<span style="color: #f78c6c;">&lt;dolphin-emulator-udev&gt;</span>&gt;

  <span style="color: #676E95;"># This value determines the NixOS release from which the default</span>
  <span style="color: #676E95;"># settings for stateful data, like file locations and database versions</span>
  <span style="color: #676E95;"># on your system were taken. It&#8216;s perfectly fine and recommended to leave</span>
  <span style="color: #676E95;"># this value at the release version of the first install of this system.</span>
  <span style="color: #676E95;"># Before changing this value read the documentation for this option</span>
  <span style="color: #676E95;"># (e.g. man configuration.nix or on https://nixos.org/nixos/options.html).</span>
  <span style="color: #ffcb6b;">system.stateVersion</span> = <span style="color: #c3e88d;">"20.03"</span>; <span style="color: #676E95;"># Did you read the comment?</span>

}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbc00aa0" class="outline-4">
<h4 id="orgbc00aa0"><span class="section-number-4">21.4.3</span> Packages to install on desktop home environment</h4>
<div class="outline-text-4" id="text-21-4-3">
<div class="org-src-container">
<pre class="src src-nix" id="org7d154cf"><span style="color: #ffcb6b;">home.packages</span> = <span style="color: #89DDFF;">with</span> pkgs; [
  &lt;<span style="color: #f78c6c;">&lt;haskell-packages-env&gt;</span>&gt;
  trash-cli
  tree
  bc
  gitAndTools.diff-so-fancy
  gitAndTools.delta
  unstable.ripgrep
  unstable.fd
  unstable.fzf
  unstable.mosh
  binutils
  killall
  neofetch
  pfetch
  nodePackages.node2nix
  cabal2nix
  nix-index
  niv
  rnix-lsp
  scrot
  feh
  tty-clock
  appimage-run
  lightlocker
  circleci-cli
  fontforge
  palenight-gtk-theme
  unstable.pop-icon-theme
  unstable.hicolor-icon-theme <span style="color: #676E95;"># fallback gtk theme</span>
  unstable.pandoc
  unstable.nitrogen
  unstable.chafa
  unstable.ueberzug
  <span style="color: #676E95;"># nixpkgs</span>
  nixfmt
  nixpkgs-fmt
  nixpkgs-review
  nix-prefetch-git
  nix-prefetch-github
  pypi2nix
  <span style="color: #676E95;"># rust</span>
  unstable.cargo
  <span style="color: #676E95;"># lua</span>
  unstable.luajit
  unstable.luajitPackages.lua-lsp
  <span style="color: #676E95;"># tui apps</span>
  cava
  unstable.vifm-full
  vifmimg
  htop
  unstable.bottom
  ncpamixer
  unstable.mps-youtube
  unstable.lazygit
  <span style="color: #676E95;"># gui apps</span>
  gimp
  krita
  kdenlive
  olive-editor
  blender
  master.discord
  tdesktop
  pavucontrol
  spotify
  sxiv
  retroarch
  unstable.steam
  &lt;<span style="color: #f78c6c;">&lt;dolphin-emulator&gt;</span>&gt;
  unstable.lutris
  unstable.yuzu-ea
  unstable.ryujinx
  unstable.virt-manager
  unstable.pulseeffects
  <span style="color: #676E95;"># node packages</span>
  nodePackages.gitmoji-cli
  <span style="color: #676E95;"># dependencies</span>
  ffmpeg-full
  unstable.ffmpegthumbnailer
  frei0r
  unstable.universal-ctags
  libnotify
  xsel <span style="color: #676E95;"># used by xmonad emoji prompt</span>
  unstable.youtube-dl
  unstable.neovim-remote
  unstable.direnv
  unstable.imagemagick
  unstable.zstd
  unstable.editorconfig-core-c
  unstable.sqlite
  <span style="color: #676E95;"># misc</span>
  glxinfo
  xclip
  qt5.qttools
  xkb-switch
  unstable.libinput-gestures
  unstable.xdotool
  unstable.devour
  unstable.xorg.xwininfo
  unstable.xfontsel
  unstable.xorg.libXext
  unstable.steam-run
  xorg.xev
  file
  catimg
  <span style="color: #676E95;"># joke command</span>
  cowsay
  cmatrix
  espeak
  figlet
  fortune
  asciiquarium
];
</pre>
</div>
</div>
</div>
<div id="outline-container-org0c78a7f" class="outline-4">
<h4 id="org0c78a7f"><span class="section-number-4">21.4.4</span> home.nix</h4>
<div class="outline-text-4" id="text-21-4-4">
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ config, pkgs, lib, ... }:
<span style="color: #89DDFF;">let</span>
  &lt;<span style="color: #f78c6c;">&lt;haskell-packages&gt;</span>&gt;

<span style="color: #89DDFF;">in</span>
{
  &lt;<span style="color: #f78c6c;">&lt;home-manager-desktop-packages&gt;</span>&gt;

  &lt;<span style="color: #f78c6c;">&lt;lorri-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;keynav-enable&gt;</span>&gt;

  <span style="color: #676E95;"># programs {{{</span>
  <span style="color: #ffcb6b;">programs</span> = {

    <span style="color: #ffcb6b;">home-manager.enable</span> = <span style="color: #82aaff;">true</span>;

    <span style="color: #ffcb6b;">neovim</span> = (<span style="color: #82aaff;">import</span> <span style="color: #f78c6c;">../../modules/editors/neovim.nix</span>) { <span style="color: #89DDFF;">inherit</span> pkgs; };
  };
  <span style="color: #676E95;">#}}}</span>

  &lt;<span style="color: #f78c6c;">&lt;home-manager-keymap&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xrandr-desktop-scale&gt;</span>&gt;

  <span style="color: #676E95;"># home files{{{</span>
  <span style="color: #ffcb6b;">home.file</span> = {

    <span style="color: #676E95;"># xmobar{{{</span>
    <span style="color: #c3e88d;">".xmonad/xmobar.hs"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../haskell/xmobar.hs</span>;
    <span style="color: #c3e88d;">".xmonad/xmobar.hs"</span>.<span style="color: #ffcb6b;">onChange</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">      if [[ -v DISPLAY ]] ; then</span>
<span style="color: #c3e88d;">          echo "Recompiling xmobar"</span>
<span style="color: #c3e88d;">          xmobar -r ~/.xmonad/xmobar.hs &amp;</span>
<span style="color: #c3e88d;">          sleep 2</span>
<span style="color: #c3e88d;">          disown</span>
<span style="color: #c3e88d;">          killall xmobar</span>
<span style="color: #c3e88d;">          echo "Restarting"</span>
<span style="color: #c3e88d;">          xmonad --restart</span>
<span style="color: #c3e88d;">      fi</span>
<span style="color: #c3e88d;">    ''</span>; <span style="color: #676E95;"># }}}</span>

    <span style="color: #676E95;"># tmux theme</span>
    <span style="color: #c3e88d;">".palenight-tmux"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../.palenight-tmux</span>;

    <span style="color: #676E95;"># neovim dashboard logo</span>
    <span style="color: #c3e88d;">"Pictures/neovimlogo.png"</span>.<span style="color: #ffcb6b;">source</span> = (pkgs.fetchurl {
      <span style="color: #ffcb6b;">url</span> = <span style="color: #c3e88d;">"https://raw.githubusercontent.com/neovim/neovim.github.io/master/logos/neovim-logo-flat.png"</span>;
      <span style="color: #ffcb6b;">sha256</span> = <span style="color: #c3e88d;">"1vl7mi87wisqhd9zigg24y2ksjyyjk6225bvw9qk4s6gfv62w4jm"</span>;
    });

    <span style="color: #676E95;"># emacs-anywhere</span>
    <span style="color: #c3e88d;">".emacs_anywhere"</span>.<span style="color: #ffcb6b;">source</span> = (pkgs.fetchFromGitHub {
      <span style="color: #ffcb6b;">owner</span> = <span style="color: #c3e88d;">"btwiusegentoo"</span>;
      <span style="color: #ffcb6b;">repo</span> = <span style="color: #c3e88d;">"emacs-anywhere"</span>;
      <span style="color: #ffcb6b;">rev</span> = <span style="color: #c3e88d;">"e739c8bf1930eeb68ecaf312a885f5788942154c"</span>;
      <span style="color: #ffcb6b;">sha256</span> = <span style="color: #c3e88d;">"0k0iay6pd01k2nyjm2n648n8ja36mgarvb9677ky2d758xkzgckv"</span>;
    });

    <span style="color: #676E95;"># doom emacs</span>
    <span style="color: #676E95;"># ".emacs.d/init.el".text = ''</span>
    <span style="color: #676E95;">#     (load "default.el")</span>
    <span style="color: #676E95;"># '';</span>
    <span style="color: #c3e88d;">".doom.d/init.el"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../doom.d/init.el</span>;
    <span style="color: #c3e88d;">".doom.d/config.el"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../doom.d/config.el</span>;
    <span style="color: #c3e88d;">".doom.d/packages.el"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../doom.d/packages.el</span>;

    <span style="color: #c3e88d;">".ghc/ghci.conf"</span>.<span style="color: #ffcb6b;">text</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">      :set prompt "%s &#955;: "</span>
<span style="color: #c3e88d;">    ''</span>;

  };
  <span style="color: #676E95;">#}}}</span>

  <span style="color: #676E95;"># xsession{{{</span>
  <span style="color: #ffcb6b;">xsession</span> = {
    <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">scriptPath</span> = <span style="color: #c3e88d;">".hm-xsession"</span>;

    <span style="color: #ffcb6b;">pointerCursor</span> = {
      <span style="color: #ffcb6b;">package</span> = pkgs.bibata-cursors;
      <span style="color: #ffcb6b;">name</span> = <span style="color: #c3e88d;">"bibata-cursors"</span>;
      <span style="color: #ffcb6b;">size</span> = <span style="color: #f78c6c; font-weight: bold;">16</span>;
    };

  }; <span style="color: #676E95;">#}}}</span>

  <span style="color: #676E95;"># xresources config{{{</span>
  <span style="color: #ffcb6b;">xresources.properties</span> = {
    <span style="color: #c3e88d;">"Xft.dpi"</span> = <span style="color: #f78c6c; font-weight: bold;">96</span>;
  };
  <span style="color: #676E95;"># }}}</span>

  <span style="color: #676E95;"># Home Manager config{{{</span>
  <span style="color: #676E95;"># Home Manager needs a bit of information about you and the</span>
  <span style="color: #676E95;"># paths it should manage.</span>
  <span style="color: #ffcb6b;">home.username</span> = <span style="color: #c3e88d;">"btw"</span>;
  <span style="color: #ffcb6b;">home.homeDirectory</span> = <span style="color: #c3e88d;">"/home/btw"</span>;

  <span style="color: #676E95;"># This value determines the Home Manager release that your</span>
  <span style="color: #676E95;"># configuration is compatible with. This helps avoid breakage</span>
  <span style="color: #676E95;"># when a new Home Manager release introduces backwards</span>
  <span style="color: #676E95;"># incompatible changes.</span>
  <span style="color: #676E95;">#</span>
  <span style="color: #676E95;"># You can update Home Manager without changing this value. See</span>
  <span style="color: #676E95;"># the Home Manager release notes for a list of state version</span>
  <span style="color: #676E95;"># changes in each release.</span>
  <span style="color: #ffcb6b;">home.stateVersion</span> = <span style="color: #c3e88d;">"20.03"</span>;

  <span style="color: #676E95;">#}}}</span>

  <span style="color: #676E95;"># local env variables{{{</span>
  <span style="color: #ffcb6b;">home.sessionVariables</span> = {
    <span style="color: #c3e88d;">"XDG_CONFIG_HOME"</span> = <span style="color: #c3e88d;">"$HOME/.config"</span>;
    <span style="color: #c3e88d;">"MANPAGER"</span> = <span style="color: #c3e88d;">"sh -c 'col -bx | bat -l man -p'"</span>;
    <span style="color: #c3e88d;">"COLORTERM"</span> = <span style="color: #c3e88d;">"truecolor"</span>;
    <span style="color: #c3e88d;">"THEOS"</span> = <span style="color: #c3e88d;">"~/theos"</span>
  }; <span style="color: #676E95;"># }}}</span>

}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf51b685" class="outline-3">
<h3 id="orgf51b685"><span class="section-number-3">21.5</span> Laptop</h3>
<div class="outline-text-3" id="text-21-5">
</div>
<div id="outline-container-org08c8789" class="outline-4">
<h4 id="org08c8789"><span class="section-number-4">21.5.1</span> Set laptop hostname</h4>
<div class="outline-text-4" id="text-21-5-1">
<div class="org-src-container">
<pre class="src src-nix" id="orgbad468c"><span style="color: #ffcb6b;">networking.hostName</span> = <span style="color: #c3e88d;">"laptop1"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org7c44c2a" class="outline-4">
<h4 id="org7c44c2a"><span class="section-number-4">21.5.2</span> configuration.nix</h4>
<div class="outline-text-4" id="text-21-5-2">
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ config, pkgs, fetchgit, ... }:
{

  <span style="color: #ffcb6b;">imports</span> =
    [
      &lt;<span style="color: #f78c6c;">&lt;configurationnix-defaultimports&gt;</span>&gt;
    ];

  <span style="color: #ffcb6b;">boot</span> = {
    <span style="color: #ffcb6b;">kernelModules</span> = [ <span style="color: #c3e88d;">"i915"</span> <span style="color: #c3e88d;">"tpm-rng"</span> ];
    <span style="color: #ffcb6b;">extraModulePackages</span> = <span style="color: #89DDFF;">with</span> config.boot.kernelPackages; [ acpi_call ];
    <span style="color: #ffcb6b;">extraModprobeConfig</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">      options bluetooth disable_ertm=Y</span>
<span style="color: #c3e88d;">      options iwlwifi 11n_disable=8 bt_coex_active=N</span>
<span style="color: #c3e88d;">      options thinkpad_acpi experimental=1 fan_control=1</span>
<span style="color: #c3e88d;">    ''</span>;
    <span style="color: #ffcb6b;">kernelParams</span> = [
      &lt;<span style="color: #f78c6c;">&lt;configurationnix-laptop-brightness&gt;</span>&gt;
    ];
  };
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-enable-grub&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-grub-timeout&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-grub-copykernels&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-faster-boot&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-latest-kernel&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-plymouth-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-laptop-fspath&gt;</span>&gt;

  &lt;<span style="color: #f78c6c;">&lt;hardware-redistributable-firmware&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;enable-sound&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-intel-microcode&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-opengl-enable&gt;</span>&gt;
  <span style="color: #ffcb6b;">hardware.opengl.extraPackages</span> = <span style="color: #89DDFF;">with</span> pkgs; [
    vaapiIntel
    vaapiVdpau
    libvdpau-va-gl
    intel-media-driver
  ];

  <span style="color: #ffcb6b;">programs</span> = {
    <span style="color: #ffcb6b;">dconf.enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">adb.enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">java.enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">java.package</span> = pkgs.unstable.jdk;
  };

  &lt;<span style="color: #f78c6c;">&lt;configurationnix-laptop-hostname&gt;</span>&gt;
  <span style="color: #676E95;"># Networking{{{</span>
  <span style="color: #676E95;"># networking.wireless.enable = true;  # Enables wireless support via wpa_supplicant.</span>

  <span style="color: #676E95;"># The global useDHCP flag is deprecated, therefore explicitly set to false here.</span>
  <span style="color: #676E95;"># Per-interface useDHCP will be mandatory in the future, so this generated config</span>
  <span style="color: #676E95;"># replicates the default behaviour.</span>
  <span style="color: #ffcb6b;">networking</span> = {
    <span style="color: #ffcb6b;">dhcpcd.enable</span> = <span style="color: #82aaff;">false</span>;
    <span style="color: #ffcb6b;">useDHCP</span> = <span style="color: #82aaff;">false</span>;
    <span style="color: #ffcb6b;">interfaces.wlan0.useDHCP</span> = <span style="color: #82aaff;">false</span>;
    <span style="color: #ffcb6b;">networkmanager</span> = {
      <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
      <span style="color: #ffcb6b;">wifi</span> = {
        <span style="color: #ffcb6b;">backend</span> = <span style="color: #c3e88d;">"iwd"</span>;
        <span style="color: #ffcb6b;">macAddress</span> = <span style="color: #c3e88d;">"random"</span>;
        <span style="color: #ffcb6b;">scanRandMacAddress</span> = <span style="color: #82aaff;">true</span>;
      };
    };
  };
  <span style="color: #676E95;">#}}}</span>

  <span style="color: #ffcb6b;">environment.variables</span> = (<span style="color: #82aaff;">import</span> <span style="color: #f78c6c;">../../modules/common/globalvars.nix</span>);

  <span style="color: #ffcb6b;">virtualisation</span> = <span style="color: #82aaff;">import</span> (<span style="color: #f78c6c;">../../modules/virtualisation/default.nix</span>);

  &lt;<span style="color: #f78c6c;">&lt;thinkpad-layout-service&gt;</span>&gt;

  &lt;<span style="color: #f78c6c;">&lt;configurationnix-intelgpu-driver&gt;</span>&gt;

  <span style="color: #676E95;"># This value determines the NixOS release from which the default</span>
  <span style="color: #676E95;"># settings for stateful data, like file locations and database versions</span>
  <span style="color: #676E95;"># on your system were taken. It&#8216;s perfectly fine and recommended to leave</span>
  <span style="color: #676E95;"># this value at the release version of the first install of this system.</span>
  <span style="color: #676E95;"># Before changing this value read the documentation for this option</span>
  <span style="color: #676E95;"># (e.g. man configuration.nix or on https://nixos.org/nixos/options.html).</span>
  <span style="color: #ffcb6b;">system.stateVersion</span> = <span style="color: #c3e88d;">"20.03"</span>; <span style="color: #676E95;"># Did you read the comment?</span>

}
</pre>
</div>
</div>
</div>
<div id="outline-container-org84760e7" class="outline-4">
<h4 id="org84760e7"><span class="section-number-4">21.5.3</span> Packages to install on laptop home environment</h4>
<div class="outline-text-4" id="text-21-5-3">
<div class="org-src-container">
<pre class="src src-nix" id="org329d230"><span style="color: #ffcb6b;">home.packages</span> = <span style="color: #89DDFF;">with</span> pkgs; [
  &lt;<span style="color: #f78c6c;">&lt;haskell-packages-env&gt;</span>&gt;
  trash-cli
  tree
  bc
  gitAndTools.diff-so-fancy
  gitAndTools.delta
  unstable.ripgrep
  unstable.fd
  unstable.fzf
  killall
  neofetch
  pfetch
  nodePackages.node2nix
  cabal2nix
  nix-index
  niv
  rnix-lsp
  scrot
  feh
  tty-clock
  appimage-run
  lightlocker
  circleci-cli
  fontforge
  palenight-gtk-theme
  unstable.pop-icon-theme
  unstable.hicolor-icon-theme <span style="color: #676E95;"># fallback gtk theme</span>
  unstable.pandoc
  unstable.nitrogen
  unstable.chafa
  unstable.ueberzug
  <span style="color: #676E95;"># nixpkgs</span>
  nixfmt
  nixpkgs-fmt
  nixpkgs-review
  nix-prefetch-git
  nix-prefetch-github
  pypi2nix
  <span style="color: #676E95;"># rust</span>
  unstable.cargo
  <span style="color: #676E95;"># tui apps</span>
  cava
  unstable.vifm-full
  vifmimg
  htop
  unstable.powertop
  unstable.bottom
  ncpamixer
  unstable.mps-youtube
  unstable.lazygit
  <span style="color: #676E95;"># gui apps</span>
  master.discord
  tdesktop
  pavucontrol
  spotify
  sxiv
  unstable.pulseeffects
  <span style="color: #676E95;"># node packages</span>
  nodePackages.gitmoji-cli
  <span style="color: #676E95;"># dependencies</span>
  unstable.universal-ctags
  libnotify
  xsel <span style="color: #676E95;"># used by xmonad emoji prompt</span>
  unstable.youtube-dl
  unstable.neovim-remote
  unstable.direnv
  unstable.imagemagick
  unstable.xdotool
  unstable.devour
  unstable.xorg.xwininfo
  unstable.zstd
  unstable.editorconfig-core-c
  unstable.sqlite
  <span style="color: #676E95;"># misc</span>
  glxinfo
  xclip
  file
  catimg
  steam-run
  <span style="color: #676E95;"># joke command</span>
  cmatrix
  figlet
  fortune
  asciiquarium
];
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf0b7195" class="outline-4">
<h4 id="orgf0b7195"><span class="section-number-4">21.5.4</span> home.nix</h4>
<div class="outline-text-4" id="text-21-5-4">
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ config, pkgs, lib, ... }:
<span style="color: #89DDFF;">let</span>

  &lt;<span style="color: #f78c6c;">&lt;haskell-packages&gt;</span>&gt;

<span style="color: #89DDFF;">in</span>
{
  &lt;<span style="color: #f78c6c;">&lt;home-manager-laptop-packages&gt;</span>&gt;

  &lt;<span style="color: #f78c6c;">&lt;lorri-enable&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;keynav-enable&gt;</span>&gt;

  <span style="color: #676E95;"># programs {{{</span>
  <span style="color: #ffcb6b;">programs</span> = {
    <span style="color: #ffcb6b;">home-manager.enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">neovim</span> = (<span style="color: #82aaff;">import</span> <span style="color: #f78c6c;">../../modules/editors/neovim-stable.nix</span>) { <span style="color: #89DDFF;">inherit</span> pkgs; };
  };
  <span style="color: #676E95;">#}}}</span>

  &lt;<span style="color: #f78c6c;">&lt;home-manager-keymap&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;xrandr-laptop-scale&gt;</span>&gt;

  <span style="color: #676E95;"># home files{{{</span>
  <span style="color: #ffcb6b;">home.file</span> = {

    <span style="color: #676E95;"># xmobar{{{</span>
    <span style="color: #c3e88d;">".xmonad/xmobar.hs"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../haskell/xmobarlaptop.hs</span>;
    <span style="color: #c3e88d;">".xmonad/xmobar.hs"</span>.<span style="color: #ffcb6b;">onChange</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">      if [[ -v DISPLAY ]] ; then</span>
<span style="color: #c3e88d;">          echo "Recompiling xmobar"</span>
<span style="color: #c3e88d;">          xmobar -r ~/.xmonad/xmobar.hs &amp;</span>
<span style="color: #c3e88d;">          sleep 2</span>
<span style="color: #c3e88d;">          disown</span>
<span style="color: #c3e88d;">          killall xmobar</span>
<span style="color: #c3e88d;">          echo "Restarting"</span>
<span style="color: #c3e88d;">          xmonad --restart</span>
<span style="color: #c3e88d;">      fi</span>
<span style="color: #c3e88d;">    ''</span>; <span style="color: #676E95;"># }}}</span>

    <span style="color: #676E95;"># tmux theme</span>
    <span style="color: #c3e88d;">".palenight-tmux"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../.palenight-tmux</span>;

    <span style="color: #676E95;"># neovim dashboard logo</span>
    <span style="color: #c3e88d;">"Pictures/neovimlogo.png"</span>.<span style="color: #ffcb6b;">source</span> = (pkgs.fetchurl {
      <span style="color: #ffcb6b;">url</span> = <span style="color: #c3e88d;">"https://raw.githubusercontent.com/neovim/neovim.github.io/master/logos/neovim-logo-flat.png"</span>;
      <span style="color: #ffcb6b;">sha256</span> = <span style="color: #c3e88d;">"1vl7mi87wisqhd9zigg24y2ksjyyjk6225bvw9qk4s6gfv62w4jm"</span>;
    });

    <span style="color: #676E95;"># emacs-anywhere</span>
    <span style="color: #c3e88d;">".emacs_anywhere"</span>.<span style="color: #ffcb6b;">source</span> = (pkgs.fetchFromGitHub {
      <span style="color: #ffcb6b;">owner</span> = <span style="color: #c3e88d;">"btwiusegentoo"</span>;
      <span style="color: #ffcb6b;">repo</span> = <span style="color: #c3e88d;">"emacs-anywhere"</span>;
      <span style="color: #ffcb6b;">rev</span> = <span style="color: #c3e88d;">"e739c8bf1930eeb68ecaf312a885f5788942154c"</span>;
      <span style="color: #ffcb6b;">sha256</span> = <span style="color: #c3e88d;">"0k0iay6pd01k2nyjm2n648n8ja36mgarvb9677ky2d758xkzgckv"</span>;
    });

    <span style="color: #676E95;"># doom emacs</span>
    <span style="color: #676E95;"># ".emacs.d/init.el".text = ''</span>
    <span style="color: #676E95;">#     (load "default.el")</span>
    <span style="color: #676E95;"># '';</span>
    <span style="color: #c3e88d;">".doom.d/init.el"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../doom.d/init.el</span>;
    <span style="color: #c3e88d;">".doom.d/config.el"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../doom.d/config.el</span>;
    <span style="color: #c3e88d;">".doom.d/packages.el"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../doom.d/packages.el</span>;

    <span style="color: #c3e88d;">".ghc/ghci.conf"</span>.<span style="color: #ffcb6b;">text</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">      :set prompt "%s &#120524;: "</span>
<span style="color: #c3e88d;">    ''</span>;

  };
  <span style="color: #676E95;">#}}}</span>

  <span style="color: #676E95;"># xsession{{{</span>
  <span style="color: #ffcb6b;">xsession</span> = {
    <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">scriptPath</span> = <span style="color: #c3e88d;">".hm-xsession"</span>;
    <span style="color: #ffcb6b;">pointerCursor</span> = {
      <span style="color: #ffcb6b;">package</span> = pkgs.bibata-cursors;
      <span style="color: #ffcb6b;">name</span> = <span style="color: #c3e88d;">"Bibata Ice"</span>;
      <span style="color: #ffcb6b;">size</span> = <span style="color: #f78c6c; font-weight: bold;">16</span>;
    };

  }; <span style="color: #676E95;">#}}}</span>

  <span style="color: #676E95;"># xresources config{{{</span>
  <span style="color: #ffcb6b;">xresources.properties</span> = {
    <span style="color: #c3e88d;">"Xft.dpi"</span> = <span style="color: #f78c6c; font-weight: bold;">96</span>;
  };
  <span style="color: #676E95;"># }}}</span>

  <span style="color: #676E95;"># Home Manager config{{{</span>
  <span style="color: #676E95;"># Home Manager needs a bit of information about you and the</span>
  <span style="color: #676E95;"># paths it should manage.</span>
  <span style="color: #ffcb6b;">home.username</span> = <span style="color: #c3e88d;">"x230"</span>;
  <span style="color: #ffcb6b;">home.homeDirectory</span> = <span style="color: #c3e88d;">"/home/x230"</span>;

  <span style="color: #676E95;"># This value determines the Home Manager release that your</span>
  <span style="color: #676E95;"># configuration is compatible with. This helps avoid breakage</span>
  <span style="color: #676E95;"># when a new Home Manager release introduces backwards</span>
  <span style="color: #676E95;"># incompatible changes.</span>
  <span style="color: #676E95;">#</span>
  <span style="color: #676E95;"># You can update Home Manager without changing this value. See</span>
  <span style="color: #676E95;"># the Home Manager release notes for a list of state version</span>
  <span style="color: #676E95;"># changes in each release.</span>
  <span style="color: #ffcb6b;">home.stateVersion</span> = <span style="color: #c3e88d;">"20.03"</span>;

  <span style="color: #676E95;">#}}}</span>

  <span style="color: #676E95;"># local env variables{{{</span>
  <span style="color: #ffcb6b;">home.sessionVariables</span> = {
    <span style="color: #c3e88d;">"XDG_CONFIG_HOME"</span> = <span style="color: #c3e88d;">"$HOME/.config"</span>;
    <span style="color: #c3e88d;">"MANPAGER"</span> = <span style="color: #c3e88d;">"sh -c 'col -bx | bat -l man -p'"</span>;
    <span style="color: #c3e88d;">"COLORTERM"</span> = <span style="color: #c3e88d;">"truecolor"</span>;
    <span style="color: #c3e88d;">"EDITOR"</span> = <span style="color: #c3e88d;">"emacsclient -c"</span>;
  }; <span style="color: #676E95;"># }}}</span>

}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org64342ea" class="outline-3">
<h3 id="org64342ea"><span class="section-number-3">21.6</span> Server</h3>
<div class="outline-text-3" id="text-21-6">
</div>
<div id="outline-container-org28cc7dd" class="outline-4">
<h4 id="org28cc7dd"><span class="section-number-4">21.6.1</span> Set server hostname</h4>
<div class="outline-text-4" id="text-21-6-1">
<div class="org-src-container">
<pre class="src src-nix" id="org53b6d79"><span style="color: #ffcb6b;">networking.hostName</span> = <span style="color: #c3e88d;">"server1"</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfcdc8df" class="outline-4">
<h4 id="orgfcdc8df"><span class="section-number-4">21.6.2</span> configuration.nix</h4>
<div class="outline-text-4" id="text-21-6-2">
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ config, pkgs, fetchgit, ... }:
{

  <span style="color: #ffcb6b;">imports</span> =
    [
      &lt;<span style="color: #f78c6c;">&lt;configurationnix-defaultimports&gt;</span>&gt;
    ];

  &lt;<span style="color: #f78c6c;">&lt;configurationnix-enable-grub&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-grub-timeout&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-grub-copykernels&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-faster-boot&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-latest-kernel&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-plymouth-enable&gt;</span>&gt;

  &lt;<span style="color: #f78c6c;">&lt;configurationnix-server-fspath&gt;</span>&gt;

  &lt;<span style="color: #f78c6c;">&lt;hardware-redistributable-firmware&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;enable-sound&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;configurationnix-intel-microcode&gt;</span>&gt;

  &lt;<span style="color: #f78c6c;">&lt;configurationnix-server-hostname&gt;</span>&gt;
  <span style="color: #676E95;"># Networking{{{</span>

  <span style="color: #676E95;"># The global useDHCP flag is deprecated, therefore explicitly set to false here.</span>
  <span style="color: #676E95;"># Per-interface useDHCP will be mandatory in the future, so this generated config</span>
  <span style="color: #676E95;"># replicates the default behaviour.</span>
  <span style="color: #ffcb6b;">networking</span> = {
    <span style="color: #ffcb6b;">dhcpcd.enable</span> = <span style="color: #82aaff;">false</span>;
    <span style="color: #ffcb6b;">useNetworkd</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">useDHCP</span> = <span style="color: #82aaff;">false</span>;
    <span style="color: #ffcb6b;">interfaces.wlp0s4f1u3u4.useDHCP</span> = <span style="color: #82aaff;">true</span>;
    <span style="color: #ffcb6b;">networkmanager</span> = {
      <span style="color: #ffcb6b;">enable</span> = <span style="color: #82aaff;">true</span>;
      <span style="color: #ffcb6b;">dns</span> = <span style="color: #c3e88d;">"systemd-resolved"</span>;
    };
  };
  <span style="color: #676E95;">#}}}</span>

  <span style="color: #ffcb6b;">environment.variables</span> = (<span style="color: #82aaff;">import</span> <span style="color: #f78c6c;">../../modules/common/globalvars.nix</span>);

  <span style="color: #676E95;"># This value determines the NixOS release from which the default</span>
  <span style="color: #676E95;"># settings for stateful data, like file locations and database versions</span>
  <span style="color: #676E95;"># on your system were taken. It&#8216;s perfectly fine and recommended to leave</span>
  <span style="color: #676E95;"># this value at the release version of the first install of this system.</span>
  <span style="color: #676E95;"># Before changing this value read the documentation for this option</span>
  <span style="color: #676E95;"># (e.g. man configuration.nix or on https://nixos.org/nixos/options.html).</span>
  <span style="color: #ffcb6b;">system.stateVersion</span> = <span style="color: #c3e88d;">"20.03"</span>; <span style="color: #676E95;"># Did you read the comment?</span>

}
</pre>
</div>
</div>
</div>
<div id="outline-container-org914d710" class="outline-4">
<h4 id="org914d710"><span class="section-number-4">21.6.3</span> Packages to install on server home environment</h4>
<div class="outline-text-4" id="text-21-6-3">
<div class="org-src-container">
<pre class="src src-nix" id="orgecef4a2"><span style="color: #ffcb6b;">home.packages</span> = <span style="color: #89DDFF;">with</span> pkgs; [
  trash-cli
  unstable.fd
  gitAndTools.diff-so-fancy
  ripgrep
  unstable.fzf
  binutils
  killall
  neofetch
  unstable.mosh
  nix-index
  niv
  scrot
  feh
  lightlocker
  circleci-cli
  <span style="color: #676E95;"># nixpkgs</span>
  nix-prefetch-git
  nix-prefetch-github
  <span style="color: #676E95;"># tui apps</span>
  htop
  <span style="color: #676E95;"># dependencies</span>
  libnotify
  unstable.youtube-dl
  unstable.neovim-remote
  unstable.direnv
  unstable.imagemagick
  <span style="color: #676E95;"># misc</span>
  file
  catimg
  <span style="color: #676E95;"># joke command</span>
  cowsay
  cmatrix
  espeak
  figlet
  fortune
  asciiquarium
];
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb779552" class="outline-4">
<h4 id="orgb779552"><span class="section-number-4">21.6.4</span> home.nix</h4>
<div class="outline-text-4" id="text-21-6-4">
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ config, pkgs, lib, ... }:
{
  &lt;<span style="color: #f78c6c;">&lt;home-manager-server-packages&gt;</span>&gt;
  &lt;<span style="color: #f78c6c;">&lt;lorri-enable&gt;</span>&gt;

  <span style="color: #676E95;"># programs {{{</span>
  <span style="color: #ffcb6b;">programs</span> = {

    <span style="color: #ffcb6b;">home-manager.enable</span> = <span style="color: #82aaff;">true</span>;

    <span style="color: #ffcb6b;">neovim</span> = (<span style="color: #82aaff;">import</span> <span style="color: #f78c6c;">../../modules/editors/neovim-stable.nix</span>) { <span style="color: #89DDFF;">inherit</span> pkgs; }; <span style="color: #676E95;"># don't compile</span>
  };
  <span style="color: #676E95;">#}}}</span>

  <span style="color: #676E95;"># home files{{{</span>
  <span style="color: #ffcb6b;">home.file</span> = {

    <span style="color: #676E95;"># tmux theme</span>
    <span style="color: #c3e88d;">".palenight-tmux"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../.palenight-tmux</span>;

    <span style="color: #676E95;"># neovim dashboard logo</span>
    <span style="color: #c3e88d;">"Pictures/neovimlogo.png"</span>.<span style="color: #ffcb6b;">source</span> = (pkgs.fetchurl {
      <span style="color: #ffcb6b;">url</span> = <span style="color: #c3e88d;">"https://raw.githubusercontent.com/neovim/neovim.github.io/master/logos/neovim-logo-flat.png"</span>;
      <span style="color: #ffcb6b;">sha256</span> = <span style="color: #c3e88d;">"1vl7mi87wisqhd9zigg24y2ksjyyjk6225bvw9qk4s6gfv62w4jm"</span>;
    });

    <span style="color: #c3e88d;">".ghc/ghci.conf"</span>.<span style="color: #ffcb6b;">text</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">      :set prompt "%s &#955;: "</span>
<span style="color: #c3e88d;">    ''</span>;

  };
  <span style="color: #676E95;">#}}}</span>

  <span style="color: #676E95;"># .config files{{{</span>
  <span style="color: #ffcb6b;">xdg.configFile</span> = {

    <span style="color: #c3e88d;">"nvim/coc-settings.json"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/coc-settings.json</span>;
    <span style="color: #c3e88d;">"neofetch/config.conf"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/neofetch.conf</span>;
    <span style="color: #c3e88d;">"ncpamixer.conf"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/ncpamixer.conf</span>;

    <span style="color: #676E95;"># nixpkgs{{{</span>
    <span style="color: #c3e88d;">"nixpkgs/config.nix"</span>.<span style="color: #ffcb6b;">text</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">      { allowUnfree = true; }</span>
<span style="color: #c3e88d;">    ''</span>;
    <span style="color: #676E95;"># }}}</span>

    <span style="color: #c3e88d;">"vifm/vifmrc"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/vifmrc.vim</span>;

  };
  <span style="color: #676E95;"># }}}</span>

  <span style="color: #ffcb6b;">xsession.enable</span> = <span style="color: #82aaff;">false</span>;


  <span style="color: #676E95;"># Home Manager config{{{</span>
  <span style="color: #676E95;"># Home Manager needs a bit of information about you and the</span>
  <span style="color: #676E95;"># paths it should manage.</span>
  <span style="color: #ffcb6b;">home.username</span> = <span style="color: #c3e88d;">"hac"</span>;
  <span style="color: #ffcb6b;">home.homeDirectory</span> = <span style="color: #c3e88d;">"/home/hac"</span>;

  <span style="color: #676E95;"># This value determines the Home Manager release that your</span>
  <span style="color: #676E95;"># configuration is compatible with. This helps avoid breakage</span>
  <span style="color: #676E95;"># when a new Home Manager release introduces backwards</span>
  <span style="color: #676E95;"># incompatible changes.</span>
  <span style="color: #676E95;">#</span>
  <span style="color: #676E95;"># You can update Home Manager without changing this value. See</span>
  <span style="color: #676E95;"># the Home Manager release notes for a list of state version</span>
  <span style="color: #676E95;"># changes in each release.</span>
  <span style="color: #ffcb6b;">home.stateVersion</span> = <span style="color: #c3e88d;">"20.03"</span>;

  <span style="color: #676E95;">#}}}</span>

  <span style="color: #676E95;"># local env variables{{{</span>
  <span style="color: #ffcb6b;">home.sessionVariables</span> = {
    <span style="color: #c3e88d;">"XDG_CONFIG_HOME"</span> = <span style="color: #c3e88d;">"$HOME/.config"</span>;
    <span style="color: #c3e88d;">"MANPAGER"</span> = <span style="color: #c3e88d;">"sh -c 'col -bx | bat -l man -p'"</span>;
    <span style="color: #c3e88d;">"COLORTERM"</span> = <span style="color: #c3e88d;">"truecolor"</span>;
  }; <span style="color: #676E95;"># }}}</span>

}
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc30713e" class="outline-2">
<h2 id="orgc30713e"><span class="section-number-2">22</span> Symlinks</h2>
<div class="outline-text-2" id="text-22">
<p>
Nix modules to symlink various files included config files
</p>
</div>
<div id="outline-container-orgbc6c7cf" class="outline-3">
<h3 id="orgbc6c7cf"><span class="section-number-3">22.1</span> /etc files</h3>
<div class="outline-text-3" id="text-22-1">
<p>
This module symlinks files that belongs in /etc.
I like to use this path to store icons and wallpapers because this directory <b>/etc</b> is not machine dependent like user&rsquo;s home folder.
That makes possible to share same config that uses these files for more than one machines.
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{
  <span style="color: #ffcb6b;">environment.etc</span> = {
    &lt;<span style="color: #f78c6c;">&lt;etc-wallpaper-files&gt;</span>&gt;
    <span style="color: #676E95;"># icons</span>
    <span style="color: #c3e88d;">"icons/cpu.xpm"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../icons/cpu.xpm</span>;
    <span style="color: #c3e88d;">"icons/ram.xpm"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../icons/ram.xpm</span>;
    <span style="color: #c3e88d;">"icons/battery.xpm"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../icons/battery.xpm</span>;
    <span style="color: #c3e88d;">"icons/battery-charging.xpm"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../icons/battery-charging.xpm</span>;
    <span style="color: #c3e88d;">"icons/calendar.xpm"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../icons/calendar.xpm</span>;
    <span style="color: #c3e88d;">"icons/volume.xpm"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../icons/volume.xpm</span>;
    <span style="color: #c3e88d;">"icons/volume-mute.xpm"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../icons/volume-mute.xpm</span>;
    <span style="color: #c3e88d;">"icons/clock.xpm"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../icons/clock.xpm</span>;
    <span style="color: #676E95;"># emojis</span>
    <span style="color: #c3e88d;">"UnicodeData.txt"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../textfiles/UnicodeData.txt</span>;
    <span style="color: #676E95;"># emacs dashboard logo</span>
    <span style="color: #c3e88d;">"emacs-logo.png"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../pictures/emacs-logo.png</span>;
  };
  &lt;<span style="color: #f78c6c;">&lt;thinkpad-layout-file&gt;</span>&gt;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb20971a" class="outline-3">
<h3 id="orgb20971a"><span class="section-number-3">22.2</span> ~/.config files</h3>
<div class="outline-text-3" id="text-22-2">
<p>
Specify files to symlink into $HOME/.config here.
Usable for programs that Nix options doesn&rsquo;t exist.
This module is imported from home-manager
</p>
<div class="org-src-container">
<pre class="src src-nix"><span style="color: #676E95;"># </span><span style="color: #676E95;">This file is generated from "README.org"</span>
{ pkgs, ... }:

{
  <span style="color: #c3e88d;">"nvim/coc-settings.json"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/coc-settings.json</span>;
  <span style="color: #c3e88d;">"neofetch/config.conf"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/neofetch.conf</span>;
  <span style="color: #c3e88d;">"ncpamixer.conf"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/ncpamixer.conf</span>;

  <span style="color: #c3e88d;">"fontconfig/conf.d/10-prefer-emoji.conf"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/fontconfig/10-prefer-emoji.conf</span>;
  <span style="color: #c3e88d;">"fontconfig/conf.d/10-symbols.conf"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/fontconfig/10-symbols.conf</span>;
  <span style="color: #c3e88d;">"fontconfig/conf.d/65-nonlatin.conf"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/fontconfig/65-nonlatin.conf</span>;
  <span style="color: #c3e88d;">"fontconfig/conf.d/10-hinting.conf"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/fontconfig/10-hinting.conf</span>;

  &lt;<span style="color: #f78c6c;">&lt;tridactylrc-symlink&gt;</span>&gt;

  &lt;<span style="color: #f78c6c;">&lt;keynav-config&gt;</span>&gt;

  <span style="color: #676E95;"># flashfocus</span>
  <span style="color: #c3e88d;">"flashfocus/flashfocus.yml"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/flashfocus.yml</span>;

  <span style="color: #676E95;"># nixpkgs{{{</span>
  <span style="color: #c3e88d;">"nixpkgs/config.nix"</span>.<span style="color: #ffcb6b;">text</span> = <span style="color: #c3e88d;">''</span>
<span style="color: #c3e88d;">    { allowUnfree = true; }</span>
<span style="color: #c3e88d;">  ''</span>;
  <span style="color: #676E95;"># }}}</span>

  <span style="color: #c3e88d;">"vifm/vifmrc"</span>.<span style="color: #ffcb6b;">source</span> = <span style="color: #f78c6c;">../../configs/vifmrc.vim</span>;

  <span style="color: #c3e88d;">"PulseEffects/output/Perfect EQ.json"</span>.<span style="color: #ffcb6b;">source</span> = pkgs.fetchurl {
    <span style="color: #ffcb6b;">url</span> = <span style="color: #c3e88d;">"https://raw.githubusercontent.com/JackHack96/PulseEffects-Presets/master/Perfect%20EQ.json"</span>;
    <span style="color: #ffcb6b;">name</span> = <span style="color: #c3e88d;">"perfecteq.json"</span>;
    <span style="color: #ffcb6b;">sha256</span> = <span style="color: #c3e88d;">"04mjqsiajqdzp43fn16j6sfz3972yfpqq6s2vw0cnim5bp9a642b"</span>;
  };
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf566488" class="outline-2">
<h2 id="orgf566488"><span class="section-number-2">23</span> Misc</h2>
<div class="outline-text-2" id="text-23">
</div>
<div id="outline-container-org3d0aa73" class="outline-3">
<h3 id="org3d0aa73"><span class="section-number-3">23.1</span> Makefile</h3>
<div class="outline-text-3" id="text-23-1">
<p>
Generate a makefile that can be used to generate files from commandline
</p>
<div class="org-src-container">
<pre class="src src-makefile"><span style="color: #82aaff;">build</span>:
    emacs --batch --eval <span style="color: #c3e88d;">"(require 'org)"</span> --eval <span style="color: #c3e88d;">'(org-babel-tangle-file "README.org")'</span>
<span style="color: #82aaff;">install</span>:
    doas nixos-rebuild switch --flake .
<span style="color: #82aaff;">desktop1</span>:
    doas nixos-rebuild switch --flake .#desktop1
<span style="color: #82aaff;">laptop1</span>:
    doas nixos-rebuild switch --flake .#laptop1
<span style="color: #82aaff;">server1</span>:
    doas nixos-rebuild switch --flake .#server1
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org1cd8baa" class="outline-2">
<h2 id="org1cd8baa"><span class="section-number-2">24</span> Credits</h2>
<div class="outline-text-2" id="text-24">
<ul class="org-ul">
<li><a href="https://github.com/NixOS/nixos-artwork/tree/master/logo">NixOS/nixos-artwork</a> -&gt; NixOS logo. Changed colors and used in lock screen wallpaper. used under <a href="https://creativecommons.org/licenses/by/4.0">CC-BY license</a></li>
<li>Wallpaper from <a href="https://www.deviantart.com/seerlight/art/Let-s-Go-Home-743542427">here</a></li>
<li>Icons from <a href="https://remixicon.com">Remix Icon</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2021-03-04 Thu 20:28</p>
</div>
</body>
</html>
